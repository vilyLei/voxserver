function Vbb4(){};Vbb4.BIT_ZERO = 0;Vbb4.BIT_ONE_0 = 1;Vbb4.BIT_ONE_1 = 1<<1;Vbb4.BIT_ONE_2 = 1<<2;Vbb4.BIT_ONE_3 = 1<<3;Vbb4.BIT_ONE_4 = 1<<4;Vbb4.BIT_ONE_5 = 1<<5;Vbb4.BIT_ONE_6 = 1<<6;Vbb4.BIT_ONE_7 = 1<<7;Vbb4.BIT_ONE_8 = 1<<8;Vbb4.BIT_ONE_9 = 1<<9;function Vaa8(){};Vaa8.value = 0;Vaa8.pushThreeBitValueToInt = function(target,value){return (target << 3) + value;};Vaa8.popThreeBitValueFromInt = function(target){Vaa8.value = 7 & target;return (target>>3);};Vaa8.containsBit = function(target,bit){return (bit & target) > 0;};Vaa8.removeBit = function(target,bit){return (~bit & target);};Vaa8.addBit = function(target,bit){return bit | target;};Vaa8.assembleFromIntArray = function(intArray){let i = 0;let bit = 0x0;let len = intArray.length;for(; i < len; ++i){if(intArray[i] > 0){bit |= 1<<i;};};return bit;};function Vjj2(){};Vjj2.MATH_MIN_POSITIVE = 0.00001;Vjj2.MATH_MAX_NEGATIVE = -0.00001;Vjj2.MATH_MAX_POSITIVE = 0xfffffff;Vjj2.MATH_MIN_NEGATIVE = -0xfffffff;Vjj2.MATH_1_OVER_255 = 1.0/255.0;Vjj2.MATH_PI = 3.14159265;Vjj2.MATH_2PI = Vjj2.MATH_PI * 2;Vjj2.MATH_3PER2PI = Vjj2.MATH_PI * 1.5;Vjj2.MATH_1PER2PI = Vjj2.MATH_PI * 0.5;Vjj2.MATH_1_OVER_PI = 1.0 / Vjj2.MATH_PI;Vjj2.MATH_1_OVER_360 = 1.0 / 360.0;Vjj2.MATH_1_OVER_180 = 1.0 / 180.0;Vjj2.MATH_180_OVER_PI = 180.0 / Vjj2.MATH_PI;Vjj2.MATH_PI_OVER_180 = Vjj2.MATH_PI / 180.0;Vjj2.MATH_LN2 = 0.6931471805599453;Vjj2.Voo3 = function(value){return (value & (value - 1)) == 0;};Vjj2.Voo8 = function(int_n){return Math.pow(2, Math.ceil( Math.log(int_n) / Math.LN2 ) );};Vjj2.degreeToRadian = function(degree){return Vjj2.MATH_PI_OVER_180 * degree;};Vjj2.safeACos = function(x){if (x <= -1.0){return Vjj2.MATH_PI;};if (x >= 1.0){return 0.0;};return Math.acos(x);};let Vee6 = {ELEMENTS_TRIANGLES:1,ELEMENTS_INSTANCED_TRIANGLES:2,ARRAYS_LINES:3,ARRAYS_LINE_STRIP:4,ARRAYS_POINTS:5,DISABLE:0};let Vnn8 = {NORMAL:1,OPAQUE:1,TRANSPARENT:2,ALPHA_ADD:3,ADD:4,ADD2:5,INVERSE_ALPHA:6,BLAZE:7,OVERLAY:8,OVERLAY2:8,DISABLE:0};let Vkk7 = {BACK:1,FRONT:2,FRONT_AND_BACK:3,NONE:4,DISABLE:0};let Vcc1 = {RENDER_NEVER:1, RENDER_ALWAYS:2, RENDER_SKY:3, RENDER_OPAQUE:4, RENDER_OPAQUE_OVERHEAD:5, RENDER_DECALS:6, RENDER_BLEND:7, RENDER_BLEND_SORT:8, RENDER_TRANSPARENT_SORT:9, RENDER_WIRE_FRAME:10, RENDER_NEXT_LAYER:11, RENDER_WIRE_FRAME_NEXT:12, DISABLE:0};function Vgg2(){this.Kyyy7 = function(type){if(type == 0){type ++;}else{type--;};};};Vgg2.SCENE_RO_FILTER_BEGIN = (1<<19);Vgg2.SCENE_RO_FILTER_FINISH = (2<<19);Vgg2.SCENE_RO_ERASE = 0;class Vjj5{};Vjj5.ATTRINS_VTX_VS = "a_vs";Vjj5.ATTRINS_VTX_UVS = "a_uvs";Vjj5.ATTRINS_VTX_NVS = "a_nvs";Vjj5.ATTRINS_VTX_CVS = "a_cvs";Vjj5.UNIFORMNS_OBJ_MAT_NS = "u_objMat";Vjj5.UNIFORMNS_VIEW_MAT_NS = "u_viewMat";Vjj5.UNIFORMNS_PROJ_MAT_NS = "u_projMat";Vjj5.SHADER_VEC2 = 3011;Vjj5.SHADER_VEC3 = 3012;Vjj5.SHADER_VEC4 = 3013;Vjj5.SHADER_VEC2FV = 3014;Vjj5.SHADER_VEC3FV = 3015;Vjj5.SHADER_VEC4FV = 3016;Vjj5.SHADER_MAT2 = 3017;Vjj5.SHADER_MAT3 = 3018;Vjj5.SHADER_MAT4 = 3019;Vjj5.SHADER_FLOAT = 3020;Vjj5.SHADER_IVEC2 = 3021;Vjj5.SHADER_IVEC3 = 3022;Vjj5.SHADER_IVEC4 = 3023;Vjj5.SHADER_IVEC2FV = 3024;Vjj5.SHADER_IVEC3FV = 3025;Vjj5.SHADER_IVEC4FV = 3026;Vjj5.SHADER_SAMPLER2D = 3031;Vjj5.SHADER_SAMPLERCUBE = 3032;Vjj5.SHADER_PRECISION_LOWP = 101;Vjj5.SHADER_PRECISION_MEDIUMP = 111;Vjj5.SHADER_PRECISION_HIGHP = 121;Vjj5.UNIFORM_TEX_SAMPLER2D = "sampler2D";Vjj5.UNIFORM_TEX_SAMPLERCUBE = "samplerCube";Vjj5.UNIFORM_TEX_SAMPLER3D = "sampler3D";Vjj5.UNIFORMNS_TEX_SAMPLER_0 = "u_sampler0";Vjj5.UNIFORMNS_TEX_SAMPLER_1 = "u_sampler1";Vjj5.UNIFORMNS_TEX_SAMPLER_2 = "u_sampler2";Vjj5.UNIFORMNS_TEX_SAMPLER_3 = "u_sampler3";Vjj5.UNIFORMNS_TEX_SAMPLER_4 = "u_sampler4";Vjj5.UNIFORMNS_TEX_SAMPLER_5 = "u_sampler5";Vjj5.UNIFORMNS_TEX_SAMPLER_6 = "u_sampler6";Vjj5.UNIFORMNS_TEX_SAMPLER_7 = "u_sampler7";Vjj5.UNIFORMNS_TEX_SAMPLER_LIST = [Vjj5.UNIFORMNS_TEX_SAMPLER_0,Vjj5.UNIFORMNS_TEX_SAMPLER_1,Vjj5.UNIFORMNS_TEX_SAMPLER_2,Vjj5.UNIFORMNS_TEX_SAMPLER_3,Vjj5.UNIFORMNS_TEX_SAMPLER_4,Vjj5.UNIFORMNS_TEX_SAMPLER_5,Vjj5.UNIFORMNS_TEX_SAMPLER_6,Vjj5.UNIFORMNS_TEX_SAMPLER_7];Vjj5.getTypeByTypeNS = function(tns){switch(tns){case "mat4":return Vjj5.SHADER_MAT4;break;case "mat3":return Vjj5.SHADER_MAT3;break;case "mat2":return Vjj5.SHADER_MAT2;break;case "float":return Vjj5.SHADER_FLOAT;break;case "vec4":return Vjj5.SHADER_VEC4;break;case "vec3":return Vjj5.SHADER_VEC3;break;case "vec2":return Vjj5.SHADER_VEC2;break;case "vec4[]":return Vjj5.SHADER_VEC4FV;break;case "vec3[]":return Vjj5.SHADER_VEC3FV;break;case "vec2[]":return Vjj5.SHADER_VEC2FV;break;case "ivec2":return Vjj5.SHADER_IVEC2;break;case "ivec3":return Vjj5.SHADER_IVEC3;break;case "ivec4":return Vjj5.SHADER_IVEC4;break;case "ivec2[]":return Vjj5.SHADER_IVEC2FV;break;case "ivec3[]":return Vjj5.SHADER_IVEC3FV;break;case "ivec4[]":return Vjj5.SHADER_IVEC4FV;break;case "sampler2D":return Vjj5.SHADER_SAMPLER2D;break;case "sampler3D":return Vjj5.SHADER_SAMPLER3D;break;case "samplerCube":return Vjj5.SHADER_SAMPLERCUBE;break;default:return -1;};return -1;};Vjj5.getTypeNSByType = function(type){switch(type){case Vjj5.SHADER_MAT4:return "mat4";break;case Vjj5.SHADER_MAT3:return "mat3";break;case Vjj5.SHADER_MAT2:return "mat2";break;case Vjj5.SHADER_FLOAT:return "float";break;case Vjj5.SHADER_VEC4:return "vec4";case Vjj5.SHADER_VEC3:return "vec3";break;case Vjj5.SHADER_VEC2:return "vec2";break;case Vjj5.SHADER_SAMPLER2D:return "sampler2D";break;case Vjj5.SHADER_SAMPLER3D:return "sampler3D";break;case Vjj5.SHADER_SAMPLERCUBE:return "samplerCube";break;};return "";};function Vjj1(){};Vjj1.DISABLE = 0;Vjj1.NO_LIGHT = 11;Vjj1.AMBIENT_LIGHT = 12;Vjj1.DIFFUSE_DIRECTION_LIGHT = 13;Vjj1.DIFFUSE_POINT_LIGHT = 14;Vjj1.DIFFUSE_SPOT_LIGHT = 15;Vjj1.SPECULAR_DIRECTION_LIGHT = 17;Vjj1.SPECULAR_POINT_LIGHT = 18;Vjj1.GROUP_LIGHT = 37;"use strict";function Vcc0(){this.KKK0 = 100;this.Kii5 = [100,100];this.Klll8 = function(){return 100;};};const nullptr = null;const WEB_GL1 = 10001;const WEB_GL2 = 10002;let WEBGL_VER = WEB_GL1;function Vpp4(){return WEBGL_VER==WEB_GL1;};function Vpp5(){return WEBGL_VER==WEB_GL2;};function Vdd1(){WEBGL_VER = WEB_GL1;};function Vdd4(){WEBGL_VER = WEB_GL2;};const MOUSE_UP = 5001;const MOUSE_DOWN = 5002;const MOUSE_RIGHT_UP = 5003;const MOUSE_RIGHT_DOWN = 5004;const MOUSE_MOVE = 5005;const KEY_DOWN = 6001;const KEY_UP = 6002;const SHADERCODE_TRACE = true;let RUN_DEBUG_TRACE_ONE_TIME = false;let MATH_sysCosArr = [];let MATH_sysSinArr = [];let pv = 0;for(var i = 0; i <= 628; ++i){pv = 0.01 * i;MATH_sysCosArr[i] = Math.cos(pv);MATH_sysSinArr[i] = Math.sin(pv);};function Vnn3(rad){rad = Math.round(rad * 100);if(rad < 0){rad %= 628;;rad += 628;}else if(rad > 628){rad %= 628;};return MATH_sysCosArr[rad];};function Vii1(rad){rad = Math.round(rad * 100);if(rad < 0){rad %= 628;;rad += 628;}else if(rad > 628){rad %= 628;};return MATH_sysSinArr[rad];};function trace(){var i = 0, n = arguments.length;var str = "";for(; i < n; i++){;str += arguments[i];};console.log(str);};function Vgg7(){var i = 0, n = arguments.length;var str = "";for(; i < n; i++){;str += arguments[i];};console.log(str);};function log(){let i = 0, n = arguments.length;let str = "";for(; i < n; i++){;str += arguments[i];};console.log(str);};function Vgg4(minU, maxU, minV, maxV,m_vtx_buf,uvTotal){var du = maxU - minU;var dv = maxV - minV;var i = 0;var j = 0;for (; i < uvTotal; ++i){j = i * 2;m_vtx_buf[j] = m_vtx_buf[j] * du + minU;++j;m_vtx_buf[j] = m_vtx_buf[j] * dv + minV;};};function Voo3(value){return (value & (value - 1)) == 0;};function Vpp8(int_n){let x = 1;while(x < int_n) {x <<= 1;};return x;};function Voo8(int_n){return Math.pow(2, Math.ceil( Math.log(int_n) / Math.LN2 ) );};function Vff2(a1, a0){a0 %= MATH_2PI;a1 %= MATH_2PI;if (a0 < a1){a0 = MATH_2PI - a1 + a0;if (a0 > MATH_PI) return a0 - MATH_2PI;return a0;}else if (a0 > a1){a1 = MATH_2PI - a0 + a1;if (a1 > MATH_PI) return MATH_2PI - a1;return -a1;};return 0.0;};function Voo1(a0, a1){var angle = 0;if(a1 >= 270 && a0 < 90){;angle = (a1 - (a0 + 360)) % 180;}else if (a1 <= 90 && a0 >= 270) {angle = (a1 + 360 - a0) % 180;}else {angle = (a1 - a0);if (Math.abs(angle) > 180) {;angle -= 360;};};return angle;};function Vee5(dx,dy){if(Math.abs(dx) < 0.00001){if(dy >= 0) return 270;else return 90;};var angle = Math.atan(dy/dx) * 180/Math.PI;if(dy>0 && dx>0){return angle}else if(dy<0 && dx>=0){return 360+angle;}else{return 180+angle;};return angle;};function Vaa3(dx,dy){if(Math.abs(dx) < Vjj2.MATH_MIN_POSITIVE){if(dy >= 0) return MATH_1PER2PI;else return MATH_3PER2PI;};var rad = Math.atan(dy/dx);if(dx >= 0){return rad;}else{return MATH_PI+rad;};};function Vbb2(cosv,dx,dy){var rad = Math.acos(cosv);if(dx >= 0){return rad;}else{return Vjj2.MATH_PI+rad;};};function Vee8(a0, a1){a0 /= 360.0;a0 = (a0 - floor(a0)) * 360.0;;if (a0 < 0) a0 += 360.0;a1 /= 360.0;a1 = (a1 - floor(a1)) * 360.0;;if (a1 < 0) a1 += 360;if (a0 < a1){a0 = 360.0 - a1 + a0;if (a0 > 180.0) return a0 - 360.0;return a0;}else if (a0 > a1){a1 = 360.0 - a0 + a1;if (a1 > 180.0) return 360.0 - a1;return -a1;};return 0.0;};let SYS_NO_ERROR = true;let SYS_ERROR = false;function Vee4(infostr){SYS_NO_ERROR = false;SYS_ERROR = true;alert(infostr);};function Vii0(){this.rst = -1;this.Knnn6 = -1;this.Klll0 = 0;this.Kttt1 = null;this.Kmm5 = null;};function Vgg0(){let total = 256;this.Kll0 = 0;this.Krrr4 = [];this.KJJ1 = new Uint16Array(total);for(let i = 0; i < total; ++i){this.Krrr4.push(null);this.KJJ1[i] = 0;};};const GlobalUniformSlot = new Vgg0();function Vll7(){this.Kvv6 = 800;this.KMM1 = 600;this.Kkkk5 = 400;this.Kqqq1 = 300;this.Kss2 = 0;this.Kss1 = 0;this.Kbbb3 = 0;this.Kbbb4 = 0;this.Klll7 = new Vii0();let m_stageParamArr = [400,300,0,0];let preStageWidth = 0;let preStageHeight = 0;this.Kzzz6 = function(){if(preStageWidth != this.Kvv6 || preStageHeight != this.KMM1){preStageWidth = this.Kvv6;preStageHeight = this.KMM1;m_stageParamArr[0] = 2.0/this.Kvv6;m_stageParamArr[1] = 2.0/this.KMM1;m_stageParamArr[2] = this.Kvv6;m_stageParamArr[3] = this.KMM1;if(this.Klll7.rst < 0){this.Klll7.rst = 1;this.Klll7.Knnn6 = GlobalUniformSlot.Kll0;this.Klll7.Klll0 = 1;GlobalUniformSlot.Krrr4[this.Klll7.Knnn6] = m_stageParamArr;;GlobalUniformSlot.Kll0 += this.Klll7.Klll0;this.Klll7.Kttt1 = [Vjj5.SHADER_VEC4];this.Klll7.Kmm5 = [1];};if(this.Klll7.rst > 0xffffff) this.Klll7.rst = Math.round(Math.random() * 1000) + 100;this.Klll7.rst++;GlobalUniformSlot.KJJ1[this.Klll7.Knnn6] = this.Klll7.rst;};};this.Kttt2 = function(){let len = m_down_listener.length;for(var i = 0; i < len; ++i){m_down_listener[i].call();};};this.KBBB0 = function(){let len = m_up_listener.length;for(let i = 0; i < len; ++i){m_up_listener[i].call();};};this.Keee6 = function(){let len = m_downRight_listener.length;for(var i = 0; i < len; ++i){m_downRight_listener[i].call();};};this.KXX0 = function(){let len = m_upRight_listener.length;for(let i = 0; i < len; ++i){m_upRight_listener[i].call();};};this.Kyyy4 = function(){let len = m_move_listener.length;for(let i = 0; i < len; ++i){m_move_listener[i].call();};};let m_down_listener = [];let m_up_listener = [];let m_downRight_listener = [];let m_upRight_listener = [];let m_move_listener = [];this.addEventListener = function(type,func){if(func != undefined && type != undefined){let i = 0;switch(type){case MOUSE_DOWN:for(i = m_down_listener.length - 1; i >= 0; --i){if(func === m_down_listener[i]){break;};};if(i < 0){m_down_listener.push(func);};break;case MOUSE_UP:for(i = m_up_listener.length - 1; i >= 0; --i){if(func === m_up_listener[i]){break;};};if(i < 0){m_up_listener.push(func);};break;case MOUSE_RIGHT_DOWN:for(i = m_downRight_listener.length - 1; i >= 0; --i){if(func === m_downRight_listener[i]){break;};};if(i < 0){m_downRight_listener.push(func);};break;case MOUSE_RIGHT_UP:for(i = m_upRight_listener.length - 1; i >= 0; --i){if(func === m_upRight_listener[i]){break;};};if(i < 0){m_upRight_listener.push(func);};break;case MOUSE_MOVE:for(i = m_move_listener.length - 1; i >= 0; --i){if(func === m_move_listener[i]){break;};};if(i < 0){m_move_listener.push(func);};break;default:break;};};};this.KAA4 = function(type,func){if(func != undefined && type != undefined){let i = 0;switch(type){case MOUSE_DOWN:for(i = m_down_listener.length - 1; i >= 0; --i){if(func === m_down_listener[i]){m_down_listener.splice(i,1);break;};};break;case MOUSE_UP:for(i = m_up_listener.length - 1; i >= 0; --i){if(func === m_up_listener[i]){m_up_listener.splice(i,1);break;};};break;case MOUSE_RIGHT_DOWN:for(i = m_downRight_listener.length - 1; i >= 0; --i){if(func === m_downRight_listener[i]){m_downRight_listener.splice(i,1);break;};};break;case MOUSE_RIGHT_UP:for(i = m_upRight_listener.length - 1; i >= 0; --i){if(func === m_upRight_listener[i]){m_upRight_listener.splice(i,1);break;};};break;case MOUSE_MOVE:for(i = m_move_listener.length - 1; i >= 0; --i){if(func === m_move_listener[i]){m_move_listener.splice(i,1);break;};};break;default:break;};};};};let Stage = new Vll7();function Vdd8(){this.Krrr5 = function(evt){let len = m_down_listener.length;for(var i = 0; i < len; ++i){m_down_listener[i].call(null,evt);};};this.Kii6 = function(evt){let len = m_up_listener.length;for(let i = 0; i < len; ++i){m_up_listener[i].call(null,evt);};};let m_down_listener = [];let m_up_listener = [];this.addEventListener = function(type,func){if(func != undefined && type != undefined){let i = 0;switch(type){case KEY_DOWN:for(i = m_down_listener.length - 1; i >= 0; --i){if(func === m_down_listener[i]){break;};};if(i < 0){m_down_listener.push(func);};break;case KEY_UP:for(i = m_up_listener.length - 1; i >= 0; --i){if(func === m_up_listener[i]){break;};};if(i < 0){m_up_listener.push(func);};break;default:break;};};};this.KAA4 = function(type,func){if(func != undefined && type != undefined){let i = 0;switch(type){case KEY_DOWN:for(i = m_down_listener.length - 1; i >= 0; --i){if(func === m_down_listener[i]){m_down_listener.splice(i,1);break;};};break;case KEY_UP:for(i = m_up_listener.length - 1; i >= 0; --i){if(func === m_up_listener[i]){m_up_listener.splice(i,1);break;};};break;default:break;};};};};let Keyboard = new Vdd8();let Vkk1 = {x:800,y:600};function Vaa1() {alert(navigator.userAgent);let ua = navigator.userAgent.toLowerCase();let boo = ua.match(/MicroMessenger/i) == "micromessenger";if(boo) return true;if(window.orientation !== undefined){return true;};return false;};function Vnn2(){};Vnn2.R8 = 101;Vnn2.RGB = 110;Vnn2.RED = 111;Vnn2.RGBA = 121;Vnn2.ALPHA = 132;Vnn2.RGB16F = 331;Vnn2.RGBA16F = 332;Vnn2.RGB32F = 341;Vnn2.RGBA32F = 342;Vnn2.toGL = function(gl,format){switch(format){case Vnn2.R8:return gl.R8;break;case Vnn2.RGB:return gl.RGB;break;case Vnn2.ALPHA:return gl.ALPHA;break;case Vnn2.RGB16F:return gl.RGB16F;break;case Vnn2.RGBA16F:return gl.RGBA16F;break;case Vnn2.RGB32F:return gl.RGB32F;break;case Vnn2.RGBA32F:return gl.RGBA32F;break;case Vnn2.RED:return gl.RED;break;default:};return gl.RGBA;};function Vaa0(){};Vaa0.UNSIGNED_BYTE = 1110;Vaa0.BYTE = 1111;Vaa0.FLOAT = 1211;Vaa0.HALF_FLOAT = 1212;Vaa0.toGL = function(gl,type){switch(type){case Vaa0.UNSIGNED_BYTE:return gl.UNSIGNED_BYTE;break;case Vaa0.BYTE:return gl.BYTE;break;case Vaa0.FLOAT:return gl.FLOAT;break;case Vaa0.HALF_FLOAT:return gl.HALF_FLOAT;break;};return gl.RGBA;};function Vaa6(){};Vaa6.TEXTURE_2D = 20;Vaa6.TEXTURE_2D_ARRAY = 22;Vaa6.TEXTURE_CUBE = 25;Vaa6.TEXTURE_3D = 30;Vaa6.WRAP_REPEAT = 3001;Vaa6.WRAP_CLAMP_TO_EDGE = 3002;Vaa6.WRAP_MIRRORED_REPEAT = 3003;Vaa6.LINEAR_MIPMAP_LINEAR = 4001;Vaa6.LINEAR = 4002;Vaa6.NEAREST = 4003;Vaa6.getConst = function(gl,param){switch(param){case Vaa6.NEAREST:return gl.NEAREST;break;case Vaa6.LINEAR_MIPMAP_LINEAR:return gl.LINEAR_MIPMAP_LINEAR;break;case Vaa6.LINEAR:return gl.LINEAR;break;case Vaa6.WRAP_REPEAT:return gl.REPEAT;break;case Vaa6.WRAP_CLAMP_TO_EDGE:return gl.CLAMP_TO_EDGE;break;case Vaa6.WRAP_MIRRORED_REPEAT:return gl.MIRRORED_REPEAT;break;case Vaa6.TEXTURE_2D:return gl.TEXTURE_2D;break;case Vaa6.TEXTURE_2D_ARRAY:return gl.TEXTURE_2D_ARRAY;break;case Vaa6.TEXTURE_CUBE:return gl.TEXTURE_CUBE_MAP;break;case Vaa6.TEXTURE_3D:return gl.TEXTURE_3D;break;default:};return -1;};function Vnn6(tx,ty){if(tx == undefined || tx == null){;tx = 0;};if(ty == undefined || ty == null){;ty = 0;};this.x = tx;this.y = ty;this.id = 0;var ix = tx;var iy = ty;var v0 = 0.0;var v1 = 0.0;this.KAAA0 = function(px,py){if(px == undefined || px == null){;px = 0;};if(py == undefined || py == null){;py = 0;};this.x = px;this.y = py;};this.Kff0 = function(){return "Vnn6 ( x = "+this.x+", y = "+this.y+")";};this.Kww6 = function(){return new Vnn6(this.x,this.y);};this.dot = function(v) {return this.x * v.x + this.y * v.y;};this.Kuu7 = function(v){return new Vnn6(this.x * v.x, this.y * v.y);};this.Kzz6 = function(){if(Math.abs(this.x) > Vjj2.MATH_MIN_POSITIVE ||Math.abs(this.y) > Vjj2.MATH_MIN_POSITIVE){;return false;};return true;};this.Kggg6 = function(v){return this.x * v.y - this.y * v.x;};this.Kxxx3 = function(v){;this.x += v.x;;this.y += v.y;};this.add = function (v){return new Vnn6(this.x + v.x, this.y + v.y);};this.Kuuu1 = function(v){this.x -= v.x;this.y -= v.y;};this.Kqqq8 = function(v){return new Vnn6(this.x - v.x, this.y - v.y);};this.Kxxx5 = function(s) {this.x *= s;this.y *= s;};this.Kooo8 = function(s){return new Vnn6(this.x * s, this.y * s);};this.KYY7 = function(s){if( s > Vjj2.MATH_MIN_POSITIVE || s < Vjj2.MATH_MIN_POSITIVE){this.x /= s;this.y /= s;};};this.Koo4 = function(s){if( s > Vjj2.MATH_MIN_POSITIVE || s < Vjj2.MATH_MIN_POSITIVE){return new Vnn6(this.x/s,this.y/s);};return clone();};this.Kmm6 = function(v){if(this.x != v.x || this.y != v.y){return false;};return true;};this.KRR8 = function(v){var dx = this.x - v.x;var dy = this.y - v.y;this.length = Math.sqrt(dx * dx + dy * dy);return this.length;};this.Kkkk2 = function(){var v = new Vnn6(this.x,this.y);var d = Math.sqrt( this.x * this.x + this.y * this.y );if(d > 0){;v.x /= d;v.y /= d;return v;};return null;};this.Kww1 = function(){var mag = Math.sqrt( this.x * this.x + this.y * this.y );if( mag> 0){;this.x /= mag;this.y /= mag;};};this.KII4 = function(){if(Math.abs(x)<Vjj2.MATH_MIN_POSITIVE || Math.abs(y)<Vjj2.MATH_MIN_POSITIVE){;return false;};return true;};this.Kll8 = function(){return Math.sqrt( this.x * this.x + this.y * this.y );};this.Kvvv6 = function(){return this.x * this.x + this.y * this.y;};this.KKK4 = function(b){var adotb = this.dot(b);var len = (b.x * b.x + b.y * b.y);var proj = new Vnn6(0,0);proj.x = (adotb / len) * b.x;proj.y = (adotb / len) * b.y;return proj;};this.KSS5 = function(n) {var adotb = this.dot(n);this.x = n.x * adotb;this.y = n.y * adotb;};this.Kmmm6 = function(rad){var p_x = this.x;var p_y = this.y;v0 = Math.cos(rad);v1 = Math.sin(rad);this.x = p_x * v0 - p_y * v1;this.y = p_x * v1 + p_y * v0;};this.KMM6 = function(rad){v0 = Math.cos(rad);v1 = Math.sin(rad);var p_x = this.x * v0 - this.y * v1;var p_y = this.x * v1 + this.y * v0;return new Vnn6(p_x, p_y);};this.KRR2 = function(rad){ix = this.x;iy = this.y;v0 = Math.cos(rad);v1 = Math.sin(rad);this.x = ix * v0 - iy * v1;this.y = ix * v1 + iy * v0;};this.Kss0 = function(rad,v){ix = this.x;iy = this.y;v0 = Math.cos(rad);v1 = Math.sin(rad);this.x = ix * v0 - iy * v1 + v.x;this.y = ix * v1 + iy * v0 + v.y;};this.Khhh5 = function(){if(Math.abs(this.x) < Vjj2.MATH_MIN_POSITIVE){;if(this.y > 0){;return Math.PI * 0.5;}else{return Math.PI * 1.5;};};var radian = Math.atan(this.y / this.x);if(this.y>=0 && this.x>=0){;return radian;}else if(this.y < 0 && this.x >= 0){;radian += 2*Math.PI;}else{;radian += Math.PI;};return radian;};this.Kmmm7 = function(){if(Math.abs(this.x) < Vjj2.MATH_MIN_POSITIVE){;if(this.y > 0){;return 90;}else{return 270;};};var angle = Math.atan(this.y / this.x) * Vjj2.MATH_180_OVER_PI;if(this.y>=0 && this.x>=0){return angle;}else if(this.y < 0 && this.x >= 0){;angle += 360;}else{;angle += 180;};return angle%360;};};function Vjj8(px,py, pw,ph){if(px == undefined) px = 0;if(py == undefined) py = 0;if(pw == undefined) pw = 100;if(ph == undefined) ph = 100;this.x = px;this.y = py;this.width = Math.abs(pw);this.height = Math.abs(ph);var m_maxX = px + this.width;var m_MaxY = py + this.height;pw = 0.5 * this.width;ph = 0.5 * this.height;var m_centerX = px + pw;var m_centerY = py + ph;var m_radiusSqrt = pw * pw + ph * ph;var m_radius = Math.sqrt(m_radiusSqrt);this.Kwww5 = function(){return m_maxX;};this.Kaaa4 = function(){return m_maxY;};this.Kww4 = function(){return m_centerX;};this.Kww3 = function(){return m_centerY;};this.KDD4 = function(){return m_radius;};this.KVV1 = function(){return m_radiusSqrt;};this.Kkkk3 = function(px,py, pw,ph){this.x = px;this.y = py;if(pw != undefined) this.width = Math.abs(pw);if(ph != undefined) this.height = Math.abs(ph);m_maxX = px + this.width;m_MaxY = py + this.height;pw = 0.5 * this.width;ph = 0.5 * this.height;m_centerX = px + pw;m_centerY = py + ph;m_radiusSqrt = pw * pw + ph * ph;m_radius = Math.sqrt(m_radiusSqrt);};this.KWW1 = function(px, py, pw, ph){this.width = pw;this.height = ph;this.x = px;this.Knnn7 = this.width + this.x;this.y = py;this.KAAA8 = this.height + this.y;};this.Kkk1 = function(px,py){this.x = px;this.y = py;if(pw != undefined) this.width = Math.abs(pw);if(ph != undefined) this.height = Math.abs(ph);m_maxX = px + this.width;m_MaxY = py + this.height;pw = 0.5 * this.width;ph = 0.5 * this.height;m_centerX = px + pw;m_centerY = py + ph;m_radiusSqrt = pw * pw + ph * ph;m_radius = Math.sqrt(m_radiusSqrt);};this.Khhh2 = function(px,py){if(px < this.x) return false;if(py < this.y) return false;if(px > m_maxX) return false;if(py > m_MaxY) return false;return true;};this.Kkkk1 = function(b, offsetX, offsetY){if (this.Knnn7 < (b.x + offsetX) || this.x > (this.Knnn7 + offsetX)) return false;if (this.KAAA8 < (b.y + offsetY) || this.y > (this.KAAA8 + offsetY)) return false;return true;};this.Kwww4 = function(b){if (this.Knnn7 < b.x || this.x >b.Knnn7) return false;if (this.KAAA8 < b.y || this.y >b.KAAA8) return false;return true;};this.Kzzz6 = function(){};};function Vcc6(){};Vcc6.AXIS_ANGLE = 110;Vcc6.QUATERNION = 220;Vcc6.EULER_ANGLES = 330;function Vqq0(px,py,pz,pw){if(px != undefined){this.x = px;}else{this.x = 0;};if(py != undefined){this.y = py;}else{this.y = 0;};if(pz != undefined){this.z = pz;}else{this.z = 0;};if(pw != undefined){this.w = pw;}else{this.w = 1.0;};this.Kkkk3 = function(px,py,pz,pw){this.x = px;this.y = py;this.z = pz;if(pw != undefined){this.w = pw;};};this.Kbb8 = function(v3){this.x = v3.x;this.y = v3.y;this.z = v3.z;};this.Kjj3 = function(){return [this.x,this.y,this.z];};this.Kfff5 = function(a){return this.x * a.x + this.y * a.y + this.z * a.z;};this.Kggg6 = function(a){let px = this.y * a.z - this.z * a.y;let py = this.z * a.x - this.x * a.z;let pz = this.x * a.y - this.y * a.x;this.x = px;this.y = py;this.z = pz;};this.Knn1 = function(a){this.x *= a.x;this.y *= a.y;this.z *= a.z;};this.Kww1 = function(){let d = Math.sqrt(this.x*this.x + this.y*this.y + this.z*this.z);if (d > Vjj2.MATH_MIN_POSITIVE){this.x /= d;this.y /= d;this.z /= d;};};this.Kxxx5 = function(s){this.x *= s;this.y *= s;this.z *= s;};this.Khh4 = function(a){;this.x += a.x;;this.y += a.y;;this.z += a.z;};this.Keee5 = function(a){this.x -= a.x;this.y -= a.y;this.z -= a.z;};this.Ksss6 = function(){this.x = -this.x;this.y = -this.y;this.z = -this.z;};this.Kmm6 = function(toCompare, allFour){return this.x == toCompare.x && this.y == toCompare.y && this.z == toCompare.z && (allFour ? this.w == toCompare.w : true);};this.KKK4 = function(){let t = 1.0 / w;this.x *= t;this.y *= t;this.z *= t;};this.length = function(){return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);};this.KVV7 = function(){return this.x * this.x + this.y * this.y + this.z * this.z;};this.Kxxx3 = function(a){;this.x += a.x;;this.y += a.y;;this.z += a.z;};this.Kuuu1 = function(a){this.x -= a.x;this.y -= a.y;this.z -= a.z;};this.Kqqq8 = function(a){return new Vqq0(this.x - a.x, this.y - a.y, this.z - a.z);};this.add = function(a){return new Vqq0(this.x + a.x, this.y + a.y, this.z + a.z);};this.KCC2 = function(a){return new Vqq0(this.y * a.z - this.z * a.y, this.z * a.x - this.x * a.z, this.x * a.y - this.y * a.x);};this.Kff0 = function(){return "[Vqq0(x="+this.x+", y="+this.y+",z="+this.z+",w="+this.w+")]";};};const __stv0 = new Vqq0();Vqq0.X_AXIS = new Vqq0(1,0,0);Vqq0.y_AXIS = new Vqq0(0,1,0);Vqq0.z_AXIS = new Vqq0(0,0,1);Vqq0.cross = function(a, b, result){result.x = a.y * b.z - a.z * b.y;result.y = a.z * b.x - a.x * b.z;result.z = a.x * b.y - a.y * b.x;};Vqq0.distanceSquared = function(a, b){__stv0.x = a.x - b.x;__stv0.y = a.y - b.y;__stv0.z = a.z - b.z;return __stv0.KVV7();};Vqq0.angleBetween = function(v0,v1){let pa = v0.KVV7();let pb = v1.KVV7();__stv0.x = v0.x - v1.x;__stv0.y = v0.y - v1.y;__stv0.z = v0.z - v1.z;let pc = __stv0.KVV7();return Math.acos((pa + pb - pc)/ (2 * Math.sqrt(pa) * Math.sqrt(pb))) * Vjj2.MATH_180_OVER_PI;};Vqq0.radianBetween = function(v0,v1){let pa = v0.KVV7();let pb = v1.KVV7();__stv0.x = v0.x - v1.x;__stv0.y = v0.y - v1.y;__stv0.z = v0.z - v1.z;let pc = __stv0.KVV7();return Math.acos((pa + pb - pc)/ (2 * Math.sqrt(pa) * Math.sqrt(pb)));};const ___matrixInitRawData = new Float32Array([1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0]);class Vbb1 extends Float32Array {constructor() {super(___matrixInitRawData);this.pos = {x:0,y:0,z:0};this.KBB1 = "Vbb1";this.__free = true;};Kaa0(px, py, pz){this.pos.Kkkk3(px,py,pz);};Kaa1(){this.set(___matrixInitRawData,0);};Kaa2(){return (this[0] * this[5] - this[4] * this[1]) * (this[10] * this[15] - this[14] * this[11]) - (this[0] * this[9] - this[8] * this[1]) * (this[6] * this[15] - this[14] * this[7]) + (this[0] * this[13] - this[12] * this[1]) * (this[6] * this[11] - this[10] * this[7]) + (this[4] * this[9] - this[8] * this[5]) * (this[2] * this[15] - this[14] * this[3]) - (this[4] * this[13] - this[12] * this[5]) * (this[2] * this[11] - this[10] * this[3]) + (this[8] * this[13] - this[12] * this[9]) * (this[2] * this[7] - this[6] * this[3]);};Kaa3(lhs){let m111 = this[0];let m121 = this[4];let m131 = this[8];let m141 = this[12];let m112 = this[1];let m122 = this[5];let m132 = this[9];let m142 = this[13];let m113 = this[2];let m123 = this[6];let m133 = this[10];let m143 = this[14];let m114 = this[3];let m124 = this[7];let m134 = this[11];let m144 = this[15];let m211 = lhs[0];let m221 = lhs[4];let m231 = lhs[8];let m241 = lhs[12];let m212 = lhs[1];let m222 = lhs[5];let m232 = lhs[9];let m242 = lhs[13];let m213 = lhs[2];let m223 = lhs[6];let m233 = lhs[10];let m243 = lhs[14];let m214 = lhs[3];let m224 = lhs[7];let m234 = lhs[11];let m244 = lhs[15];this[0] = m111 * m211 + m112 * m221 + m113 * m231 + m114 * m241;this[1] = m111 * m212 + m112 * m222 + m113 * m232 + m114 * m242;this[2] = m111 * m213 + m112 * m223 + m113 * m233 + m114 * m243;this[3] = m111 * m214 + m112 * m224 + m113 * m234 + m114 * m244;this[4] = m121 * m211 + m122 * m221 + m123 * m231 + m124 * m241;this[5] = m121 * m212 + m122 * m222 + m123 * m232 + m124 * m242;this[6] = m121 * m213 + m122 * m223 + m123 * m233 + m124 * m243;this[7] = m121 * m214 + m122 * m224 + m123 * m234 + m124 * m244;this[8] = m131 * m211 + m132 * m221 + m133 * m231 + m134 * m241;this[9] = m131 * m212 + m132 * m222 + m133 * m232 + m134 * m242;this[10] = m131 * m213 + m132 * m223 + m133 * m233 + m134 * m243;this[11] = m131 * m214 + m132 * m224 + m133 * m234 + m134 * m244;this[12] = m141 * m211 + m142 * m221 + m143 * m231 + m144 * m241;this[13] = m141 * m212 + m142 * m222 + m143 * m232 + m144 * m242;this[14] = m141 * m213 + m142 * m223 + m143 * m233 + m144 * m243;this[15] = m141 * m214 + m142 * m224 + m143 * m234 + m144 * m244;};Kaa4(lhs){let m111 = this[0];let m121 = this[4];let m131 = this[8];let m112 = this[1];let m122 = this[5];let m132 = this[9];let m113 = this[2];let m123 = this[6];let m133 = this[10];let m211 = lhs[0];let m221 = lhs[4];let m231 = lhs[8];let m212 = lhs[1];let m222 = lhs[5];let m232 = lhs[9];let m213 = lhs[2];let m223 = lhs[6];let m233 = lhs[10];this[0] = m111 * m211 + m112 * m221 + m113 * m231;this[1] = m111 * m212 + m112 * m222 + m113 * m232;this[2] = m111 * m213 + m112 * m223 + m113 * m233;this[4] = m121 * m211 + m122 * m221 + m123 * m231;this[5] = m121 * m212 + m122 * m222 + m123 * m232;this[6] = m121 * m213 + m122 * m223 + m123 * m233;this[8] = m131 * m211 + m132 * m221 + m133 * m231;this[9] = m131 * m212 + m132 * m222 + m133 * m232;this[10] = m131 * m213 + m132 * m223 + m133 * m233;};Kaa5(radian, axis, pivotPoint){if(pivotPoint == undefined){pivotPoint = new Vqq0(0,0,0,1.0);};___sysTempMat3D.Kaa1();this.Kee5(axis.x, axis.y, axis.z, radian,___sysTempMat3D);___sysTempMat3D.Kbb4(pivotPoint.x, pivotPoint.y, pivotPoint.z);this.Kaa3(___sysTempMat3D);};Kaa6(radian, axis){___sysTempMat3D.Kaa1();this.Kee5(axis.x, axis.y, axis.z, radian, ___sysTempMat3D);this.Kaa3(___sysTempMat3D);};Kaa7(radian){this.Kee6(radian, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);};Kaa8(radian){this.Kee7(radian, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);};Kbb0(radian){this.Kee8(radian, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);};Kbb1(radianX, radianY, radianZ){this.Kee7(radianY, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);this.Kee6(radianX, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);this.Kee8(radianZ, ___sysTempMat3D);this.Kaa4(___sysTempMat3D);};Kbb2(xScale, yScale, zScale){this[0] *= xScale; this[1] *= xScale; this[2] *= xScale; this[3] *= xScale;this[4] *= yScale; this[5] *= yScale; this[6] *= yScale; this[7] *= yScale;this[8] *= zScale; this[9] *= zScale; this[10] *= zScale; this[11] *= zScale;};Kbb3(xScale, yScale){this[0] *= xScale; this[1] *= xScale; this[2] *= xScale; this[3] *= xScale;this[4] *= yScale; this[5] *= yScale; this[6] *= yScale; this[7] *= yScale;};Kbb4(x, y, z){;this[12] += x;;this[13] += y;;this[14] += z;};Kbb5(v3){;this[12] += v3.x;;this[13] += v3.y;;this[14] += v3.z;};Kbb6(column_index, vector3D){switch (column_index) {case 0:{this[0] = vector3D.x;this[1] = vector3D.y;this[2] = vector3D.z;this[3] = vector3D.w;};break;case 1:{this[4] = vector3D.x;this[5] = vector3D.y;this[6] = vector3D.z;this[7] = vector3D.w;};break;case 2:{this[8] = vector3D.x;this[9] = vector3D.y;this[10] = vector3D.z;this[11] = vector3D.w;};break;case 3:{this[12] = vector3D.x;this[13] = vector3D.y;this[14] = vector3D.z;this[15] = vector3D.w;};break;default:abort();break;};};Kbb7(column_index, vector3D){column_index <<= 2;vector3D.x = this[column_index];vector3D.y = this[1 + column_index];vector3D.z = this[2 + column_index];vector3D.w = this[3 + column_index];};Kbb8(mat_other){this.set(mat_other,0);};Kcc0(mat_other){mat_other.set(this,0);};Kcc1(float_rawDataArr,rawDataLength, index, bool_tp){if (bool_tp) this.Kee3();rawDataLength = rawDataLength - index;let _g = 0;let c = 0;while (_g < rawDataLength){c = _g;++_g;this[c] = float_rawDataArr[c + index];};if (bool_tp) transpose();};Kcc2(float_rawDataArr,rawDataLength, index, bool_tp){if (bool_tp) this.Kee3();let _g = 0;let c = 0;while (_g < rawDataLength){c = _g;++_g;float_rawDataArr[c + index] = this[c];};if (bool_tp) transpose();};Kcc3(row_index, vector3D){switch (row_index) {case 0:{this[0] = vector3D.x;this[4] = vector3D.y;this[8] = vector3D.z;this[12] = vector3D.w;};break;case 1:{this[1] = vector3D.x;this[5] = vector3D.y;this[9] = vector3D.z;this[13] = vector3D.w;};break;case 2:{this[2] = vector3D.x;this[6] = vector3D.y;this[10] = vector3D.z;this[14] = vector3D.w;};break;case 3:{this[3] = vector3D.x;this[7] = vector3D.y;this[11] = vector3D.z;this[15] = vector3D.w;};break;default:abort();break;};};Kcc4(row_index, vector3D){vector3D.x = this[row_index];vector3D.y = this[4 + row_index];vector3D.z = this[8 + row_index];vector3D.w = this[12 + row_index];};Kcc5(orientationStyle){let vec = [];m = ___sysTempMat3D;this.Kcc0(m);let mr = ___sysTempMat3D;mr.set(this,0);let pos = new Vqq0(mr[12], mr[13], mr[14]);let scale = new Vqq0();scale.x = Math.sqrt(mr[0] * mr[0] + mr[1] * mr[1] + mr[2] * mr[2]);scale.y = Math.sqrt(mr[4] * mr[4] + mr[5] * mr[5] + mr[6] * mr[6]);scale.z = Math.sqrt(mr[8] * mr[8] + mr[9] * mr[9] + mr[10] * mr[10]);if (mr[0] * (mr[5] * mr[10] - mr[6] * mr[9]) - mr[1] * (mr[4] * mr[10] - mr[6] * mr[8]) + mr[2] * (mr[4] * mr[9] - mr[5] * mr[8]) < 0) scale.z = -scale.z;mr[0] /= scale.x;mr[1] /= scale.x;mr[2] /= scale.x;mr[4] /= scale.y;mr[5] /= scale.y;mr[6] /= scale.y;mr[8] /= scale.z;mr[9] /= scale.z;mr[10] /= scale.z;let rot = new Vqq0();switch (orientationStyle) {case OrientationType.AXIS_ANGLE:{rot.w = safeACos((mr[0] + mr[5] + mr[10] - 1) / 2);let len = Math.sqrt((mr[6] - mr[9]) * (mr[6] - mr[9]) + (mr[8] - mr[2]) * (mr[8] - mr[2]) + (mr[1] - mr[4]) * (mr[1] - mr[4]));if (len > minFloatValue) {;rot.x = (mr[6] - mr[9]) / len;rot.y = (mr[8] - mr[2]) / len;rot.z = (mr[1] - mr[4]) / len;}else rot.x = rot.y = rot.z = 0;};break;case OrientationType.QUATERNION:{let tr = (mr[0] + mr[5] + mr[10]);if (tr > 0) {;rot.w = Math.sqrt(1 + tr) / 2;rot.x = (mr[6] - mr[9]) / (4 * rot.w);rot.y = (mr[8] - mr[2]) / (4 * rot.w);rot.z = (mr[1] - mr[4]) / (4 * rot.w);}else if (mr[0] > mr[5] && mr[0] > mr[10]) {rot.x = Math.sqrt(1 + mr[0] - mr[5] - mr[10]) / 2;rot.w = (mr[6] - mr[9]) / (4 * rot.x);rot.y = (mr[1] + mr[4]) / (4 * rot.x);rot.z = (mr[8] + mr[2]) / (4 * rot.x);}else if (mr[5] > mr[10]) {rot.y = Math.sqrt(1 + mr[5] - mr[0] - mr[10]) / 2;rot.x = (mr[1] + mr[4]) / (4 * rot.y);rot.w = (mr[8] - mr[2]) / (4 * rot.y);rot.z = (mr[6] + mr[9]) / (4 * rot.y);}else{rot.z = Math.sqrt(1 + mr[10] - mr[0] - mr[5]) / 2;rot.x = (mr[8] + mr[2]) / (4 * rot.z);rot.y = (mr[6] + mr[9]) / (4 * rot.z);rot.w = (mr[1] - mr[4]) / (4 * rot.z);};};break;case OrientationType.EULER_ANGLES:{rot.y = Math.asin(-mr[2]);if (mr[2] != 1 && mr[2] != -1) {;rot.x = Math.atan2(mr[6], mr[10]);rot.z = Math.atan2(mr[1], mr[0]);}else {rot.z = 0;rot.x = Math.atan2(mr[4], mr[5]);};};break;};vec.push(pos);vec.push(rot);vec.push(scale);mr = null;return vec;};deltaTransformVector(v3){let x = v3.x;let y = v3.y;let z = v3.z;return new Vqq0(x * this[0] + y * this[4] + z * this[8] + this[3], x * this[1] + y * this[5] + z * this[9] + this[7], x * this[2] + y * this[6] + z * this[10] + this[11], 0);};Kcc6(){let d = this.Kaa2();let invertable = Math.abs(d) > Vjj2.MATH_MIN_POSITIVE;if (invertable) {;d = 1.0 / d;let m11 = this[0];let m21 = this[4];let m31 = this[8];let m41 = this[12];let m12 = this[1];let m22 = this[5];let m32 = this[9];let m42 = this[13];let m13 = this[2];let m23 = this[6];let m33 = this[10];let m43 = this[14];let m14 = this[3];let m24 = this[7];let m34 = this[11];let m44 = this[15];this[0] = d * (m22 * (m33 * m44 - m43 * m34) - m32 * (m23 * m44 - m43 * m24) + m42 * (m23 * m34 - m33 * m24));this[1] = -d * (m12 * (m33 * m44 - m43 * m34) - m32 * (m13 * m44 - m43 * m14) + m42 * (m13 * m34 - m33 * m14));this[2] = d * (m12 * (m23 * m44 - m43 * m24) - m22 * (m13 * m44 - m43 * m14) + m42 * (m13 * m24 - m23 * m14));this[3] = -d * (m12 * (m23 * m34 - m33 * m24) - m22 * (m13 * m34 - m33 * m14) + m32 * (m13 * m24 - m23 * m14));this[4] = -d * (m21 * (m33 * m44 - m43 * m34) - m31 * (m23 * m44 - m43 * m24) + m41 * (m23 * m34 - m33 * m24));this[5] = d * (m11 * (m33 * m44 - m43 * m34) - m31 * (m13 * m44 - m43 * m14) + m41 * (m13 * m34 - m33 * m14));this[6] = -d * (m11 * (m23 * m44 - m43 * m24) - m21 * (m13 * m44 - m43 * m14) + m41 * (m13 * m24 - m23 * m14));this[7] = d * (m11 * (m23 * m34 - m33 * m24) - m21 * (m13 * m34 - m33 * m14) + m31 * (m13 * m24 - m23 * m14));this[8] = d * (m21 * (m32 * m44 - m42 * m34) - m31 * (m22 * m44 - m42 * m24) + m41 * (m22 * m34 - m32 * m24));this[9] = -d * (m11 * (m32 * m44 - m42 * m34) - m31 * (m12 * m44 - m42 * m14) + m41 * (m12 * m34 - m32 * m14));this[10] = d * (m11 * (m22 * m44 - m42 * m24) - m21 * (m12 * m44 - m42 * m14) + m41 * (m12 * m24 - m22 * m14));this[11] = -d * (m11 * (m22 * m34 - m32 * m24) - m21 * (m12 * m34 - m32 * m14) + m31 * (m12 * m24 - m22 * m14));this[12] = -d * (m21 * (m32 * m43 - m42 * m33) - m31 * (m22 * m43 - m42 * m23) + m41 * (m22 * m33 - m32 * m23));this[13] = d * (m11 * (m32 * m43 - m42 * m33) - m31 * (m12 * m43 - m42 * m13) + m41 * (m12 * m33 - m32 * m13));this[14] = -d * (m11 * (m22 * m43 - m42 * m23) - m21 * (m12 * m43 - m42 * m13) + m41 * (m12 * m23 - m22 * m13));this[15] = d * (m11 * (m22 * m33 - m32 * m23) - m21 * (m12 * m33 - m32 * m13) + m31 * (m12 * m23 - m22 * m13));};return invertable;};Kcc7(pos, at, up){if (at == null || at == undefined) at = new Vqq0(0.0, 0.0, -1.0);if (up == null || up == undefined) up = new Vqq0(0.0, -1.0, 0.0);let dir = at.Kqqq8(pos);let vup = new Vqq0(up.x,up.y,up.z);dir.Kww1();vup.Kww1();let dir2 = new Vqq0(dir.x,dir.y,dir.z);dir2.Kxxx5(vup.Kfff5(dir));vup.Kuuu1(dir2);if (vup.length() > minFloatValue) vup.Kww1();else if (dir.x != 0)vup.Kkkk3(-dir.y, dir.x, 0);else vup.Kkkk3(1, 0, 0);let right = vup.KCC2(dir);right.Kww1();m_rawData[0] = right.x;m_rawData[4] = right.y;m_rawData[8] = right.z;m_rawData[12] = 0.0;m_rawData[1] = vup.x;m_rawData[5] = vup.y;m_rawData[9] = vup.z;m_rawData[13] = 0.0;m_rawData[2] = dir.x;m_rawData[6] = dir.y;m_rawData[10] = dir.z;m_rawData[14] = 0.0;m_rawData[3] = pos.x;m_rawData[7] = pos.y;m_rawData[11] = pos.z;m_rawData[15] = 1.0;};Kcc8(rhs){let m111 = rhs[0];let m121 = rhs[4];let m131 = rhs[8];let m141 = rhs[12];let m112 = rhs[1];let m122 = rhs[5];let m132 = rhs[9];let m142 = rhs[13];let m113 = rhs[2];let m123 = rhs[6];let m133 = rhs[10];let m143 = rhs[14];let m114 = rhs[3];let m124 = rhs[7];let m134 = rhs[11];let m144 = rhs[15];let m211 = this[0];let m221 = this[4];let m231 = this[8];let m241 = this[12];let m212 = this[1];let m222 = this[5];let m232 = this[9];let m242 = this[13];let m213 = this[2];let m223 = this[6];let m233 = this[10];let m243 = this[14];let m214 = this[3];let m224 = this[7];let m234 = this[11];let m244 = this[15];this[0] = m111 * m211 + m112 * m221 + m113 * m231 + m114 * m241;this[1] = m111 * m212 + m112 * m222 + m113 * m232 + m114 * m242;this[2] = m111 * m213 + m112 * m223 + m113 * m233 + m114 * m243;this[3] = m111 * m214 + m112 * m224 + m113 * m234 + m114 * m244;this[4] = m121 * m211 + m122 * m221 + m123 * m231 + m124 * m241;this[5] = m121 * m212 + m122 * m222 + m123 * m232 + m124 * m242;this[6] = m121 * m213 + m122 * m223 + m123 * m233 + m124 * m243;this[7] = m121 * m214 + m122 * m224 + m123 * m234 + m124 * m244;this[8] = m131 * m211 + m132 * m221 + m133 * m231 + m134 * m241;this[9] = m131 * m212 + m132 * m222 + m133 * m232 + m134 * m242;this[10] = m131 * m213 + m132 * m223 + m133 * m233 + m134 * m243;this[11] = m131 * m214 + m132 * m224 + m133 * m234 + m134 * m244;this[12] = m141 * m211 + m142 * m221 + m143 * m231 + m144 * m241;this[13] = m141 * m212 + m142 * m222 + m143 * m232 + m144 * m242;this[14] = m141 * m213 + m142 * m223 + m143 * m233 + m144 * m243;this[15] = m141 * m214 + m142 * m224 + m143 * m234 + m144 * m244;};Kdd0(rhs){let m111 = rhs[0];let m121 = rhs[4];let m131 = rhs[8];let m112 = rhs[1];let m122 = rhs[5];let m132 = rhs[9];let m113 = rhs[2];let m123 = rhs[6];let m133 = rhs[10];let m211 = this[0];let m221 = this[4];let m231 = this[8];let m212 = this[1];let m222 = this[5];let m232 = this[9];let m213 = this[2];let m223 = this[6];let m233 = this[10];this[0] = m111 * m211 + m112 * m221 + m113 * m231;this[1] = m111 * m212 + m112 * m222 + m113 * m232;this[2] = m111 * m213 + m112 * m223 + m113 * m233;this[4] = m121 * m211 + m122 * m221 + m123 * m231;this[5] = m121 * m212 + m122 * m222 + m123 * m232;this[6] = m121 * m213 + m122 * m223 + m123 * m233;this[8] = m131 * m211 + m132 * m221 + m133 * m231;this[9] = m131 * m212 + m132 * m222 + m133 * m232;this[10] = m131 * m213 + m132 * m223 + m133 * m233;};Kdd1(radian, axis, pivotPoint){___sysTempMat3D.Kaa1();this.Kee5(axis.x, axis.y, axis.z, radian,___sysTempMat3D);___sysTempMat3D.Kbb4(pivotPoint.x, pivotPoint.y, pivotPoint.z);this.Kcc8(___sysTempMat3D);};Kdd2(radian, axis){___sysTempMat3D.Kaa1();this.Kee5(axis.x, axis.y, axis.z, radian, ___sysTempMat3D);this.Kcc8(___sysTempMat3D);};Kdd3(radian){this.Kee6(radian, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);};Kdd4(radian){this.Kee7(radian, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);};Kdd5(radian){this.Kee8(radian, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);};Kdd6(radianX, radianY, radianZ){this.Kee7(radianY, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);this.Kee6(radianX, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);this.Kee8(radianZ, ___sysTempMat3D);this.Kdd0(___sysTempMat3D);};Kdd7(xScale, yScale, zScale){this[0] *= xScale; this[1] *= yScale; this[2] *= zScale;this[4] *= xScale; this[5] *= yScale; this[6] *= zScale;this[8] *= xScale; this[9] *= yScale; this[10] *= zScale;this[12] *= xScale; this[13] *= yScale; this[14] *= zScale;};Kdd8(xScale, yScale){this[0] *= xScale; this[1] *= yScale;this[4] *= xScale; this[5] *= yScale;this[8] *= xScale; this[9] *= yScale;this[12] *= xScale; this[13] *= yScale;};Kee0(px, py, pz){___sysTempMat3D.Kaa1();___sysTempMat3D.Kaa0(px, py, pz);this.Kcc8(___sysTempMat3D);};Kee1(v3){___sysTempMat3D.Kaa1();___sysTempMat3D.Kaa0(v3.x, v3.y, v3.z);this.Kcc8(___sysTempMat3D);};Kee2(components, orientationStyle){if (components.length < 3 || components[2].x == 0 || components[2].y == 0 || components[2].z == 0) return false;this.Kaa1();let scale = ___sysTempMat3D;scale[0] = scale[1] = scale[2] = components[2].x;scale[4] = scale[5] = scale[6] = components[2].y;scale[8] = scale[9] = scale[10] = components[2].z;switch (orientationStyle) {case OrientationType.EULER_ANGLES:{let cx = Math.cos(components[1].x);let cy = Math.cos(components[1].y);let cz = Math.cos(components[1].z);let sx = Math.sin(components[1].x);let sy = Math.sin(components[1].y);let sz = Math.sin(components[1].z);this[0] = cy * cz * scale[0];this[1] = cy * sz * scale[1];this[2] = -sy * scale[2];this[3] = 0;this[4] = (sx * sy * cz - cx * sz) * scale[4];this[5] = (sx * sy * sz + cx * cz) * scale[5];this[6] = sx * cy * scale[6];this[7] = 0;this[8] = (cx * sy * cz + sx * sz) * scale[8];this[9] = (cx * sy * sz - sx * cz) * scale[9];this[10] = cx * cy * scale[10];this[11] = 0;this[12] = components[0].x;this[13] = components[0].y;this[14] = components[0].z;this[15] = 1;};break;default:{let x = components[1].x;let y = components[1].y;let z = components[1].z;let w = components[1].w;if (orientationStyle == OrientationType.AXIS_ANGLE) {;let halfW = 0.5 * w;x *= Math.sin(halfW);y *= Math.sin(halfW);z *= Math.sin(halfW);w = Math.cos(halfW);};this[0] = (1 - 2 * y * y - 2 * z * z) * scale[0];this[1] = (2 * x * y + 2 * w * z) * scale[1];this[2] = (2 * x * z - 2 * w * y) * scale[2];this[3] = 0;this[4] = (2 * x * y - 2 * w * z) * scale[4];this[5] = (1 - 2 * x * x - 2 * z * z) * scale[5];this[6] = (2 * y * z + 2 * w * x) * scale[6];this[7] = 0;this[8] = (2 * x * z + 2 * w * y) * scale[8];this[9] = (2 * y * z - 2 * w * x) * scale[9];this[10] = (1 - 2 * x * x - 2 * y * y) * scale[10];this[11] = 0;this[12] = components[0].x;this[13] = components[0].y;this[14] = components[0].z;this[15] = 1;};break;};if (components[2].x == 0) this[0] = 0;if (components[2].y == 0) this[5] = 0;if (components[2].z == 0) this[10] = 0;scale = null;return !(components[2].x == 0 || components[2].y == 0 || components[2].y == 0);};transformVector(v3){let x = v3.x;let y = v3.y;let z = v3.z;return new Vqq0(x * this[0] + y * this[4] + z * this[8] + this[12], x * this[1] + y * this[5] + z * this[9] + this[13], x * this[2] + y * this[6] + z * this[10] + this[14], x * this[3] + y * this[7] + z * this[11] + this[15]);};transformOutVector(v3, out_v3){let x = v3.x;let y = v3.y;let z = v3.z;out_v3.Kkkk3(x * this[0] + y * this[4] + z * this[8] + this[12], x * this[1] + y * this[5] + z * this[9] + this[13], x * this[2] + y * this[6] + z * this[10] + this[14], x * this[3] + y * this[7] + z * this[11] + this[15]);};transformVectorSelf(v3){let x = v3.x;let y = v3.y;let z = v3.z;v3.Kkkk3(x * this[0] + y * this[4] + z * this[8] + this[12],x * this[1] + y * this[5] + z * this[9] + this[13],x * this[2] + y * this[6] + z * this[10] + this[14],x * this[3] + y * this[7] + z * this[11] + this[15]);};transformVectorSelf4(v3){let x = v3.x;let y = v3.y;let z = v3.z;let w = v3.w;v3.Kkkk3(x * this[0] + y * this[4] + z * this[8] + w * this[12],x * this[1] + y * this[5] + z * this[9] + w * this[13],x * this[2] + y * this[6] + z * this[10] + w * this[14],x * this[3] + y * this[7] + z * this[11] + w * this[15]);};transformVectors(float_vinArr, vinLength, float_voutArr){let i = 0;let x, y, z;while ((i + 3) <= vinLength) {x = float_vinArr[i];y = float_vinArr[i + 1];z = float_vinArr[i + 2];float_voutArr[i] = x * this[0] + y * this[4] + z * this[8] + this[12];float_voutArr[i + 1] = x * this[1] + y * this[5] + z * this[9] + this[13];float_voutArr[i + 2] = x * this[2] + y * this[6] + z * this[10] + this[14];;i += 3;};};Kee3(){___sysTempMat3D.set(this, 0);this[1] = ___sysTempMat3D[4];this[2] = ___sysTempMat3D[8];this[3] = ___sysTempMat3D[12];this[4] = ___sysTempMat3D[1];this[6] = ___sysTempMat3D[9];this[7] = ___sysTempMat3D[13];this[8] = ___sysTempMat3D[2];this[9] = ___sysTempMat3D[6];this[11] = ___sysTempMat3D[14];this[12] = ___sysTempMat3D[3];this[13] = ___sysTempMat3D[7];this[14] = ___sysTempMat3D[11];};Kee4(toMat, float_percent){let _g = 0;let i = 0;while (_g < 16){i = _g;++_g;this[i] = this[i] + (toMat[i] - this[i]) * float_percent;};};Kee5(x, y, z, radian, target){radian= -radian;let  s = Math.sin(radian), c = Math.cos(radian);let  t = 1.0 - c;target[0] = c + x * x * t;target[5] = c + y * y * t;target[10] = c + z * z * t;let tmp1 = x * y * t;let tmp2 = z * s;target[4] = tmp1 + tmp2;target[1] = tmp1 - tmp2;tmp1 = x * z * t;tmp2 = y * s;target[8] = tmp1 - tmp2;target[2] = tmp1 + tmp2;tmp1 = y * z * t;tmp2 = x * s;target[9] = tmp1 + tmp2;target[6] = tmp1 - tmp2;};Kee6(radian, target){let s = Math.sin(radian), c = Math.cos(radian);target[0] = 1.0; target[1] = 0.0; target[2] = 0.0;target[4] = 0.0; target[5] = c; target[6] = s;target[8] = 0.0; target[9] = -s; target[10] = c;};Kee7(radian, target){let s = Math.sin(radian), c = Math.cos(radian);target[0] = c; target[1] = 0.0; target[2] = -s;target[4] = 0.0; target[5] = 1.0; target[6] = 0.0;target[8] = s; target[9] = 0.0; target[10] = c;};Kee8(radian, target){let s = Math.sin(radian), c = Math.cos(radian);target[0] = c; target[1] = s; target[2] = 0.0;target[4] = -s; target[5] = c; target[6] = 0.0;target[8] = 0.0; target[9] = 0.0; target[10] = 1.0;};Kff0(){let str = "\n"+this[0]+","+this[1]+","+this[2]+","+this[3]+"\n";;str += this[4]+","+this[5]+","+this[6]+","+this[7]+"\n";;str += this[8]+","+this[9]+","+this[10]+","+this[11]+"\n";;str += this[12]+","+this[13]+","+this[14]+","+this[15]+"\n";return str;};Kff1(fovy, aspect, zNear, zFar){let tanHalfFovy = Math.tan(fovy * 0.5);this.Kaa1();this[0] = 1.0/(aspect * tanHalfFovy);this[5] = 1.0 / tanHalfFovy;this[10] = -(zFar + zNear) / (zFar - zNear);this[11] = -1.0;this[14] = -(2.0 * zFar * zNear) / (zFar - zNear);};Kff2(fovy, pw,ph, zNear, zFar){let focalLength = pw / Math.tan(fovy * 0.5);let m0 = focalLength / pw;let m5 = focalLength / ph;let m10 = -zFar / (zFar - zNear);let m14 = -zNear * m10;this.Kaa1();this[0] = m0;this[5] = m5;this[10] = m10;this[11] = -1.0;this[14] = m14;};Kff3(b, t, l, r, zNear, zFar){this.Kaa1();this[0] = 2.0/(r-l);this[5] = 2.0/(t-b);this[10] = -2.0 / (zFar - zNear);this[12] = -(r + l) / (r - l);this[13] = -(t + b) / (t - b);this[14] = -(zFar + zNear) / (zFar - zNear);this[15] = 1.0;};Kff4(fovy, aspect, zNear, zFar){let tanHalfFovy = Math.tan(fovy * 0.5);this.Kaa1();this[0] = 1.0 / (aspect * tanHalfFovy);this[5] = 1.0 / tanHalfFovy;this[10] = (zFar + zNear) / (zFar - zNear);this[11] = 1.0;this[14] = (2.0 * zFar * zNear) / (zFar - zNear);};Kff5(b, t, l, r, zNear, zFar){this.Kaa1();this[0] = 2.0 / (r - l);this[5] = 2.0 / (t - b);this[10] = 2.0 / (zFar - zNear);this[12] = -(r + l) / (r - l);this[13] = -(t + b) / (t - b);this[14] = -(zFar + zNear) / (zFar - zNear);this[15] = 1.0;};Kff6(eye, center, up){this.Kaa1();let f = center.Kqqq8(eye);f.Kww1();let s = f.KCC2(up);s.Kww1();let u = s.KCC2(f);s.w = -s.Kfff5(eye);u.w = -u.Kfff5(eye);f.w = f.Kfff5(eye);f.Ksss6();this.Kcc3(0, s);this.Kcc3(1, u);this.Kcc3(2, f);};Kff7(eye, center, up){this.Kaa1();let f = center.Kqqq8(eye);f.Kww1();let s = f.KCC2(up);s.Kww1();let u = s.KCC2(f);s.w = -s.Kfff5(eye);u.w = -u.Kfff5(eye);f.w = -f.Kfff5(eye);this.Kcc3(0, s);this.Kcc3(1, u);this.Kcc3(2, f);};};let ___sysTempMat3D = new Vbb1();function Vpp6(){};Vpp6.___matList = [];Vpp6.getMatrix = function(){let mat = null;if(Vpp6.___matList.length > 0){mat = Vpp6.___matList.pop();mat.__free = false;return mat;};mat = new Vbb1();mat.__free = false;return mat;};Vpp6.retrieveMatrix = function(mat){if(!mat.__free){Vpp6.___matList.push(mat);mat.__free = true;};};let __cgeom_t0V = new Vqq0();let __cgeom_t1V = new Vqq0();let __cgeom_t2V = new Vqq0();function Vff7(){this.id = -1;this.Kaa0 = new Vqq0();this.Kzzz6 = null;this.Kmmm3 = null;};function Vhh5(){Vff7.call(this);this.tv = new Vqq0(1.0,0.0,0.0);this.Kzzz6 = function(){this.tv.Kww1();};this.Kmmm3 = function(){this.tv.Kww1();};};function Vhh2(){Vff7.call(this);this.tv = new Vqq0(1.0,0.0,0.0);this.Kzzz6 = function(){this.tv.Kww1();};this.Kmmm3 = function(){this.tv.Kww1();};};Vhh2._tAv = new Vqq0();Vhh2.calcPVSqrtDis2 = function(sltv,slpv,poV){Vhh2._tAv.x = poV.x - slpv.x;Vhh2._tAv.y = poV.y - slpv.y;Vhh2._tAv.z = poV.z - slpv.z;let da = Vhh2._tAv.Kfff5(sltv);Vhh2._tAv.x = da * sltv.x + slpv.x;Vhh2._tAv.y = da * sltv.y + slpv.y;Vhh2._tAv.z = da * sltv.z + slpv.z;Vhh2._tAv.x = poV.x - Vhh2._tAv.x;Vhh2._tAv.y = poV.y - Vhh2._tAv.y;Vhh2._tAv.z = poV.z - Vhh2._tAv.z;return Vhh2._tAv.KVV7();};Vhh2.intersectionCopSLV2 = function(lapv, latv, lbpv, lbtv, outV){Vqq0.cross(latv, lbtv, __cgeom_t1V);Vqq0.cross(latv, __cgeom_t1V, __cgeom_t2V);__cgeom_t2V.Kww1();Vbb7.intersectionSLV2(__cgeom_t2V, __cgeom_t2V.Kfff5(lapv), lbpv, lbtv, outV);};function Vbb6(){Vff7.call(this);this.Kzz8 = 2500.0;this.tv = new Vqq0(1.0,0.0,0.0);this.Kiii6 = new Vqq0(50.0,0.0,0.0);this.Kttt5 = new Vqq0(100, 0.0, 0.0);this.length = 100.0;this.Knnn8 = function(lsbpv, lsbtv, outV){Vqq0.cross(this.tv, lsbtv, __cgeom_t1V);Vqq0.cross(this.tv, __cgeom_t1V, __cgeom_t2V);__cgeom_t2V.Kww1();Vbb7.intersectionSLV2(__cgeom_t2V, __cgeom_t2V.Kfff5(this.Kaa0), lsbpv, lsbtv, outV);__cgeom_t2V.x = outV.x - this.Kaa0.x;__cgeom_t2V.y = outV.y - this.Kaa0.y;__cgeom_t2V.z = outV.z - this.Kaa0.z;let dis = __cgeom_t2V.Kfff5(this.tv);if(dis < 0.0) outV.Kbb8(this.Kaa0);else if(dis > this.length) outV.Kbb8(this.Kttt5);};this.Kzzz6 = function(){this.tv.x = this.Kttt5.x - this.Kaa0.x;this.tv.y = this.Kttt5.y - this.Kaa0.y;this.tv.z = this.Kttt5.z - this.Kaa0.z;this.length = this.tv.length();this.tv.x *= 0.5;this.tv.y *= 0.5;this.tv.z *= 0.5;this.Kiii6.x = this.Kaa0.x + this.tv.x;this.Kiii6.y = this.Kaa0.y + this.tv.y;this.Kiii6.z = this.Kaa0.z + this.tv.z;this.Kzz8 = this.tv.KVV7();this.tv.Kww1();};this.Kmmm3 = function(){this.Kzzz6();};};function Vqq2(){Vff7.call(this);this.KUU3 = 100.0;this.Kzzz6 = function(){};this.Kmmm3 = function(){};};function Vbb7(){Vff7.call(this);this.nv = new Vqq0(0.0,1.0,0.0);this.KRR8 = 0.0;this.Knnn2 = function(straightL, outV){let td = this.nv.Kfff5(straightL.tv);if (td > Vjj2.MATH_MIN_POSITIVE || td < Vjj2.MATH_MAX_NEGATIVE){let dis = this.nv.Kfff5(straightL.Kaa0) - this.KRR8;outV.x = straightL.tv.x * 100000.0 + straightL.Kaa0.x;outV.y = straightL.tv.y * 100000.0 + straightL.Kaa0.y;outV.z = straightL.tv.z * 100000.0 + straightL.Kaa0.z;td = this.nv.Kfff5(outV) - this.KRR8;td = dis / (dis - td);outV.Kuuu1(straightL.Kaa0);outV.Kxxx5(td);outV.Kxxx3(straightL.Kaa0);return 1;};td = this.nv.Kfff5(straightL.Kaa0) - this.KRR8;if (td <= Vjj2.MATH_MIN_POSITIVE || td >= Vjj2.MATH_MAX_NEGATIVE){outV.Kbb8(straightL.Kaa0);return 2;};return 0;};this.KQQ6 = function(sl_pos, sl_tv, outV){let td = this.nv.Kfff5(sl_tv);if (td > Vjj2.MATH_MIN_POSITIVE || td < Vjj2.MATH_MAX_NEGATIVE){let dis = this.nv.Kfff5(sl_pos) - this.KRR8;outV.x = sl_tv.x * 100000.0 + sl_pos.x;outV.y = sl_tv.y * 100000.0 + sl_pos.y;outV.z = sl_tv.z * 100000.0 + sl_pos.z;td = this.nv.Kfff5(outV) - this.KRR8;td = dis / (dis - td);outV.Kuuu1(sl_pos);outV.Kxxx5(td);outV.Kxxx3(sl_pos);return 1;};td = this.nv.Kfff5(sl_pos) - this.KRR8;if (td <= Vjj2.MATH_MIN_POSITIVE || td >= Vjj2.MATH_MAX_NEGATIVE){outV.Kbb8(sl_pos);return 2;};return 0;};this.Kww7 = function(radL, outV){let dis = this.nv.Kfff5(radL.Kaa0) - this.KRR8;if (dis > Vjj2.MATH_MIN_POSITIVE) {;let td = this.nv.Kfff5(radL.tv);if (td < 0.0) {;return this.KQQ6(radL.Kaa0, radL.tv, outV);};}else if(dis < Vjj2.MATH_MAX_NEGATIVE){let td2 = this.nv.Kfff5(radL.tv);if (td2 > 0.0) {;return this.KQQ6(radL.Kaa0, radL.tv, outV);};}else {let td3 = this.nv.Kfff5(radL.tv);if (td3 > Vjj2.MATH_MIN_POSITIVE || td3 < Vjj2.MATH_MAX_NEGATIVE){outV.Kbb8(radL.Kaa0);return 1;};outV.Kbb8(radL.Kaa0);return 2;};return -1;};this.KJJ2 = function(rl_pos, rl_tv, outV){let dis = this.nv.Kfff5(rl_pos) - this.KRR8;if (dis > Vjj2.MATH_MIN_POSITIVE) {;let td = this.nv.Kfff5(rl_tv);if (td < 0.0){return this.KQQ6(rl_pos, rl_tv, outV);};}else if (dis < Vjj2.MATH_MAX_NEGATIVE){let td = this.nv.Kfff5(rl_tv);if (td > 0.0){return this.KQQ6(rl_pos, rl_tv, outV);};}else {let td3 = this.nv.Kfff5(rl_tv);if (td3 > Vjj2.MATH_MIN_POSITIVE || td3 < Vjj2.MATH_MAX_NEGATIVE){outV.Kbb8(rl_pos);return 1;};outV.Kbb8(rl_pos);return 2;};return -1;};this.Kjjj2 = function(pos){let f = this.nv.Kfff5(pos) - this.KRR8;if (f > Vjj2.MATH_MIN_POSITIVE){return 1;}else if(f < Vjj2.MATH_MAX_NEGATIVE){return -1;};return 0;};this.Kmmm4 = false;this.Kzz3 = function(cv,radius){this.Kmmm4 = false;let f = this.nv.Kfff5(cv) - this.KRR8;if (f > Vjj2.MATH_MIN_POSITIVE){this.Kmmm4 = f <= radius;return 1;}else if(f < Vjj2.MATH_MAX_NEGATIVE){this.Kmmm4 = -f <= radius;return -1;};return 0;};this.Kzzz6 = function(){};this.Kmmm3 = function(){this.nv.Kww1();};};Vbb7.calcPVCloseV = function(plane, posV, outV){let value = plane.KRR8 - posV.Kfff5( plane.nv );outV.Kkkk3(value * plane.nv.x, value * plane.nv.y, value * plane.nv.z);outV.Khh4(posV);};Vbb7.calcPVCloseV2 = function(pnv, pd, posV, outV){let value = pd - posV.Kfff5( pnv );outV.Kkkk3(value * pnv.x, value * pnv.y, value * pnv.z);outV.Khh4(posV);};Vbb7.intersectionSLV2 = function(planeNV, planeDis, sl_pos, sl_tv, outV){let td = planeNV.Kfff5(sl_tv);if (td > Vjj2.MATH_MIN_POSITIVE || td < Vjj2.MATH_MAX_NEGATIVE){let dis = planeNV.Kfff5(sl_pos) - planeDis;outV.x = sl_tv.x * 100000.0 + sl_pos.x;outV.y = sl_tv.y * 100000.0 + sl_pos.y;outV.z = sl_tv.z * 100000.0 + sl_pos.z;td = planeNV.Kfff5(outV) - planeDis;td = dis / (dis - td);outV.Kuuu1(sl_pos);outV.Kxxx5(td);outV.Kxxx3(sl_pos);return 1;};td = planeNV.Kfff5(sl_pos) - planeDis;if (td <= Vjj2.MATH_MIN_POSITIVE || td >= Vjj2.MATH_MAX_NEGATIVE){outV.Kbb8(sl_pos);return 2;};return 0;};function Vpp3(){Vbb7.call(this);this.v0 = new Vqq0(100.0,0,0);this.v1 = new Vqq0(0,0,-100.0);this.v2 = new Vqq0(0,0,0);this.Kjjj8 = new Vbb6();this.KOO0 = new Vbb6();this.KFF8 = new Vbb6();this.Kzz8 = 100.0;this.Kxxx4 = function(outV){let dis = this.Kjjj8.length * Math.random();outV.x = this.Kjjj8.Kaa0.x + dis * this.Kjjj8.tv.x;outV.y = this.Kjjj8.Kaa0.y + dis * this.Kjjj8.tv.y;outV.z = this.Kjjj8.Kaa0.z + dis * this.Kjjj8.tv.z;dis = this.KOO0.length * Math.random();;outV.x += this.KOO0.Kaa0.x + dis * this.KOO0.tv.x;;outV.y += this.KOO0.Kaa0.y + dis * this.KOO0.tv.y;;outV.z += this.KOO0.Kaa0.z + dis * this.KOO0.tv.z;dis = this.KFF8.length * Math.random();;outV.x += this.KFF8.Kaa0.x + dis * this.KFF8.tv.x;;outV.y += this.KFF8.Kaa0.y + dis * this.KFF8.tv.y;;outV.z += this.KFF8.Kaa0.z + dis * this.KFF8.tv.z;outV.x *= 0.33333;outV.y *= 0.33333;outV.z *= 0.33333;};this.KOO6 = function(sL, outV){let flag = this.Knnn2(sL, outV);if (flag == 1) {;flag = this.Kaaa1(outV);if (flag > 0)return 1;}else if (flag == 2){};return -1;};this.KJJ7 = function(radL, outV){let flag = this.Kww7(radL, outV);if (flag == 1) {;flag = this.Kaaa1(outV);if (flag > 0)return 1;}else if (flag == 2){};return -1;};this.KTT0 = function(sl_pos, sl_tv, outV){let flag = this.KQQ6(sl_pos, sl_tv, outV);if (flag == 1) {;flag = this.Kaaa1(outV);if (flag > 0)return 1;}else if (flag == 2){};return -1;};this.Kyy0 = function(rl_pos, rl_tv, outV){let flag = this.KQQ6(rl_pos, rl_tv, outV);if (flag == 1) {;flag = this.Kaaa1(outV);if (flag > 0)return 1;}else if (flag == 2){};return -1;};this.Kaaa1 = function(pos){let f = this.nv.Kfff5(pos) - this.KRR8;if (f > Vjj2.MATH_MIN_POSITIVE || f < Vjj2.MATH_MAX_NEGATIVE){return -1;};__cgeom_t0V.x = pos.x - this.v0.x;__cgeom_t0V.y = pos.y - this.v0.y;__cgeom_t0V.z = pos.z - this.v0.z;Vqq0.cross(this.Kjjj8.tv, __cgeom_t0V, __cgeom_t1V);if (this.nv.Kfff5(__cgeom_t1V) < 0){return -1;};__cgeom_t0V.x = pos.x - this.v1.x;__cgeom_t0V.y = pos.y - this.v1.y;__cgeom_t0V.z = pos.z - this.v1.z;Vqq0.cross(this.KOO0.tv, __cgeom_t0V, __cgeom_t1V);if (this.nv.Kfff5(__cgeom_t1V) < 0){return -1;};__cgeom_t0V.x = pos.x - this.v2.x;__cgeom_t0V.y = pos.y - this.v2.y;__cgeom_t0V.z = pos.z - this.v2.z;Vqq0.cross(this.KFF8.tv, __cgeom_t0V, __cgeom_t1V);if (this.nv.Kfff5(__cgeom_t1V) < 0){return -1;};return 1;};this.Kzzz6 = function(){let k = 1.0 / 3.0;this.Kaa0.x = k * (this.v0.x + this.v1.x + this.v2.x);this.Kaa0.y = k * (this.v0.y + this.v1.y + this.v2.y);this.Kaa0.z = k * (this.v0.z + this.v1.z + this.v2.z);this.nv.x = this.Kaa0.x - this.v0.x;this.nv.y = this.Kaa0.y - this.v0.y;this.nv.z = this.Kaa0.z - this.v0.z;this.Kzz8 = this.nv.KVV7();this.Kjjj8.Kaa0.Kbb8(this.v0);this.Kjjj8.Kttt5.Kbb8(this.v1);this.KOO0.Kaa0.Kbb8(this.v1);this.KOO0.Kttt5.Kbb8(this.v2);this.KFF8.Kaa0.Kbb8(this.v2);this.KFF8.Kttt5.Kbb8(this.v0);this.Kjjj8.Kzzz6();this.KOO0.Kzzz6();this.KFF8.Kzzz6();Vqq0.cross(this.Kjjj8.tv, this.KOO0.tv, this.nv);this.nv.Kww1();this.KRR8 = this.nv.Kfff5(this.v0);};this.Kmmm3 = function(){this.Kzzz6();};};function Voo7(){this.min = new Vqq0(Vjj2.MATH_MAX_POSITIVE, Vjj2.MATH_MAX_POSITIVE, Vjj2.MATH_MAX_POSITIVE);this.max = new Vqq0(Vjj2.MATH_MIN_NEGATIVE, Vjj2.MATH_MIN_NEGATIVE, Vjj2.MATH_MIN_NEGATIVE);let m_center = new Vqq0(0.0, 0.0, 0.0);let m_ocenter = new Vqq0(0.0, 0.0, 0.0);let m_long = 100.0;let m_width = 100.0;let m_height = 100.0;let m_halfLong = 50.0;let m_halfWidth = 50.0;let m_halfHeight = 50.0;let m_radius = 87;let m_radius2 = 7500;let m_tempV = new Vqq0();this.Kmm4 = function(centerV,radius){m_tempV.x = m_center.x - centerV.x;m_tempV.y = m_center.y - centerV.y;m_tempV.z = m_center.z - centerV.z;let dis = m_tempV.KVV7();if(dis < m_radius2){return true;};;radius += m_radius;radius *= radius;return radius >= dis;};this.KJJ0 = function(){return m_center;};this.KAA8 = function(){return m_ocenter;};this.Kzzz8 = function(px,py,pz){m_center.x = m_ocenter.x + px;m_center.y = m_ocenter.y + py;m_center.z = m_ocenter.z + pz;this.max.x = m_center.x + m_halfWidth;this.max.y = m_center.y + m_halfHeight;this.max.z = m_center.z + m_halfLong;this.min.x = m_center.x - m_halfWidth;this.min.y = m_center.y - m_halfHeight;this.min.z = m_center.z - m_halfLong;};this.KDD4 = function(){return m_radius;};this.Knnn4 = function(r){m_radius = r;};this.KII3 = function(){return m_radius2;};this.KRR5 = function(r2){m_radius2 = r2;};this.KXX4 = function(px,py,pz){if (this.min.x > px) this.min.x = px;if (this.min.y > py) this.min.y = py;if (this.min.z > pz) this.min.z = pz;if (this.max.x < px) this.max.x = px;if (this.max.y < py) this.max.y = py;if (this.max.z < pz) this.max.z = pz;};this.Kccc1 = function(width,height,long){m_width = width;m_height = height;m_long = long;m_halfLong = 0.5 * m_long;m_halfWidth = 0.5 * m_width;m_halfHeight = 0.5 * m_height;this.max.x = m_center.x + m_halfWidth;this.max.y = m_center.y + m_halfHeight;this.max.z = m_center.z + m_halfLong;this.min.x = m_center.x - m_halfWidth;this.min.y = m_center.y - m_halfHeight;this.min.z = m_center.z - m_halfLong;m_radius2 = m_halfWidth * m_halfWidth + m_halfHeight * m_halfHeight + m_halfLong * m_halfLong;m_radius = Math.sqrt(m_radius2);};this.KEE3 = function(pv){if (this.min.x > pv.x) this.min.x = pv.x;if (this.min.y > pv.y) this.min.y = pv.y;if (this.min.z > pv.z) this.min.z = pv.z;if (this.max.x < pv.x) this.max.x = pv.x;if (this.max.y < pv.y) this.max.y = pv.y;if (this.max.z < pv.z) this.max.z = pv.z;};this.KXX4 = function(pvx,pvy,pvz){if (this.min.x > pvx) this.min.x = pvx;if (this.min.y > pvy) this.min.y = pvy;if (this.min.z > pvz) this.min.z = pvz;if (this.max.x < pvx) this.max.x = pvx;if (this.max.y < pvy) this.max.y = pvy;if (this.max.z < pvz) this.max.z = pvz;};this.Kvv4 = function(vs){let len = vs.length;let pvx = 0.0;let pvy = 0.0;let pvz = 0.0;for(let i = 0; i < len;){pvx = vs[i];++i;pvy = vs[i];++i;pvz = vs[i];++i;if (this.min.x > pvx) this.min.x = pvx;if (this.min.y > pvy) this.min.y = pvy;if (this.min.z > pvz) this.min.z = pvz;if (this.max.x < pvx) this.max.x = pvx;if (this.max.y < pvy) this.max.y = pvy;if (this.max.z < pvz) this.max.z = pvz;};};this.KBB7 = function(v){if (v.x < this.min.x || v.x > this.max.x) return false;if (v.y < this.min.y || v.y > this.max.y) return false;if (v.z < this.min.z || v.z > this.max.z) return false;return true;};this.Khhh2 = function(vx,vy){if (vx < this.min.x || vx > this.max.x) return false;if (vy < this.min.y || vy > this.max.y) return false;return true;};this.Khhh3 = function(vx,vz){if (vx < this.min.x || vx > this.max.x) return false;if (vz < this.min.z || vz > this.max.z) return false;return true;};this.KGG4 = function(vy,vz){if (vy < this.min.y || vy > this.max.y) return false;if (vz < this.min.z || vz > this.max.z) return false;return true;};this.Kzzz6 = function(){m_width = this.max.x;if (this.min.x > this.max.x){this.max.x = this.min.x;this.min.x = m_width;};m_width = this.max.x - this.min.x;m_height = this.max.y;if (this.min.y > this.max.y){this.max.y = this.min.y;this.min.y = m_height;};m_height = this.max.y - this.min.y;m_long = this.max.z;if (this.min.z > this.max.z){this.max.z = this.min.z;this.min.z = m_long;};m_long = this.max.z - this.min.z;m_center.x = 0.5 * m_width;m_center.y = 0.5 * m_height;m_center.z = 0.5 * m_long;m_halfLong = m_center.z;m_halfWidth = m_center.x;m_halfHeight = m_center.y;m_radius2 = m_halfWidth * m_halfWidth + m_halfHeight * m_halfHeight + m_halfLong * m_halfLong;m_radius = Math.sqrt(m_radius2);;m_center.x += this.min.x;;m_center.y += this.min.y;;m_center.z += this.min.z;m_ocenter.Kbb8(m_center);};this.KFF6 = function(){m_width = this.max.x - this.min.x;m_height = this.max.y - this.min.y;m_long = this.max.z - this.min.z;m_halfLong = 0.5 * m_long;m_halfWidth = 0.5 * m_width;m_halfHeight = 0.5 * m_height;};this.Kbb8 = function(ab){this.Knnn4(ab.KDD4());this.KRR5(ab.KII3());this.min.Kbb8(ab.min);this.max.Kbb8(ab.max);this.KAA8().Kbb8(ab.KAA8());this.KJJ0().Kbb8(ab.KJJ0());this.KFF6();};this.Kmmm3 = function(){m_width = this.max.x - this.min.x;m_height = this.max.y - this.min.y;m_long = this.max.z - this.min.z;m_center.x = 0.5 * m_width;m_center.y = 0.5 * m_height;m_center.z = 0.5 * m_long;m_halfLong = m_center.z;m_halfWidth = m_center.x;m_halfHeight = m_center.y;m_radius2 = m_halfWidth * m_halfWidth + m_halfHeight * m_halfHeight + m_halfLong * m_halfLong;m_radius = Math.sqrt(m_radius2);;m_center.x += this.min.x;;m_center.y += this.min.y;;m_center.z += this.min.z;m_ocenter.Kbb8(m_center);this.KFF6();};this.Kff0 = function(){return "[Voo7(min->"+this.min+",size("+m_width+","+m_height+","+m_long+"))]";};};Voo7._pnV = new Vqq0();Voo7.intersectionRL2 = function(ltv, lpv, ab, outV){let dis = Vhh2.calcPVSqrtDis2(ltv, lpv, ab.KJJ0());if (dis > ab.KII3()){return false;};if (ab.KBB7(lpv)){outV.Kbb8(lpv);return true;};if (lpv.x < ab.min.x) {;Voo7._pnV.Kkkk3( -1, 0, 0);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0) {;if (ab.min.x > 0) {;Voo7._pnV.x = 1;dis = ab.min.x;}else {dis = -ab.min.x;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.KGG4(outV.y, outV.z)) {;return true;};};}else if (lpv.x > ab.max.x){Voo7._pnV.Kkkk3( 1, 0, 0);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0) {;if (ab.max.x < 0) {;Voo7._pnV.x = -1;dis = -ab.max.x;}else {dis = ab.max.x;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.KGG4(outV.y, outV.z)) {;return true;};};};if (lpv.y < ab.min.y){Voo7._pnV.Kkkk3( 0, -1, 0);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0) {;if (ab.min.y > 0) {;Voo7._pnV.y = 1;dis = ab.min.y;}else {dis = -ab.min.y;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.Khhh3(outV.x, outV.z)) {;return true;};};}else if (lpv.y > ab.max.y){Voo7._pnV.Kkkk3( 0, 1, 0);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0) {;if (ab.max.y < 0) {;Voo7._pnV.y = -1;dis = -ab.max.y;}else {dis = ab.max.y;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.Khhh3(outV.x, outV.z)) {;return true;};};};if (lpv.z < ab.min.z){Voo7._pnV.Kkkk3( 0, 0, -1);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0) {;if (ab.min.z > 0) {;Voo7._pnV.z = 1;dis = ab.min.z;}else {dis = -ab.min.z;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.Khhh2(outV.x, outV.y)) {;return true;};};}else if (lpv.z > ab.max.z){Voo7._pnV.Kkkk3( 0, 0, 1);dis = Voo7._pnV.Kfff5(ltv);if (dis < 0){if (ab.max.z < 0) {;Voo7._pnV.z = -1;dis = -ab.max.z;}else {dis = ab.max.z;};Vbb7.intersectionSLV2(Voo7._pnV, dis, lpv, ltv, outV);if (ab.Khhh2(outV.x, outV.y)) {;return true;};};};return false;};function Vhh6(texWidth,texHeight,powerof2Boo,texTarget,tex3DDepth){this.KBB1 = "Vhh6";this.KSS7 = 1;this.Kooo1 = 0;this.Kqq0 = null;this.Khh5 = false;this.Kvvv8 = Vnn2.RGBA;this.Kvvv5 = Vnn2.RGBA;this.Kuuu0 = Vaa0.UNSIGNED_BYTE;this.Kxx8 = false;this.KKK8 = Vaa6.WRAP_CLAMP_TO_EDGE;this.KUU2 = Vaa6.WRAP_CLAMP_TO_EDGE;this.KUU4 = Vaa6.WRAP_CLAMP_TO_EDGE;this.Kjjj3 = Vaa6.NEAREST;this.KAAA4 = Vaa6.LINEAR;let m_bytesData = null;let m_imgData = null;let m_miplevel = -1;let m_texWidth = 128;let m_texHeight = 128;if(tex3DDepth == undefined){tex3DDepth = 1;};let m_tex3DDepth = tex3DDepth;let m_uploadBoo = true;let m_texBuf = null;if(texTarget == undefined){texTarget = Vaa6.TEXTURE_2D;};let m_texTarget = texTarget;let m_imgDataList = null;if(m_texTarget == Vaa6.TEXTURE_CUBE){m_imgDataList = [null,null,null, null,null,null];};let m_samplerTarget = -1;let m_haveRData = false;this.KBB8 = function(wrap){this.KKK8 =  this.KUU2 = this.KUU4 = wrap;};function Vll5(width,height, powerof2Boo){if(powerof2Boo == undefined) powerof2Boo = false;if(width  < 1) width = 128;if(height  < 1) height = 128;if(powerof2Boo){m_texWidth = Vjj2.Voo8(width);m_texHeight = Vjj2.Voo8(height);}else{m_texWidth = width;m_texHeight = height;};};Vll5(texWidth,texHeight,powerof2Boo);this.Koo3 = function(gl,pTexBuf,ptexTarget){if(m_texBuf == null){m_texBuf = pTexBuf;m_texTarget = ptexTarget;m_samplerTarget = Vaa6.getConst(gl,m_texTarget);m_uploadBoo = false;m_haveRData = true;this.KTT7(gl);};};this.Knn2 = function(){return m_texBuf;};this.KMM2 = function(){return m_samplerTarget;};this.Keee1 = function(){return m_texTarget;};this.getWidth = function(){return m_texWidth;};this.getHeight = function(){return m_texHeight;};this.Ksss4 = function(){return m_tex3DDepth;};this.KKK7 = function(){return m_haveRData;};this.KTT7 = function(gl){if (this.Kxx8 && Vjj2.Voo3(m_texWidth) && Vjj2.Voo3(m_texHeight)){gl.texParameteri(m_samplerTarget, gl.TEXTURE_WRAP_S, Vaa6.getConst(gl,this.KKK8));gl.texParameteri(m_samplerTarget, gl.TEXTURE_WRAP_T, Vaa6.getConst(gl,this.KUU2));if(m_texTarget == Vaa6.TEXTURE_3D){gl.texParameteri(m_samplerTarget, gl.TEXTURE_WRAP_R, Vaa6.getConst(gl,this.KUU4));gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_BASE_LEVEL, 0);gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MAX_LEVEL, Math.log2(m_texWidth));};gl.texParameteri(m_samplerTarget, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);gl.texParameteri(m_samplerTarget, gl.TEXTURE_MAG_FILTER, Vaa6.getConst(gl,this.KAAA4));gl.hint(gl.GENERATE_MIPMAP_HINT, gl.FASTEST);gl.generateMipmap(m_samplerTarget);} else {gl.texParameteri(m_samplerTarget, gl.TEXTURE_WRAP_S, Vaa6.getConst(gl,this.KKK8));gl.texParameteri(m_samplerTarget, gl.TEXTURE_WRAP_T, Vaa6.getConst(gl,this.KUU2));if(m_texTarget == Vaa6.TEXTURE_3D){gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_BASE_LEVEL, 0);gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MAX_LEVEL, Math.log2(m_texWidth));};gl.texParameteri(m_samplerTarget, gl.TEXTURE_MIN_FILTER, Vaa6.getConst(gl,this.Kjjj3));gl.texParameteri(m_samplerTarget, gl.TEXTURE_MAG_FILTER, Vaa6.getConst(gl,this.KAAA4));};};this.Kjj6 = function(gl){if(m_uploadBoo){if(m_haveRData){m_samplerTarget = Vaa6.getConst(gl,m_texTarget);m_texBuf = gl.createTexture();gl.bindTexture (m_samplerTarget, m_texBuf);if(m_texTarget == Vaa6.TEXTURE_CUBE){let imo = null;for(let i = 0; i < 6; ++i){imo = m_imgDataList[i];gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, m_miplevel, Vnn2.toGL(gl,this.Kvvv8),Vnn2.toGL(gl,this.Kvvv5), Vaa0.toGL(gl, this.Kuuu0), imo.imgData);};}else{if(m_imgData != null){gl.texImage2D(m_samplerTarget, m_miplevel, Vnn2.toGL(gl,this.Kvvv8),Vnn2.toGL(gl,this.Kvvv5), Vaa0.toGL(gl, this.Kuuu0), m_imgData);}else if(m_bytesData != null){let width = m_texWidth;let height  = m_texHeight;let pixStoreLevel = 4;if(m_texTarget == Vaa6.TEXTURE_3D){gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);pixStoreLevel = 1;gl.texImage3D(gl.TEXTURE_3D,0,Vnn2.toGL(gl, this.Kvvv8),m_texWidth,m_texHeight,m_tex3DDepth,0,Vnn2.toGL(gl, this.Kvvv5),gl.UNSIGNED_BYTE,m_bytesData);}else{if(m_miplevel > 0){width = m_texWidth >> m_miplevel;height = m_texHeight >> m_miplevel;if (width == 0 && height == 0){return;};if (width == 0){width = 1;};if (height == 0){height = 1;};};if(this.Kvvv5 == Vnn2.ALPHA){gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);pixStoreLevel = 1;};gl.texImage2D(m_samplerTarget, m_miplevel, Vnn2.toGL(gl,this.Kvvv8),width,height,0,Vnn2.toGL(gl,this.Kvvv5),  Vaa0.toGL(gl, this.Kuuu0), m_bytesData);};if(pixStoreLevel != 4){gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);};};};this.KTT7(gl);m_uploadBoo = false;};}else if(m_texBuf != null){if(m_changeSubBytesData){if(this.Kvvv5 == Vnn2.ALPHA){gl.pixelStorei(gl.UNPACK_ALIGNMENT,1);};gl.bindTexture(m_samplerTarget, m_texBuf);gl.texSubImage2D(m_samplerTarget, 0, m_subX, m_subY, m_subImgWidth, m_subImgHeight, Vnn2.toGL(gl,this.Kvvv5), Vaa0.toGL(gl, this.Kuuu0), m_subBytesData);m_changeSubBytesData = false;if(this.Kvvv5 == Vnn2.ALPHA){gl.pixelStorei(gl.PACK_ALIGNMENT,4);};};};};this.Kbbb7 = function(img, miplevel){if(miplevel == undefined){miplevel = 0;};if(m_texBuf == null && img.width > 0 && img.height > 0){m_texWidth = img.width;m_texHeight = img.height;m_imgData = img;m_miplevel = miplevel;m_haveRData = true;};};this.Kvvv1 = function(index,img, miplevel){if(m_texTarget == Vaa6.TEXTURE_CUBE){if(miplevel == undefined){miplevel = 0;};if(m_texBuf == null && img.width > 0 && img.height > 0){m_texWidth = img.width;m_texHeight = img.height;m_miplevel = miplevel;m_imgDataList[index] = {imgData:img,miplevel:miplevel};let k = 5;for(; k >= 0; --k){if(m_imgDataList[k] == null){break;};};m_haveRData = k<0;};}else{Vee4("texTarget is not Vaa6.TEXTURE_CUBE!!!");abort();};};let m_subImgWidth = 0;let m_subImgHeight = 0;let m_subX = 0;let m_subY = 0;let m_subBytesData = null;let m_changeSubBytesData = false;this.Kii7 = function(bytesData,px,py,twidth,theight,offset){if(offset == undefined){offset = 0;};m_subBytesData = bytesData;m_subX = px;m_subY = py;m_subImgWidth = twidth;m_subImgHeight = theight;m_changeSubBytesData = true;};this.KWW8 = function(bytesData, offset, miplevel){if(miplevel == undefined){miplevel = 0;};if(m_texBuf == null){m_bytesData = bytesData;m_miplevel = miplevel;m_haveRData = true;};};this.Kjj5 = function(){return m_changeSubBytesData;};this.use = function(gl){if(m_texBuf != null){gl.activeTexture(gl.TEXTURE0 + this.Kooo1);gl.bindTexture(m_samplerTarget, m_texBuf);if(m_changeSubBytesData){if(this.Kvvv5 == Vnn2.ALPHA){gl.pixelStorei(gl.UNPACK_ALIGNMENT,1);};gl.texSubImage2D(m_samplerTarget, 0, m_subX, m_subY, m_subImgWidth, m_subImgHeight, Vnn2.toGL(gl,this.Kvvv5), Vaa0.toGL(gl, this.Kuuu0), m_subBytesData);m_changeSubBytesData = false;if(this.Kvvv5 == Vnn2.ALPHA){gl.pixelStorei(gl.UNPACK_ALIGNMENT,4);};};};};this.Kvv2 = function(px,py, pw,ph){if(m_bytesData != null){var segSize = 1;switch(this.Kvvv5){case Vnn2.ALPHA:break;case Vnn2.RGBA:segSize = 4;break;};let s = pw * ph * segSize;var pixels = new Uint8Array(s);let i = py;let j = px;let i_max = i + ph;let j_max = j + pw;let k = 0;switch(this.Kvvv5){case Vnn2.ALPHA:for(; i < i_max; ++i){for(j = px; j < j_max; ++j){s = (i * m_texWidth + j);pixels[k] = m_bytesData[s];k++;};};break;case Vnn2.RGBA:for(; i < i_max; ++i){for(j = px; j < j_max; ++j){s = (i * m_texWidth + j) * segSize;pixels[k] = m_bytesData[s];pixels[k+1] = m_bytesData[s+1];pixels[k+2] = m_bytesData[s+2];pixels[k+3] = m_bytesData[s+3];k++;};};break;};return pixels;};return null;};this.Kff0 = function(){return "[Vhh6(width="+this.getWidth()+",height="+this.getHeight()+")]";};this.KNN3 = function(gl){if(m_texBuf != null){m_imgData = null;if(m_imgDataList != null){for(let i = 0; i < 6; ++i){if(m_imgDataList[i] != null){m_imgDataList[i].imgData = null;};};};gl.deleteTexture(m_texBuf);};m_texBuf = null;};};function Vnn5(texWidth,texHeight,powerof2Boo){Vhh6.call(this, texWidth,texHeight,powerof2Boo,Vaa6.TEXTURE_CUBE);this.Kff0 = function(){return "[Vnn5(width="+this.getWidth()+",height="+this.getHeight()+")]";};};function Vmm7(texWidth,texHeight,tex3DDepth, powerof2Boo){Vhh6.call(this, texWidth, texHeight, powerof2Boo, Vaa6.TEXTURE_3D, tex3DDepth);this.Kff0 = function(){return "[Vmm7(width="+this.getWidth()+",height="+this.getHeight()+",depth="+this.Ksss4()+")]";};this.Kvvv8 = Vnn2.R8;this.Kvvv5 = Vnn2.RED;};function Vll4(purl){let m_url = purl;let m_loaded = false;let m_texList = [];let m_mLvList = [];let m_img = new Image();function Vnn1(info){let i = 0;let len = m_texList.length;for(; i < len; ++i){m_texList[i].Kbbb7(m_img,m_mLvList[i]);};};m_img.onload = Vnn1;m_img.crossOrigin = "";m_img.src = m_url;this.KBBB1 = function(tex,mipLevel){m_texList.push(tex);m_mLvList.push(mipLevel);};this.KPP5 = function(){return m_url;};this.Kxx5 = function(){return m_img;};this.KEE7 = function(i){return m_texList[i];};this.KPP8 = function(){return m_loaded;};};function Vgg8(purls){let m_loaded = false;let m_urls = purls;let m_texList = [];let m_mLvList = [];let m_imgs = [];let m_loadedTotal = 0;let i = 0;function Vnn1(info){m_loadedTotal ++;if(m_loadedTotal >= 6){for(i = 0; i < 6; ++i){m_texList[0].Kvvv1(i,m_imgs[i],m_mLvList[0]);};};};for(i = 0; i < 6; ++i){let m_img = new Image();m_img.onload = Vnn1;m_img.crossOrigin = "";m_img.src = m_urls[i];m_imgs.push(m_img);};this.KBBB1 = function(tex,mipLevel){m_texList.push(tex);m_mLvList.push(mipLevel);};this.KPP5 = function(){return m_urls[0];};this.Kxx5 = function(){return m_img;};this.KEE7 = function(i){return m_texList[i];};this.KPP8 = function(){return m_loaded;};};function Vdd3(){};Vdd3.___dict = {};Vdd3.___cubeDict = {};Vdd3.getTexAndLoadImg = function(purl,mipLevel){if(mipLevel == undefined) mipLevel = 0;if(purl == undefined){return null;};if((typeof purl) == "string"){let t = Vdd3.___dict[purl];if(t == undefined || t == null){t = new Vll4(purl);Vdd3.___dict[purl] = t;let tex = new Vhh6(1,1);tex.KBB1 = purl;t.KBBB1(tex,mipLevel);return tex;}else{return t.KEE7(0);};};return null;};Vdd3.getCubeTexAndLoadImg = function(idns,purls,mipLevel){if(mipLevel == undefined) mipLevel = 0;if(idns == "" || purls == undefined || purls.length < 6){return null;};let t = Vdd3.___cubeDict[idns];if(t == undefined || t == null){t = new Vgg8(purls);Vdd3.___cubeDict[idns] = t;let tex = new Vnn5(1,1);t.KBBB1(tex,mipLevel);return tex;}else{return t.KEE7(0);};return null;};function Vqq1(){this.Kqq0 = null;let m_target = null;let m_isMoving = true;this.KSS1 = function(){m_isMoving = false;};this.KNN5 = function(){m_isMoving = true;};this.Kpp3 = function(){return m_isMoving;};this.Krr4 = function(tar){m_target = tar;};this.KNN3 = function(){m_target = null;};this.Kzzz6 = function(){};};function Vee3(){this.Kqq0 = null;let m_target = null;let m_isMoving = true;this.KSS1 = function(){m_isMoving = false;};this.KNN5 = function(){m_isMoving = true;};this.Kpp3 = function(){return m_isMoving;};this.KFF1 = function(){};let m_spdX = 0.0,m_spdY = 0.2,m_spdZ = 0.0;this.KRR4 = function(spdX,spdY,spdZ){m_spdX = spdX;m_spdY = spdY;m_spdZ = spdZ;};this.Krr4 = function(tar){m_target = tar;};this.KNN3 = function(){m_target = null;};this.Kzzz6 = function(){if(m_isMoving){m_target.Kgg5(m_target.KCC8() + m_spdX,m_target.KDD0() + m_spdY,m_target.KCC7() + m_spdZ);};};};function Vff6(){};Vff6.VTXLAYOUT_AUTO = 100000000;Vff6.VTXLAYOUT_1 = 110000000;Vff6.VTXLAYOUT_2 = 120000000;Vff6.VTXLAYOUT_2_2 = 122000000;Vff6.VTXLAYOUT_3 = 130000000;Vff6.VTXLAYOUT_3_2 = 132000000;Vff6.VTXLAYOUT_3_2_2 = 132200000;Vff6.VTXLAYOUT_3_2_3 = 132300000;Vff6.VTXLAYOUT_3_3 = 133000000;Vff6.VTXLAYOUT_3_3_3 = 133300000;Vff6.VTXLAYOUT_3_4 = 134000000;Vff6.VTXLAYOUT_3_3_4 = 133400000;Vff6.VTXLAYOUT_4 = 140000000;Vff6.VTXLAYOUT_4_2 = 142000000;Vff6.VTXLAYOUT_4_2_3 = 142300000;Vff6.VTXLAYOUT_4_3_3_2 = 143320000;Vff6.VTXLAYOUT_4_4 = 144000000;Vff6.VTXLAYOUT_4_4_4_4 = 144440000;Vff6.VTXLAYOUT_4_4_4_4_4 = 144444000;Vff6.VTXLAYOUT_4_4_4_4_2 = 144442000;Vff6.VTXTYPE_GL_POINTS = 101;Vff6.VTXTYPE_GL_LINES = 102;Vff6.VTXTYPE_GL_LINE_STRIP = 103;Vff6.VTXTYPE_GL_TRIANGLES = 111;Vff6.VTX_STATIC_DRAW = 0;Vff6.VTX_DYNAMIC_DRAW = 1;Vff6.VBUF_VS = 3001;Vff6.VBUF_VS2 = 3002;Vff6.VBUF_UVS = 3003;Vff6.VBUF_UVS2 = 3004;Vff6.VBUF_NVS = 3005;Vff6.VBUF_NVS2 = 3006;Vff6.VBUF_CVS = 3007;Vff6.VBUF_CVS2 = 3008;Vff6.VBUF_TVS = 3009;Vff6.VBUF_TVS2 = 3010;Vff6.VBUF_VS_INDEX = Vbb4.BIT_ONE_0;Vff6.VBUF_UVS_INDEX = Vbb4.BIT_ONE_1;Vff6.VBUF_NVS_INDEX = Vbb4.BIT_ONE_2;Vff6.VBUF_CVS_INDEX = Vbb4.BIT_ONE_3;Vff6.VBUF_VS2_INDEX = Vbb4.BIT_ONE_4;Vff6.VBUF_UVS2_INDEX = Vbb4.BIT_ONE_5;Vff6.VBUF_NVS2_INDEX = Vbb4.BIT_ONE_6;Vff6.VBUF_CVS2_INDEX = Vbb4.BIT_ONE_7;Vff6.VBUF_TVS_INDEX = Vbb4.BIT_ONE_8;Vff6.VBUF_TVS2_INDEX = Vbb4.BIT_ONE_9;Vff6.VBUF_VS_NS = "a_vs";Vff6.VBUF_VS2_NS = "a_vs2";Vff6.VBUF_UVS_NS = "a_uvs";Vff6.VBUF_UVS2_NS = "a_uvs2";Vff6.VBUF_NVS_NS = "a_nvs";Vff6.VBUF_NVS2_NS = "a_nvs2";Vff6.VBUF_CVS_NS = "a_cvs";Vff6.VBUF_CVS2_NS = "a_cvs2";Vff6.VBUF_TVS_NS = "a_tvs";Vff6.VBUF_TVS2_NS = "a_tvs2";Vff6.getVBufTypeByNS = function(pns){switch(pns){case Vff6.VBUF_VS_NS:return Vff6.VBUF_VS;break;case Vff6.VBUF_UVS_NS:return Vff6.VBUF_UVS;break;case Vff6.VBUF_NVS_NS:return Vff6.VBUF_NVS;break;case Vff6.VBUF_CVS_NS:return Vff6.VBUF_CVS;break;case Vff6.VBUF_VS2_NS:return Vff6.VBUF_VS2;break;case Vff6.VBUF_UVS2_NS:return Vff6.VBUF_UVS2;break;case Vff6.VBUF_NVS2_NS:return Vff6.VBUF_NVS2;break;case Vff6.VBUF_CVS2_NS:return Vff6.VBUF_CVS2;break;case Vff6.VBUF_TVS_NS:return Vff6.VBUF_TVS;break;case Vff6.VBUF_TVS2_NS:return Vff6.VBUF_TVS2;break;default:};return -1;};Vff6.getVBufAttributeTypeByNS = function(pns){return Vff6.getVBufTypeByNS(pns) - 3000;};function Vdd7(){};Vdd7.FLAT = 210;Vdd7.GOURAND = 310;function Vgg3(){this.Krrr1 = false;this.Krrr7 = 1.0;this.Krr3 = false;this.Kuuu6 = 0;this.Kll6 = 0;this.KVV0 = 0;this.Kjjj5 = 0;this.Kkk4 = 0;let m_gl = null;let m_type = 0;let m_layoutList = null;let m_bufs = [];let m_dataList = null;let m_aTypeList = null;let m_statusList = null;let m_updateList = null;let m_ivs = null;let m_ivsBuf = null;let m_ivsStatus = Vff6.VTX_STATIC_DRAW;let m_total = 0;this.KFF1 = function(type,dataList,statusList,layoutList){m_type = type;if(dataList != undefined) m_dataList = dataList;if(statusList != undefined) m_statusList = statusList;let mt = type - Vff6.VTXLAYOUT_AUTO;let k = Vff6.VTXLAYOUT_AUTO;let v = 0;if(dataList == null){m_dataList = [];m_statusList = [];m_layoutList = [];m_updateList = [];for(;mt>0;){m_dataList.push(null);m_statusList.push(Vff6.VTX_STATIC_DRAW);k /= 10;v = Math.floor(mt / k);mt = mt - v * k;m_layoutList.push(v);m_updateList.push(false);m_total ++;};}else{m_total = dataList.length;m_updateList = [];for(v = 0; v < m_total; ++v){m_updateList.push(false);};if(layoutList != undefined){m_layoutList = layoutList;}else{m_layoutList = [];for(;mt>0;){k /= 10;v = Math.floor(mt / k);mt = mt - v * k;m_layoutList.push(v);};};};};this.Kccc5 = function(){ return m_type};this.Kppp7 = function(){ return m_layoutList};this.Khh6 = function(i,float32Arr,status){m_dataList[i] = float32Arr;if(status == undefined) m_statusList[i] = Vff6.VTX_STATIC_DRAW;else m_statusList[i] = status;};let m_wholeOffsetList = null;let m_wholeF32Data = null;let m_wholeF32Buf = null;let m_wholeStride = 0;this.KTT5 = function(float32Arr,wholeLayoutList){m_wholeF32Data = float32Arr;m_layoutList = wholeLayoutList;m_wholeOffsetList = [];let i = 0;m_total = wholeLayoutList.length;m_wholeStride = 0;for(; i < m_total; ++i){m_wholeOffsetList.push(m_wholeStride);;m_wholeStride += wholeLayoutList[i] * 4;};};this.Kzz2 = function(aTypeList){m_aTypeList = [];let i = 0;for(; i < aTypeList.length;++i){m_aTypeList.push( aTypeList[i]-3000 );};};this.Kooo6 = function(i,float32Arr){if(this.Krrr1){i = 0;m_updateList[i] = true;if(float32Arr != undefined)m_dataList[i] = float32Arr;};};this.Kyy6 = function(uint16Arr,status){m_ivs = uint16Arr;if(status == undefined) m_ivsStatus = Vff6.VTX_STATIC_DRAW;else m_ivsStatus = status;};this.Kddd8 = function(gl,st){switch(st){case Vff6.VTX_STATIC_DRAW:return gl.STATIC_DRAW;break;case Vff6.VTX_DYNAMIC_DRAW:return gl.DYNAMIC_DRAW;break;};return gl.STATIC_DRAW;};this.Kaaa3 = false;this.Kttt7 = false;let m_sublayoutList = null;let m_sublayoutSizeList = null;let m_subUnitLenList = null;let m_uploadsDataEnabled = false;this.Kqqq4 = function(pi, int16Arr,total,subUnitLen){if(m_sublayoutList == null){m_sublayoutList = [];m_sublayoutSizeList = [];m_subUnitLenList = [];for(let i = 0; i < m_total; ++i){m_sublayoutList.push(null);m_sublayoutSizeList.push(0);m_subUnitLenList.push(0);};};m_sublayoutList[pi] = int16Arr;m_sublayoutSizeList[pi] = total;m_subUnitLenList[pi] = subUnitLen;m_uploadsDataEnabled = true;};this.Koo1 = function(){return m_gl != null;};this.KMM8 = function(gl){let i = 0;};this.Kjj6 = function(gl,shdp){if(m_gl == null){m_uploadsDataEnabled = false;m_sublayoutList = null;this.KMM8(gl);m_gl = gl;let i = 0;if(m_wholeF32Data == null){let buf = null;for(; i < m_total; ++i){buf = gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER, buf);gl.bufferData(gl.ARRAY_BUFFER,m_dataList[i],this.Kddd8(gl,m_statusList[i]));m_bufs.push(buf);};}else{m_wholeF32Buf = gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER, m_wholeF32Buf);gl.bufferData(gl.ARRAY_BUFFER,m_wholeF32Data,gl.STATIC_DRAW);};if(m_aTypeList == null && m_layoutList.length > 0){m_aTypeList = [];for(i = 0; i < m_total; ++i){m_aTypeList.push( shdp.getLocationTypeByIndex(i) );};};if(m_ivs != null){m_ivsBuf = gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, m_ivs, this.Kddd8(gl,m_ivsStatus));if(this.Kjjj5 < 1){this.Kjjj5 = m_ivs.length;};};};};this.KLL0 = function(i){let list = m_sublayoutList[i];m_sublayoutList[i] = null;if(list != null){let dataArr = m_dataList[i];let unitLen = m_subUnitLenList[i];let len = m_sublayoutSizeList[i];let begin = -1;let end = begin;for(i = 0; i < len; ++i){if(list[i] > 0){if(begin >= 0){if((i - end) == 1){end = i;}else{if(end < 0) end = begin;seg = dataArr.subarray(begin * unitLen, (end + 1) * unitLen);m_gl.bufferSubData(m_gl.ARRAY_BUFFER, begin * unitLen * 4, seg);end = begin = -1;};}else{end = begin = i;};}else{if(begin >= 0){if(end < 0) end = begin;seg = dataArr.subarray(begin * unitLen, (end + 1) * unitLen);m_gl.bufferSubData(m_gl.ARRAY_BUFFER, begin * unitLen * 4, seg);};end = begin = -1;};list[i] = -1;};if(begin >= 0){if(end < 0) end = begin;seg = dataArr.subarray(begin * unitLen, (end + 1) * unitLen);m_gl.bufferSubData(m_gl.ARRAY_BUFFER, begin * unitLen * 4, seg);};};if(m_ivsBuf != null){m_gl.bindBuffer(m_gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);};};this.use = function(shdp){let i = 0;m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[0]);shdp.vertexAttribPointerType(m_aTypeList[0], m_layoutList[0],m_gl.FLOAT,false,0,0);if(m_uploadsDataEnabled){m_uploadsDataEnabled = false;this.KLL0(0);for(i = 1; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerType(m_aTypeList[i], m_layoutList[i],m_gl.FLOAT,false,0,0);this.KLL0(i);};}else{if(this.Krrr1){if(m_statusList[i] == Vff6.VTX_DYNAMIC_DRAW && m_updateList[i]){m_updateList[i] = false;m_gl.bufferSubData(m_gl.ARRAY_BUFFER, 0, m_dataList[i]);};for(i = 1; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerType(m_aTypeList[i], m_layoutList[i],m_gl.FLOAT,false,0,0);if(m_statusList[i] == Vff6.VTX_DYNAMIC_DRAW && m_updateList[i]){m_updateList[i] = false;m_gl.bufferSubData(m_gl.ARRAY_BUFFER, 0, m_dataList[i]);};};}else{for(i = 1; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerType(m_aTypeList[i],m_layoutList[i],m_gl.FLOAT,false,0,0);};};};if(m_ivsBuf != null){m_gl.bindBuffer(m_gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);};};this.KII8 = function(){return m_wholeF32Data;};this.KKK2 = function(){return m_wholeF32Data != null;};this.KEE5 = function(){if(m_wholeF32Data != null){return 1;};if(this.Kttt7){return 2;};if(this.Kaaa3){return 3;};return 0;};this.KSS6 = function(shdp){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[0]);shdp.vertexAttribPointerAt(0,m_layoutList[0],m_gl.FLOAT,false,0,0);let i = 1;for(; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerAt(i,m_layoutList[i],m_gl.FLOAT,false,0,0);};if(m_ivsBuf != null){m_gl.bindBuffer(m_gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);};};this.Kgg4 = function(shdp){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[0]);shdp.vertexAttribPointerType(m_aTypeList[0],m_layoutList[0],m_gl.FLOAT,false,0,0);let i = 1;if(m_uploadsDataEnabled){m_uploadsDataEnabled = false;this.KLL0(0);for(; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerType(m_aTypeList[i], m_layoutList[i],m_gl.FLOAT,false,0,0);this.KLL0(i);};}else{for(; i < m_total; ++i){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_bufs[i]);shdp.vertexAttribPointerType(m_aTypeList[i], m_layoutList[i],m_gl.FLOAT,false,0,0);};};if(m_ivsBuf != null){m_gl.bindBuffer(m_gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);};};this.Ktt8 = function(shdp){m_gl.bindBuffer(m_gl.ARRAY_BUFFER, m_wholeF32Buf);shdp.vertexAttribPointerType(m_aTypeList[0], m_layoutList[0], m_gl.FLOAT,false,m_wholeStride,m_wholeOffsetList[0]);for(let i = 1; i < m_total; ++i){shdp.vertexAttribPointerType(m_aTypeList[i], m_layoutList[i],m_gl.FLOAT,false,m_wholeStride,m_wholeOffsetList[i]);};if(m_ivsBuf != null){m_gl.bindBuffer(m_gl.ELEMENT_ARRAY_BUFFER, m_ivsBuf);};};this.Kqqq3 = function(){m_gl.drawElementsInstanced(m_gl.TRIANGLES,this.Kll6, m_gl.UNSIGNED_SHORT, this.Kuuu6,this.KVV0);};this.Kzzz1 = function(){if(this.Krr3){m_gl.drawElementsInstanced(m_gl.TRIANGLES,this.Kll6, m_gl.UNSIGNED_SHORT, this.Kuuu6,this.KVV0);}else{m_gl.drawElements(m_gl.TRIANGLES, this.Kjjj5, m_gl.UNSIGNED_SHORT,this.Kkk4);};};this.KNN3 = function(){if(m_wholeF32Data != null){m_wholeF32Data = null;if(m_wholeF32Buf != null){m_gl.deleteBuffer(m_wholeF32Buf);m_wholeF32Buf = null;};m_wholeOffsetList = null;}else if(m_total > 0){let i = 0;if(m_gl != null){for(; i < m_total; ++i){m_dataList[i] = null;m_gl.deleteBuffer(m_bufs[i]);m_bufs[i] = null;};m_bufs = null;m_gl = null;}else{for(; i < m_total; ++i){m_dataList[i] = null;};};m_total = 0;m_dataList = null;};};this.Kff0 = function(){return "Vgg3()";};};function Vnn4(){Vgg3.call(this);this.Ktt3 = 0;this.KNN8 = 0;var v_gl = null;this.KMM8 = function(gl){v_gl = gl;};this.Kzzz1 = function(){v_gl.lineWidth( this.Krrr7 );v_gl.drawArrays(v_gl.LINES, this.KNN8, this.Ktt3);};};function Vnn7(){Vgg3.call(this);this.Ktt3 = 0;this.KNN8 = 0;var v_gl = null;this.KMM8 = function(gl){v_gl = gl;};this.Kzzz1 = function(){v_gl.lineWidth( this.Krrr7 );v_gl.drawArrays(v_gl.LINE_STRIP, this.KNN8, this.Ktt3);};};function Vmm0(){Vgg3.call(this);this.Ktt3 = 0;this.KNN8 = 0;var v_gl = null;this.KMM8 = function(gl){v_gl = gl;};this.Kzzz1 = function(){v_gl.drawArrays(v_gl.POINTS, this.KNN8, this.Ktt3);};};Vgg3.__dataList = null;Vgg3.__dataStatusList = null;Vgg3.__dataStepList = null;Vgg3.vbWholeDataEnabled = false;Vgg3.dynBufSegEnabled = false;Vgg3.useBufByIndexEnabled = false;Vgg3.Reset = function(){Vgg3.__dataList = [];Vgg3.__dataStatusList = [];Vgg3.__dataStepList = [];Vgg3.vbWholeDataEnabled = false;Vgg3.dynBufSegEnabled = false;Vgg3.useBufByIndexEnabled = false;};Vgg3.AddFloat32Data = function(float32Arr,step,status){Vgg3.__dataList.push(float32Arr);Vgg3.__dataStepList.push(step);if(status == undefined) Vgg3.__dataStatusList.push(Vff6.VTX_STATIC_DRAW);else Vgg3.__dataStatusList.push(status);};Vgg3.CreateBySaveData = function(vtxType,attTypeList){let i = 0;let k = 0;if(Vgg3.vbWholeDataEnabled){let stride = 0;let bufTot = Vgg3.__dataStepList.length;for(; i < bufTot; i++){;stride += Vgg3.__dataStepList[i];};let vb = new Vgg3();vb.Kttt7 = Vgg3.dynBufSegEnabled;let tot = Vgg3.__dataList[0].length / Vgg3.__dataStepList[0];let dataArr = new Float32Array(stride * tot);let j = 0;let segLen = 0;let parrf32 = null;let subArr = null;for(i = 0; i < tot; ++i){k = i * stride;for(j = 0; j < bufTot; ++j){segLen = Vgg3.__dataStepList[j];parrf32 = Vgg3.__dataList[j];subArr = parrf32.subarray(i * segLen, i * segLen + segLen);dataArr.set(subArr, k);;k += segLen;};};vb.KTT5(dataArr,Vgg3.__dataStepList);Vgg3.AdjustBlock(vb, attTypeList);return vb;};i = 0;k = 1;let t = 0;let len = Vgg3.__dataStepList.length;for(; i < len; i++){;t += Vgg3.__dataStepList[len - i - 1] * k;k *= 10;};k = 10;for(; i < 8; i++){t *= k;};;t += Vff6.VTXLAYOUT_AUTO;return Vgg3.Create(t,Vgg3.__dataList, Vgg3.__dataStatusList, Vgg3.__dataStepList, vtxType);};Vgg3.Create = function(type,dataList,statusList,stepList,vtxType,attTypeList){if(vtxType == undefined || vtxType == null) vtxType = Vff6.VTXTYPE_GL_TRIANGLES;switch(type){case Vff6.VTXLAYOUT_2:case Vff6.VTXLAYOUT_2_2:case Vff6.VTXLAYOUT_3:case Vff6.VTXLAYOUT_3_2:case Vff6.VTXLAYOUT_3_2_2:case Vff6.VTXLAYOUT_3_2_3:case Vff6.VTXLAYOUT_3_3:case Vff6.VTXLAYOUT_3_3_3:case Vff6.VTXLAYOUT_3_4:case Vff6.VTXLAYOUT_3_3_4:case Vff6.VTXLAYOUT_4:case Vff6.VTXLAYOUT_4_2:case Vff6.VTXLAYOUT_4_2_3:case Vff6.VTXLAYOUT_4_3_3_2:case Vff6.VTXLAYOUT_4_4:case Vff6.VTXLAYOUT_4_4_4_4:case Vff6.VTXLAYOUT_4_4_4_4_2:case Vff6.VTXLAYOUT_4_4_4_4_4:break;default:Vee4("Error Vgg3's bufs type("+type+")!");abort();break;};let block = null;switch(vtxType){case Vff6.VTXTYPE_GL_LINES:block = new Vnn4();break;case  Vff6.VTXTYPE_GL_LINE_STRIP:block = new Vnn7();break;case  Vff6.VTXTYPE_GL_POINTS:block = new Vmm0();break;default:block = new Vgg3();break;};block.Kttt7 = Vgg3.dynBufSegEnabled;block.Kaaa3 = Vgg3.useBufByIndexEnabled;block.KFF1(type,dataList,statusList,stepList);Vgg3.AdjustBlock(block, attTypeList);return block;};Vgg3.AdjustBlock = function(vb,attTypeList){if(attTypeList != undefined && attTypeList != null){vb.Kzz2(attTypeList);};let t = vb.KEE5();switch( t ){case 1:vb.use = vb.Ktt8;break;case 2:vb.use = vb.Kgg4;break;case 3:vb.use = vb.KSS6;break;};};function Vmm1(px,py,pz,pindex){if(px == undefined) px = 0;if(py == undefined) py = 0;if(pz == undefined) pz = 0;this.x = px;this.y = py;this.z = pz;this.u = 0.0;this.v = 1.0;this.nx = 0.00;this.ny = 0.00;this.nz = 0.00;if(pindex == undefined) pindex = 0;this.Kll0 = pindex;this.Kzzz7 = function(){let vtx = new Vmm1(this.x,this.y,this.z,this.Kll0);vtx.nx = this.nx; vtx.ny = this.ny; vtx.nz = this.nz;vtx.u = this.u; vtx.v = this.v;return vtx;};this.Kbb8 = function(pv){this.x = pv.x; this.y = pv.y; this.z = pv.z;this.u = pv.u; this.v = pv.v;this.nx = pv.nx; this.ny = pv.ny; this.nz = pv.nz;this.Kll0 = pv.Kll0;};};function Vii7(){this.Kvvv4 = new Voo7();this.Kaaa8 = Vdd7.GOURAND;this.KCC1 = null;this.Kkk3 = 1.0;this.Ktt3 = 0;this.Kgg3 = 0;this.Keee3 = Vee6.ELEMENTS_TRIANGLES;this.Kmm3 = 0;this.KPP4 = 0;this.Kxxx8 = false;this.Kuuu6 = 0;this.Kll6 = 0;this.KVV0 = 0;this.KHH4 = function(){return null;};this.KYY1 = function(){return null;};this.KMM5 = function(){return null;};this.KHH6 = function(){return null;};this.KDD6 = function(){return null;};this.Kii1 = function(){return null;};this.Kuu8 = function(){return null;};this.Khhh7 = function(){return null;};this.KQQ7 = function(){return null;};let m_layoutBit = 0x0;this.Kgg7 = function(layoutBit){m_layoutBit = layoutBit;};this.Kyy7 = function(i){return (i&m_layoutBit) > 0;};this.KNN3 = function(){if(this.KCC1 != null){this.KCC1.KNN3();this.KCC1 = null;};};this.Kff0 = function(){return "[Vii7()]";};};function Vcc5(){Vii7.call(this);this.Kgg2 = 0.0;this.KUU6 = 0.0;this.Kppp6 = 1.0;this.KJJ5 = 1.0;this.Kddd5 = false;this.Keee7 = false;let m_vs = null;let m_uvs = null;let m_nvs = null;let m_cvs = null;let m_ivs = null;this.KHH4 = function(){return m_vs;};this.KYY1 = function(){return m_uvs;};this.KMM5 = function(){return m_nvs;};this.KHH6 = function(){return m_cvs;};this.KQQ7 = function(){return m_ivs;};this.KFF1 = function(startX,startY,pwidth,pheight){let minX = startX;let minY = startY;let maxX = startX + pwidth;let maxY = startY + pheight;let pz = 0.0;m_ivs = new Uint16Array([0,1,2,0,2,3]);if(this.Keee7){m_vs = new Float32Array([maxX,pz,minY,minX,pz,minY,minX,pz,maxY,maxX,pz,maxY]);}else{m_vs = new Float32Array([minX,minY,pz,maxX,minY,pz,maxX,maxY,pz,minX,maxY,pz]);};Vgg3.Reset();Vgg3.AddFloat32Data(m_vs,3);let m_aTypeList = [Vff6.VBUF_VS];if (this.Kyy7(Vff6.VBUF_UVS_INDEX)){if(this.Kddd5){m_uvs = new Float32Array([this.Kgg2 + 0.0 * this.Kppp6,    this.KUU6 + 0.0 * this.KJJ5,this.Kgg2 + 1.0 * this.Kppp6,    this.KUU6 + 0.0 * this.KJJ5,this.Kgg2 + 1.0 * this.Kppp6,    this.KUU6 + 1.0 * this.KJJ5,this.Kgg2 + 0.0 * this.Kppp6,    this.KUU6 + 1.0 * this.KJJ5]);}else{m_uvs = new Float32Array([this.Kgg2 + 0.0 * this.Kppp6,    this.KUU6 + 1.0 * this.KJJ5,this.Kgg2 + 1.0 * this.Kppp6,    this.KUU6 + 1.0 * this.KJJ5,this.Kgg2 + 1.0 * this.Kppp6,    this.KUU6 + 0.0 * this.KJJ5,this.Kgg2 + 0.0 * this.Kppp6,    this.KUU6 + 0.0 * this.KJJ5]);};Vgg3.AddFloat32Data(m_uvs,2);m_aTypeList.push(Vff6.VBUF_UVS);};if (this.Kyy7(Vff6.VBUF_NVS_INDEX)){if(this.Keee7){m_nvs = new Float32Array([0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,]);}else{m_nvs = new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,]);};Vgg3.AddFloat32Data(m_nvs,3);m_aTypeList.push(Vff6.VBUF_NVS);};if (this.Kyy7(Vff6.VBUF_CVS_INDEX)){m_cvs = new Float32Array([1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0]);Vgg3.AddFloat32Data(m_cvs,3);m_aTypeList.push(Vff6.VBUF_CVS);};Vgg3.vbWholeDataEnabled = this.Kxxx8;this.KCC1 = Vgg3.CreateBySaveData(Vff6.VTXTYPE_GL_TRIANGLES,m_aTypeList);this.KCC1.Kyy6(m_ivs);this.Kmm3 = m_ivs.length;this.Ktt3 = 4;};this.Kff0 = function(){return "[Vcc5()]";};};function Vpp0(){this.Kgg1 = "";this.Kqq8 = "vec4";this.KBB1 = "";this.Kmmm5 = "";this.Kiii2 = "";this.Kqq5 = 0;this.Kll0 = 0;this.Kppp2 = -1;this.Koo0 = "";this.Kwww8 = "";this.Knnn0 = "";this.KEE1 = 1;this.Ktt2 = function(){let i = this.KBB1.indexOf("-");if(i > 0){this.KBB1 = this.KBB1.slice(0,i);};};this.Kxxx7 = function(component,arrIndex){if(component == undefined) component = "";if(arrIndex == undefined) arrIndex = "";if(this.KEE1 < 2){if(component != "") return this.KBB1+"."+component;else return this.KBB1;}else{if(component != "") return this.KBB1+"["+arrIndex+"]."+component;else return this.KBB1+"["+arrIndex+"]";};};this.KFF4 = function(total, shaderType){if(total == undefined) total = 0;if(shaderType == undefined) shaderType = 0;if(this.Kgg1 == ""){switch(this.Kqq5){case Vpp0.CMDTYPE_ATTRIBUTE:if(Vpp5()){this.Kgg1 = "\nlayout(location = "+this.Kll0+") in " + this.Kqq8 + " " + this.KBB1 + ";";}else{this.Kgg1 = "\nattribute " + this.Kqq8 + " " + this.KBB1 + ";";};break;case Vpp0.CMDTYPE_UNIFORM:if(this.KEE1 < 2) this.Kgg1 = "\nuniform " + this.Kqq8 + " " + this.KBB1 + ";";else this.Kgg1 = "\nuniform " + this.Kqq8 + " " + this.KBB1 +"["+this.KEE1+ "];";break;case Vpp0.CMDTYPE_TEXTURE_UNIFORM:this.Kgg1 = "\nuniform " + this.Kqq8 + " " + this.KBB1 + ";";break;case Vpp0.CMDTYPE_VARY_IN:case Vpp0.CMDTYPE_VARY_OUT:let vlStr = "";if(this.KEE1 > 1) vlStr = "["+this.KEE1+"]";if(Vpp5()){if(shaderType == 1){this.Kgg1 = "\nin " + this.Kqq8 + " " + this.KBB1 +vlStr+ ";";}else{this.Kgg1 = "\nout " + this.Kqq8 + " " + this.KBB1 +vlStr+ ";";};}else{if(shaderType == 1){this.Kgg1 = "\nvarying " + this.Kqq8 + " " + this.KBB1 +vlStr+ ";";}else{this.Kgg1 = "\nvarying " + this.Kqq8 + " " + this.KBB1 +vlStr+ ";";};};break;case Vpp0.CMDTYPE_FRAG_OUTPUT:if(Vpp5()){if(total < 2){if(this.Kppp2 < 0){this.Kgg1 = "\nout " + this.Kqq8 + " " + this.KBB1 + ";";}else{this.Kgg1 = "\nlayout(location = "+this.Kppp2+") out " + this.Kqq8 + " " + this.KBB1 + ";";};}else{this.Kgg1 = "\nlayout(location = "+this.Kll0+") out " + this.Kqq8 + " " + this.KBB1 + ";";};}else{this.Kgg1 = "";};break;case Vpp0.CMDTYPE_VARIABLE:if(this.Koo0 == ""){this.Kgg1 = "\n" + this.Kqq8 + " " + this.KBB1 + ";";}else{if(this.KEE1 < 2){this.Kgg1 = "\n" + this.Kqq8 + " " + this.KBB1 +" = "+this.Koo0+ ";";}else{this.Kgg1 = "\n" + this.Kqq8 + " " + this.KBB1 + "[" +this.KEE1+"] = "+this.Koo0+ ";";};};break;};};};this.Kff0 = function(){return "[Vpp0()]";};};Vpp0.CMDTYPE_ATTRIBUTE = 101;Vpp0.CMDTYPE_UNIFORM = 105;Vpp0.CMDTYPE_TEXTURE_UNIFORM = 108;Vpp0.CMDTYPE_VARY_OUT = 111;Vpp0.CMDTYPE_VARY_IN = 111;Vpp0.CMDTYPE_FRAG_OUTPUT = 117;Vpp0.CMDTYPE_FUNCTION = 119;Vpp0.CMDTYPE_VARIABLE = 121;Vpp0.CMDTYPE_UNIFORM_FROME_VTX = 123;Vpp0.VARYTYPE_VS = "v_vs";Vpp0.VARYTYPE_VIEW_VS = "v_vs-v";Vpp0.VARYTYPE_UVS = "v_uvs";Vpp0.VARYTYPE_CVS = "v_cvs";Vpp0.VARYTYPE_NVS = "v_nvs";Vpp0.VARYTYPE_VIEW_NVS = "v_nvs-v";Vpp0.VTX_VIEW_POS = "vtx_viewPos";Vpp0.VTX_VIEW_NV = "vtx_viewNV";Vpp0.VTX_OBJ_TO_VIEW_MAT = "vtx_objToViewMat";function Vqq5(){let m_uniqueName = "glsl";let m_codeStr = "";let m_uniformList = null;let m_varyList = null;let m_variableList = null;let m_nicknameListArr = null;let m_functionList = null;let m_attributeList = null;let m_textureList = null;let m_outputList = null;let m_definedList = null;let m_sharedVarList = null;let m_arrListIndex = 0;let m_shaderType = 0;this.Kxx1 = function(arrList){m_nicknameListArr = arrList[0];m_uniformList = arrList[1];m_varyList = arrList[2];m_variableList = arrList[3];m_functionList = arrList[4];m_arrListIndex = 4;m_shaderType = this.Kvv8();m_codeStr = "";if(m_shaderType == 0){++m_arrListIndex;m_attributeList = arrList[m_arrListIndex];}else{++m_arrListIndex;m_textureList = arrList[m_arrListIndex];++m_arrListIndex;m_outputList = arrList[m_arrListIndex];};++m_arrListIndex;m_definedList = arrList[m_arrListIndex];++m_arrListIndex;m_sharedVarList = arrList[m_arrListIndex];};this.Kuu0 = function(varNS,valueStr){m_definedList.push("#define "+varNS+" "+valueStr);};this.Kwww3 = function(precisionNS,varTypeNS){m_definedList.push("precision "+precisionNS+" "+varTypeNS+";");};this.Kii3 = function(typeNS,varNS,valueStr){m_definedList.push(typeNS+" "+varNS+" = "+valueStr+";");};this.Kvv8 = function(){return 0;};this.Kqqq5 = function(index){if(index < 0) index = 0;if(index > 7) index = 7;return this.Kttt6(Vjj5.UNIFORM_TEX_SAMPLER2D, Vjj5.UNIFORMNS_TEX_SAMPLER_LIST[index]);};this.Kyyy3 = function(index){if(index < 0) index = 0;if(index > 7) index = 7;return this.Kttt6(Vjj5.UNIFORM_TEX_SAMPLERCUBE, Vjj5.UNIFORMNS_TEX_SAMPLER_LIST[index]);};this.Kqqq2 = function(index){if(index < 0) index = 0;if(index > 7) index = 7;return this.Kttt6(Vjj5.UNIFORM_TEX_SAMPLER3D, Vjj5.UNIFORMNS_TEX_SAMPLER_LIST[index]);};this.Keee2 = function(index){if(index < 0) index = 0;if(index > 7) index = 7;return this.Kttt6("i"+Vjj5.UNIFORM_TEX_SAMPLER3D, Vjj5.UNIFORMNS_TEX_SAMPLER_LIST[index]);};this.Kttt6 = function(type,ns){let i = 0;let len = m_textureList.length;let cmd = null;while(i < len){cmd = m_textureList[i];if(cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{break;};};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_TEXTURE_UNIFORM;cmd.Kqq8 = type;cmd.KBB1 = ns;m_textureList.push( cmd );};return cmd;};this.KLL8 = function(type,ns,out_index){let i = 0;let len = m_outputList.length;let cmd = null;while(i < len){cmd = m_outputList[i];if(cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{break;};};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_FRAG_OUTPUT;cmd.Kqq8 = type;cmd.KBB1 = ns;if(out_index == undefined) out_index = 0;cmd.Kppp2 = out_index;m_outputList.push( cmd );};return cmd;};this.Khhh1 = function(type,ns,arrLength){if(arrLength != undefined || arrLength < 1) arrLength = 1;let i = 0;let pns = "";switch(ns){case Vff6.VBUF_VS_NS:i = 0;pns = Vff6.VBUF_VS_NS;break;case Vpp0.VARYTYPE_VS:i = 0;pns = Vff6.VBUF_VS_NS;break;case Vpp0.VARYTYPE_VIEW_VS:i = 0;pns = Vff6.VBUF_VS_NS;break;case Vff6.VBUF_UVS_NS:case Vpp0.VARYTYPE_UVS:i = 1;pns = Vff6.VBUF_UVS_NS;break;case Vff6.VBUF_NVS_NS:i = 2;pns = Vff6.VBUF_NVS_NS;break;case Vpp0.VARYTYPE_NVS:i = 2;pns = Vff6.VBUF_NVS_NS;break;case Vpp0.VARYTYPE_VIEW_NVS:i = 2;pns = Vff6.VBUF_NVS_NS;break;case Vff6.VBUF_CVS_NS:i = 3;pns = Vff6.VBUF_CVS_NS;break;case Vpp0.VARYTYPE_CVS:i = 3;pns = Vff6.VBUF_CVS_NS;break;case Vff6.VBUF_VS2_NS:i = 4;pns = Vff6.VBUF_VS2_NS;break;case Vff6.VBUF_UVS2_NS:i = 5;pns = Vff6.VBUF_UVS2_NS;break;case Vff6.VBUF_NVS2_NS:i = 6;pns = Vff6.VBUF_NVS2_NS;break;case Vff6.VBUF_CVS2_NS:i = 7;pns = Vff6.VBUF_CVS2_NS;break;default:return null;};let len = m_attributeList.length;let cmd = m_attributeList[i];if(cmd != null && cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{return cmd;};};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_ATTRIBUTE;cmd.Kqq8 = type;cmd.KBB1 = pns;cmd.Kmmm5 = ns;cmd.KEE1 = arrLength;m_attributeList[i] = cmd;};return cmd;};this.KLL4 = function(ns,functionBody){let i = 0;let len = m_functionList.length;let cmd = null;while(i < len){cmd = m_functionList[i];if(cmd.KBB1 == ns){break;};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_FUNCTION;cmd.KBB1 = ns;cmd.Kgg1 = functionBody;m_functionList.push( cmd );};return cmd;};this.Ktt5 = function(type,ns,arrLength){if(arrLength == undefined) arrLength = 1;if(arrLength < 1) arrLength = 1;let i = 0;let len = m_uniformList.length;let cmd = null;while(i < len){cmd = m_uniformList[i];if(cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{break;};};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_UNIFORM;cmd.Kqq8 = type;cmd.KBB1 = ns;cmd.KEE1 = arrLength;m_uniformList.push( cmd );};return cmd;};this.Kbbb8 = function(type,ns,out_component,in_component,nickname,arrLength){if(out_component == undefined) out_component = "";if(in_component == undefined) in_component = "";if(nickname == undefined) nickname = "";if(arrLength == undefined || arrLength < 1) arrLength = 1;let i = 0;let len = m_varyList.length;let cmd = null;while(i < len){cmd = m_varyList[i];if(cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{break;};};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_VARY_IN;cmd.Kqq8 = type;cmd.KBB1 = ns;cmd.Ktt2();cmd.Kmmm5 = ns;cmd.Kiii2 = nickname;cmd.Kwww8 = out_component;cmd.Knnn0 = in_component;cmd.KEE1 = arrLength;if(nickname != "") m_nicknameListArr.push(cmd);m_varyList.push( cmd );};return cmd;};this.Klll6 = function(type,ns,value,arrLength){if(value == undefined) value = "";if(arrLength == undefined || arrLength < 1) arrLength = 1;let i = 0;let len = m_variableList.length;let cmd = null;while(i < len){cmd = m_variableList[i];if(cmd.KBB1 == ns){if(type != cmd.Kqq8){Vee4("cmd type error!");}else{break;};};cmd = null;++i;};if(cmd == null){cmd = new Vpp0();cmd.Kqq5 = Vpp0.CMDTYPE_VARIABLE;cmd.Kqq8 = type;cmd.KBB1 = ns;cmd.Koo0 = value;cmd.KEE1 = arrLength;m_variableList.push( cmd );};return cmd;};this.Keee8 = function(codeStr){;m_codeStr += codeStr;};this.KFF4 = function(tp){};this.Kkk8 = function(){return m_codeStr;};this.Kttt0 = function(){return m_uniqueName;};this.Kff0 = function(){return "[Vqq5()]";};};function Vii2(){Vqq5.call(this);this.Kvv8 = function(){return 0;};this.KFF4 = function(tp){if(tp = undefined) tp = 0;this.Ktt5("mat4","u_objMat");this.Ktt5("mat4","u_viewMat");this.Ktt5("mat4","u_projMat");this.Khhh1("vec3","a_vs");var str = "\ngl_Position = u_projMat * u_viewMat * u_objMat * vec4(a_vs,1.0);";this.Keee8(str);};this.Kff0 = function(){return "[Vii2()]";};};function Vee7(){Vqq5.call(this);this.Kvv8 = function(){return 1;};this.KFF4 = function(tp){if(tp == undefined) tp = 0;this.KLL8("vec4","OutputColor");this.Ktt5("vec4","u_color");let str = "";if(tp == 0){str = "\nOutputColor = u_color;";}else{let tex = this.Kqqq5(0);let uvCmd = this.Kbbb8("vec2",Vpp0.VARYTYPE_UVS);str = "\nOutputColor = texture("+tex.Kxxx7()+", "+uvCmd.Kxxx7("xy")+") * u_color;";};this.Keee8(str);};this.Kff0 = function(){return "[Vee7()]";};};function Vjj3(){let m_uniqueName = "glsl";let m_codeStr = "";let m_definedList = [];let m_sharedVarList = [];let m_uniformList = [];let m_varyList = [];let m_variableList = [];let m_functionList = [];let m_attributeList = [null,null,null,null, null,null,null,null];;let m_textureList = [];let m_outputList = [];let m_nicknameListArr = [];let m_listArr = [];let m_blockList = [];let m_shaderType = 0;this.KFF1 = function(){m_listArr.push(m_nicknameListArr);m_listArr.push(m_uniformList);m_listArr.push(m_varyList);m_listArr.push(m_variableList);m_listArr.push(m_functionList);m_shaderType = this.Kvv8();if(m_shaderType == 0){m_listArr.push(m_attributeList);}else{m_listArr.push(m_textureList);m_listArr.push(m_outputList);};m_listArr.push(m_definedList);m_listArr.push(m_sharedVarList);};this.Kvv8 = function(){return 0;};this.Koo2 = function(){if(m_shaderType == 0){return m_outputList;}else{return null;};};this.Kppp1 = function(){return m_varyList;};this.KVV6 = function(block){if(m_listArr.length < 1) this.KFF1();if(block != null){block.Kxx1(m_listArr);m_blockList.push( block );};};this.Kss5 = function(){if(Vpp4()){return "precision mediump float;\n";}else{return "#version 300 es\nprecision mediump float;\n";};};this.KNN2 = function(texEnabled){if(texEnabled == undefined) texEnabled = false;let flag = texEnabled?1:0;m_codeStr = "";;m_codeStr += this.Kss5();let i = 0;let len = m_blockList.length;while(i < len){m_blockList[i].KFF4(flag);++i;};i = 0;len = m_definedList.length;while(i < len){m_codeStr += m_definedList[i]+"\n";
++i;
}
i = 0;
len = m_sharedVarList.length;
while(i < len)
{
m_codeStr += m_sharedVarList[i]+"\n";
++i;
}
this.buildHead();
;m_codeStr += "\nvoid main()\n{";this.buildMainBody();
;m_codeStr += "\n}\n";this.parseNickname();
}
this.parseNickname = function()
{
let i = 0;
let len = m_nicknameListArr.length;
let cmd = null;
let reg = null;
while(i < len)
{
cmd = m_nicknameListArr[i];
reg = new RegExp(cmd.Kiii2, "g");m_codeStr = m_codeStr.replace(reg, cmd.KBB1);++i;
}
if(!Vpp5() && m_outputList != null)
{
i = 0;
len = m_outputList.length;
while(i < len)
{
cmd = m_outputList[i];
reg = new RegExp(cmd.KBB1, "g");if(len == 1)
{
m_codeStr = m_codeStr.replace(reg, "gl_FragColor");}
++i;
}
}
}
this.KOO7 = function()
{
}
this.buildHeadAfter = function()
{
}
this.buildMainBodyBefore = function()
{
}
this.Kjjj7 = function()
{
}
this.buildHead = function()
{
this.KOO7();
let i = 0;
let len = 0;
let j = 0;
if(m_shaderType == 0)
{
i = 0;
len = m_attributeList.length;
j = 0;
while(i < len)
{
if(m_attributeList[i] != null)
{
m_attributeList[i].Kll0 = j;
m_attributeList[i].KFF4(len);
m_codeStr += m_attributeList[i].Kgg1;
++j;
}
++i;
}
}else
{
i = 0;
len = m_textureList.length;
while(i < len)
{
m_textureList[i].Kll0 = i;
m_textureList[i].KFF4(len);
m_codeStr += m_textureList[i].Kgg1;
++i;
}
}
i = 0;
len = m_uniformList.length;
while(i < len)
{
m_uniformList[i].Kll0 = i;
m_uniformList[i].KFF4(len);
m_codeStr += m_uniformList[i].Kgg1;
++i;
}
i = 0;
len = m_varyList.length;
while(i < len)
{
m_varyList[i].Kll0 = i;
m_varyList[i].Kgg1 = "";m_varyList[i].KFF4(len,m_shaderType);
m_codeStr += m_varyList[i].Kgg1;
++i;
}
i = 0;
len = m_functionList.length;
while(i < len)
{
m_functionList[i].Kll0 = i;
m_functionList[i].KFF4(len);
m_codeStr += m_functionList[i].Kgg1;
++i;
}
if(m_shaderType == 1)
{
i = 0;
len = m_outputList.length;
while(i < len)
{
m_outputList[i].Kll0 = i;
m_outputList[i].KFF4(len);
m_codeStr += m_outputList[i].Kgg1;
++i;
}
}
this.buildHeadAfter();
}
this.buildMainBody = function()
{
this.buildMainBodyBefore();
let i = 0;
let len = m_variableList.length;
while(i < len)
{
m_variableList[i].Kll0 = i;
m_variableList[i].KFF4(len);
m_codeStr += m_variableList[i].Kgg1;
++i;
}
i = 0;
len = m_blockList.length;
while(i < len)
{
m_codeStr += m_blockList[i].Kkk8();
++i;
}
this.Kjjj7();
}
this.Keee8 = function(str)
{
m_codeStr += str;
}
this.Kkk8 = function()
{
return m_codeStr;
}
this.Kttt0 = function()
{
return m_uniqueName;
}
this.Kff0 = function()
{
return "[Vjj3()]";}
this.Kvv1 = function(type,ns,out_component,in_component,arrLength)
{
if(out_component == undefined) out_component = "";if(in_component == undefined) in_component = "";if(arrLength == undefined || arrLength < 1) arrLength = 1;
let i = 0;
let len = m_varyList.length;
let cmd = null;
while(i < len)
{
cmd = m_varyList[i];
if(cmd.KBB1 == ns)
{
if(type != cmd.Kqq8)
{
throw Vee4("cmd type error!");}else
{
break;
}
}
cmd = null;
++i;
}
if(cmd == null)
{
cmd = new Vpp0();
cmd.Kqq5 = Vpp0.CMDTYPE_VARY_IN;
cmd.Kqq8 = type;
cmd.KBB1 = ns;
cmd.Kwww8 = out_component;
cmd.Knnn0 = in_component;
cmd.KEE1 = arrLength;
m_varyList.push( cmd );
}
return cmd;
}
this.Khhh1 = function(type,ns,arrLength)
{
if(arrLength == undefined || arrLength < 1) arrLength = 1;
var i = 0;
switch(ns)
{
case Vff6.VBUF_VS_NS:
i = 0;
break;
case Vff6.VBUF_UVS_NS:
i = 1;
break;
case Vff6.VBUF_NVS_NS:
i = 2;
break;
case Vff6.VBUF_CVS_NS:
i = 3;
break;
case Vff6.VBUF_VS2_NS:
i = 4;
break;
case Vff6.VBUF_UVS2_NS:
i = 5;
break;
case Vff6.VBUF_NVS2_NS:
i = 6;
break;
case Vff6.VBUF_CVS2_NS:
i = 7;
break;
default:
return null;
}
let len = m_attributeList.length;
let cmd = m_attributeList[i];
if(cmd != null && cmd.KBB1 == ns)
{
return cmd;
}
if(cmd == null)
{
cmd = new Vpp0();
cmd.Kqq5 = Vpp0.CMDTYPE_ATTRIBUTE;
cmd.Kqq8 = type;
cmd.KBB1 = ns;
cmd.KEE1 = arrLength;
m_attributeList[i] = cmd;
}
return cmd;
}
}
function Vee1(){Vjj3.call(this);let m_varyCode = "";let m_fragVaryList = null;this.Kvv8 = function(){return 0;};this.KQQ1 = function(fbody){m_fragVaryList = fbody.Kppp1();};this.Krr2 = function(){m_varyCode = "";let varyList = m_fragVaryList;let len = varyList.length;let i = 0;let cmd = null;while(i < len){cmd = varyList[i];this.Kyy1( cmd );++i;};};this.Kyy1 = function(pcmd){let cmd = null;switch(pcmd.Kmmm5){case Vpp0.VARYTYPE_UVS:this.Kvv7(pcmd);break;case Vpp0.VARYTYPE_VS:this.Kvv5(pcmd);break;case Vpp0.VARYTYPE_VIEW_VS:this.Kjj0(pcmd);break;case Vpp0.VARYTYPE_NVS:this.KXX5(pcmd);break;case Vpp0.VARYTYPE_VIEW_NVS:this.Kuu2(pcmd);break;default:this.KRR7(pcmd);};};this.Kvv5 = function(pcmd){let cmd = this.Khhh1(pcmd.Kqq8,Vff6.VBUF_VS_NS);this.Kvv1(pcmd.Kqq8,pcmd.KBB1);;m_varyCode += "\n" + pcmd.Kxxx7() + " = " + cmd.Kxxx7() + ";";};this.Kjj0 = function(pcmd){let cmd = this.Khhh1(pcmd.Kqq8,Vff6.VBUF_VS_NS);this.Kvv1(pcmd.Kqq8,pcmd.KBB1);;m_varyCode += "\n" + pcmd.Kxxx7() + " = "+Vpp0.VTX_VIEW_POS+".xyz;";};this.Kvv7 = function(pcmd){let cmd = this.Khhh1(pcmd.Kqq8,Vff6.VBUF_UVS_NS);this.Kvv1(pcmd.Kqq8,pcmd.KBB1);;m_varyCode += "\n" + pcmd.Kxxx7() + " = " + cmd.Kxxx7() + ";";};this.KXX5 = function(pcmd){let cmd = this.Khhh1(pcmd.Kqq8,Vff6.VBUF_NVS_NS);this.Kvv1(pcmd.Kqq8,pcmd.KBB1);;m_varyCode += "\n" + pcmd.Kxxx7() + " = " + cmd.Kxxx7() + ";";};this.Kuu2 = function(pcmd){let cmd = this.Khhh1(pcmd.Kqq8,Vff6.VBUF_NVS_NS);this.Kvv1(pcmd.Kqq8,pcmd.KBB1);;m_varyCode += "\n" + pcmd.Kxxx7() + " = "+Vpp0.VTX_VIEW_NV+".xyz;";};this.KRR7 = function(pcmd){this.Kvv1(pcmd.Kqq8,pcmd.KBB1,pcmd.Kwww8,pcmd.Knnn0,pcmd.KEE1);};this.KOO7 = function(){this.Krr2();};this.Kjjj7 = function(){this.Keee8(m_varyCode);};this.Kff0 = function(){return "[Vee1()]";};};function Vff3(){Vjj3.call( this );this.Kvv8 = function(){return 1;};this.Kff0 = function(){return "[Vff3()]";};};function Vkk4(pr,pg,pb,pa){if(pr == undefined)this.r = 1.0;else this.r = pr;if(pg == undefined)this.g = 1.0;else this.g = pg;if(pb == undefined)this.b = 1.0;else this.b = pb;if(pa == undefined)this.a = 1.0;else this.a = pa;this.Knn4 = true;this.Krrr0 = null;this.Kxxx6 = function(r,g,b){this.r = r;this.g = g;this.b = b;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};};this.Kxx0 = function(){if(this.Krrr0 == null) this.Krrr0 = [];this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;this.Krrr0[3] = this.a;};this.KRR0 = function(){if(this.Krrr0 == null) this.Krrr0 = [];this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};this.Koo5 = function(rgbUint24){this.r = ((rgbUint24 >> 16) & 0x0000ff)/255.0;this.g = ((rgbUint24 >> 8) & 0x0000ff)/255.0;this.b = (rgbUint24 & 0x0000ff)/255.0;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};};this.Koo5 = function(rgbUint24){this.r = ((rgbUint24 >> 16) & 0x0000ff)/255.0;this.g = ((rgbUint24 >> 8) & 0x0000ff)/255.0;this.b = (rgbUint24 & 0x0000ff)/255.0;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};};this.Kgg8 = function(r,g,b,a){this.r = r;this.g = g;this.b = b;this.a = a;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;this.Krrr0[3] = this.a;};};this.Kbb8 = function(c){this.r = c.r;this.g = c.g;this.b = c.b;this.a = c.a;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;this.Krrr0[3] = this.a;};};this.Kxxx5 = function(s){this.r *= s;this.g *= s;this.b *= s;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};};this.Koo8 = function(density){if(density == undefined) density = 1.0;this.r = Math.random() * density;this.g = Math.random() * density;this.b = Math.random() * density;if(this.Krrr0 != null){this.Krrr0[0] = this.r;this.Krrr0[1] = this.g;this.Krrr0[2] = this.b;};};this.Kkkk0 = function(density){if(density == undefined) density = 1.0;this.r = Math.random() * density;this.g = Math.random() * density;this.b = Math.random() * density;let d = Math.sqrt(this.r*this.r + this.g*this.g + this.b*this.b);if (d > Vjj2.MATH_MIN_POSITIVE){this.r = density * this.r/d;this.g = density * this.g/d;this.b = density * this.b/d;};};this.Kww1 = function(density){if(density == undefined) density = 1.0;let d = Math.sqrt(this.r*this.r + this.g*this.g + this.b*this.b);if (d > Vjj2.MATH_MIN_POSITIVE){this.r = density * this.r/d;this.g = density * this.g/d;this.b = density * this.b/d;};};this.KBBB3 = function(){let d = Math.sqrt(this.r*this.r + this.g*this.g + this.b*this.b);if (d > Vjj2.MATH_MIN_POSITIVE){this.r = this.r/d;this.g = this.g/d;this.b = this.b/d;};};this.Kff0 = function(){return "[Vkk4(r="+this.r+", g="+this.g+",b="+this.b+",a="+this.a+")]";};};function Voo0(){this.Kxx2 = null;this.KBB3 = 0;this.Kjj2 = null;this.KLL5 = null;this.Kmm5 = null;this.Krrr4 = null;this.KBB4 = true;this.Kqq0 = null;this.Krr0 = function(ns){if(this.Kjj2 != null){let list = this.Kjj2;let len = list.length;for(let i = 0; i < len; ++i){if(ns == list[i]){return this.Krrr4[i];};};};return null;};this.KLL6 = function(ns,dataRef){if(this.Kjj2 != null){let list = this.Kjj2;let len = list.length;for(let i = 0; i < len; ++i){if(ns == list[i]){this.Krrr4[i] = dataRef;break;};};};};this.Kaaa7 = function(probe){this.Kxx2 = [];this.Kmm5 = [];for(let i = 0; i < probe.Klll0; ++i){this.Kxx2.push( probe.Kttt1[i] );this.Kmm5.push( probe.Kmm5[i] );};uniformSize = probe.Klll0;};this.KTT6 = function(gl,shdp){if(Vpp5()){let len = this.Kjj2.length;let type = 0;let pns = "";for(let i = 0; i < len; ++i){pns = this.Kjj2[i];if(shdp.hasUniformByName(pns)){type = shdp.getUniformTypeByNS(pns);switch(type){case Vjj5.SHADER_MAT4:if(this.Kmm5 != null){gl.uniformMatrix4fv(shdp.KQQ5(pns), false, this.Krrr4[i],0,this.Kmm5[i] * 16);}else{gl.uniformMatrix4fv(shdp.KQQ5(pns), false, this.Krrr4[i]);};break;case Vjj5.SHADER_MAT3:gl.uniformMatrix3fv(shdp.KQQ5(pns), false, this.Krrr4[i],0,9);break;case Vjj5.SHADER_VEC4FV:gl.uniform4fv(shdp.KQQ5(pns), this.Krrr4[i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_VEC3FV:gl.uniform3fv(shdp.KQQ5(pns), this.Krrr4[i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_IVEC4FV:gl.uniform4iv(shdp.KQQ5(pns), this.Krrr4[i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_IVEC3FV:gl.uniform3iv(shdp.KQQ5(pns), this.Krrr4[i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_VEC4:let arr4 = this.Krrr4[i];gl.uniform4f(shdp.KQQ5(pns), arr4[0], arr4[1], arr4[2], arr4[3]);break;case Vjj5.SHADER_VEC3:let arr3 = this.Krrr4[i];gl.uniform3f(shdp.KQQ5(pns), arr3[0], arr3[1], arr3[2]);break;case Vjj5.SHADER_VEC2:let arr2 = this.Krrr4[i];gl.uniform2f(shdp.KQQ5(pns), arr2[0], arr2[1]);break;case Vjj5.SHADER_IVEC2:let iarr2 = this.Krrr4[i];gl.uniform2i(shdp.KQQ5(pns), iarr2[0], iarr2[1]);break;case Vjj5.SHADER_IVEC3:let iarr3 = this.Krrr4[i];gl.uniform3i(shdp.KQQ5(pns), iarr3[0], iarr3[1], iarr3[2]);break;case Vjj5.SHADER_IVEC4:let iarr4 = this.Krrr4[i];gl.uniform4i(shdp.KQQ5(pns), iarr4[0], iarr4[1], iarr4[2], iarr4[3]);break;};};};};};this.use = function(gl){let i = 0;if(Vpp4()){if(this.KBB4){for(; i < this.KBB3; ++i){switch(this.Kxx2[i]){case Vjj5.SHADER_MAT4:gl.uniformMatrix4fv(this.KLL5[i], false, this.Krrr4[i]);break;case Vjj5.SHADER_MAT3:gl.uniformMatrix3fv(this.KLL5[i], false, this.Krrr4[i]);break;case Vjj5.SHADER_VEC4FV:gl.uniform4fv(this.KLL5[i], this.Krrr4[i], this.Kmm5[i]);break;case Vjj5.SHADER_VEC3FV:gl.uniform3fv(this.KLL5[i], this.Krrr4[i], this.Kmm5[i]);break;case Vjj5.SHADER_VEC4:let arr4 = this.Krrr4[i];gl.uniform4f(this.KLL5[i], arr4[0], arr4[1], arr4[2], arr4[3]);break;case Vjj5.SHADER_VEC3:let arr3 = this.Krrr4[i];gl.uniform3f(this.KLL5[i], arr3[0], arr3[1], arr3[2]);break;case Vjj5.SHADER_VEC2:let arr2 = this.Krrr4[i];gl.uniform2f(this.KLL5[i], arr2[0], arr2[1]);break;};};};}else{if(this.KBB4){for(; i < this.KBB3; ++i){switch(this.Kxx2[i]){case Vjj5.SHADER_MAT4:if(this.Kmm5 != null){gl.uniformMatrix4fv(this.KLL5[i], false, this.Krrr4[i],0,this.Kmm5[i] * 16);}else{gl.uniformMatrix4fv(this.KLL5[i], false, this.Krrr4[i]);};break;case Vjj5.SHADER_MAT3:gl.uniformMatrix3fv(this.KLL5[i], false, this.Krrr4[i],0,9);break;case Vjj5.SHADER_VEC4FV:gl.uniform4fv(this.KLL5[i], this.Krrr4[i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_VEC3FV:gl.uniform3fv(this.KLL5[i], this.Krrr4[i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_IVEC4FV:gl.uniform4iv(this.KLL5[i], this.Krrr4[i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_IVEC3FV:gl.uniform3iv(this.KLL5[i], this.Krrr4[i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_VEC4:let arr4 = this.Krrr4[i];gl.uniform4f(this.KLL5[i], arr4[0], arr4[1], arr4[2], arr4[3]);break;case Vjj5.SHADER_VEC3:let arr3 = this.Krrr4[i];gl.uniform3f(this.KLL5[i], arr3[0], arr3[1], arr3[2]);break;case Vjj5.SHADER_VEC2:let arr2 = this.Krrr4[i];gl.uniform2f(this.KLL5[i], arr2[0], arr2[1]);break;case Vjj5.SHADER_IVEC2:let iarr2 = this.Krrr4[i];gl.uniform2i(locations[i], iarr2[0], iarr2[1]);break;case Vjj5.SHADER_IVEC3:let iarr3 = this.Krrr4[i];gl.uniform3i(locations[i], iarr3[0], iarr3[1], iarr3[2]);break;case Vjj5.SHADER_IVEC4:let iarr4 = this.Krrr4[i];gl.uniform4i(locations[i], iarr4[0], iarr4[1], iarr4[2], iarr4[3]);break;};};};};this.Kaaa0();};this.Kaaa0 = function(){};this.KNN3 = function(){let i = 0;let len = this.Krrr4.length;for(; i < len; ++i){this.Krrr4[i] = null;};this.Krrr4 = null;this.Kxx2 = null;this.KLL5 = null;this.Kmm5 = null;};};function Vhh0(){this.Kuu1 = 0;this.KAA0 = 0;this.Kxx2 = null;this.Kpp8 = null;this.Kjj2 = null;this.KLL5 = null;this.Kmm5 = null;this.KBB4 = false;this.rst = 0;this.Kqq0 = null;this.Kaaa7 = function(probe){this.Kxx2 = [];this.Kmm5 = [];this.Kuu1 = probe.Knnn6;this.KAA0 = probe.Klll0;for(let i = 0; i < probe.Klll0; ++i){this.Kxx2.push( probe.Kttt1[i] );this.Kmm5.push( probe.Kmm5[i] );};};this.use = function(gl){if(this.KBB4 || this.rst != GlobalUniformSlot.KJJ1[this.Kuu1]){this.rst = GlobalUniformSlot.KJJ1[this.Kuu1];let i = 0;if(Vpp4()){for(; i < this.KAA0; ++i){switch(this.Kxx2[i]){case Vjj5.SHADER_MAT4:gl.uniformMatrix4fv(this.KLL5[i], false, GlobalUniformSlot.Krrr4[this.Kuu1 + i]);break;case Vjj5.SHADER_MAT3:gl.uniformMatrix3fv(this.KLL5[i], false, GlobalUniformSlot.Krrr4[this.Kuu1 + i]);break;case Vjj5.SHADER_VEC4FV:gl.uniform4fv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], this.Kmm5[i]);break;case Vjj5.SHADER_VEC3FV:gl.uniform3fv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], this.Kmm5[i]);break;case Vjj5.SHADER_VEC4:let arr4 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform4f(this.KLL5[i], arr4[0], arr4[1], arr4[2], arr4[3]);break;case Vjj5.SHADER_VEC3:let arr3 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform3f(this.KLL5[i], arr3[0], arr3[1], arr3[2]);break;case Vjj5.SHADER_VEC2:let arr2 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform2f(this.KLL5[i], arr2[0], arr2[1]);break;};};}else{for(; i < this.KAA0; ++i){switch(this.Kxx2[i]){case Vjj5.SHADER_MAT4:if(this.Kmm5 != null){gl.uniformMatrix4fv(this.KLL5[i], false, GlobalUniformSlot.Krrr4[this.Kuu1 + i],0,this.Kmm5[i] * 16);}else{gl.uniformMatrix4fv(this.KLL5[i], false, GlobalUniformSlot.Krrr4[this.Kuu1 + i]);};break;case Vjj5.SHADER_MAT3:gl.uniformMatrix3fv(this.KLL5[i], false, GlobalUniformSlot.Krrr4[this.Kuu1 + i]);break;case Vjj5.SHADER_VEC4FV:gl.uniform4fv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_VEC3FV:gl.uniform3fv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_IVEC4FV:gl.uniform4iv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], 0, this.Kmm5[i] * 4);break;case Vjj5.SHADER_IVEC3FV:gl.uniform3iv(this.KLL5[i], GlobalUniformSlot.Krrr4[this.Kuu1 + i], 0, this.Kmm5[i] * 3);break;case Vjj5.SHADER_VEC4:let arr4 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform4f(this.KLL5[i], arr4[0], arr4[1], arr4[2], arr4[3]);break;case Vjj5.SHADER_VEC3:let arr3 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform3f(this.KLL5[i], arr3[0], arr3[1], arr3[2]);break;case Vjj5.SHADER_VEC2:let arr2 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform2f(this.KLL5[i], arr2[0], arr2[1]);break;case Vjj5.SHADER_IVEC2:let iarr2 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform2i(locations[i], iarr2[0], iarr2[1]);break;case Vjj5.SHADER_IVEC3:let iarr3 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform3i(locations[i], iarr3[0], iarr3[1], iarr3[2]);break;case Vjj5.SHADER_IVEC4:let iarr4 = GlobalUniformSlot.Krrr4[this.Kuu1 + i];gl.uniform4i(locations[i], iarr4[0], iarr4[1], iarr4[2], iarr4[3]);break;};};};};};this.KNN3 = function(){this.Kxx2 =  null;this.Kmm5 = null;this.Kuu1 = -1;this.KAA0 = 0;};};function Vqq4(){let m_vshdIDNS = "";let m_fshdIDNS = "";let m_uniqueName = "BaseShader";let m_texEnabled = false;this.KFF1 = function(texEnabled){m_fshdIDNS = "";if(texEnabled == undefined) texEnabled = false;if(Vqq4.___s_csBuf != null){Vqq4.___s_csBuf.KFF1(texEnabled);}else{m_texEnabled = texEnabled;if(m_texEnabled){m_fshdIDNS = "_tex";};};};this.Knnn1 = function(){if(Vqq4.___s_csBuf != null) Vqq4.___s_csBuf.Knnn1();};this.Krr8 = function(){if(Vqq4.___s_csBuf != null) return Vqq4.___s_csBuf.Krr8();let codeStr = "";if(m_texEnabled){codeStr ="#version 300 es\n";;codeStr+="precision mediump float;\n";;codeStr+="uniform sampler2D u_sampler0;\n";;codeStr+="uniform vec4 u_color;\n";;codeStr+="out vec4 FragColor;\n";;codeStr+="in vec2 v_uvs;\n";;codeStr+="void main(){\n";;codeStr+="    FragColor = u_color * texture(u_sampler0, v_uvs);\n";;codeStr+="}";}else{codeStr ="#version 300 es\n";;codeStr+="precision mediump float;\n";;codeStr+="uniform vec4 u_color;\n";;codeStr+="out vec4 FragColor;\n";;codeStr+="void main(){\n";;codeStr+="    FragColor = u_color;\n";;codeStr+="}";};return codeStr;};this.KQQ8 = function(){if(Vqq4.___s_csBuf != null) return Vqq4.___s_csBuf.KQQ8();let codeStr = "";if(m_texEnabled){;codeStr +="#version 300 es\n";;codeStr+="precision mediump float;\n";;codeStr+="layout(location = 0) in vec3 a_vs;\n";;codeStr+="layout(location = 1) in vec2 a_uvs;\n";;codeStr+="uniform mat4 u_objMat;\n";;codeStr+="uniform mat4 u_viewMat;\n";;codeStr+="uniform mat4 u_projMat;\n";;codeStr+="out vec2 v_uvs;\n";;codeStr+="void main(){\n";;codeStr+="    gl_Position = u_projMat * u_viewMat * u_objMat * vec4(a_vs,1.0);\n";;codeStr+="    v_uvs = a_uvs;\n";;codeStr+="}";}else{codeStr ="#version 300 es\n";;codeStr+="precision mediump float;\n";;codeStr+="layout(location = 0) in vec3 a_vs;\n";;codeStr+="uniform mat4 u_objMat;\n";;codeStr+="uniform mat4 u_viewMat;\n";;codeStr+="uniform mat4 u_projMat;\n";;codeStr+="void main(){\n";;codeStr+="    gl_Position = u_projMat * u_viewMat * u_objMat * vec4(a_vs,1.0);\n";;codeStr+="}";};return codeStr;};this.Kttt0 = function(){if(Vqq4.___s_csBuf != null) return Vqq4.___s_csBuf.Kttt0();return m_uniqueName+m_vshdIDNS +m_fshdIDNS;};this.Kff0 = function(){return "[Vqq4()]";};};Vqq4.___s_csBuf = null;Vqq4.useShaderBuffer = function(buf){Vqq4.___s_csBuf = buf;};function Vll2(){this.Kqq8 = -1;this.KHH2 = "";this.KBB1 = "";this.Khh0 = true;this.Klll1 = function(codeStr){let SEMICOLON = ";";let SPACE = " ";let i = codeStr.indexOf(SEMICOLON);if(i > 0)codeStr = codeStr.slice(0,i);i = codeStr.indexOf(SPACE);let j = 0;let str = "";let arr = [];while( i>=0 ){str = codeStr.slice(j,i);if(str.length > 0){arr.push(str);};j = i+1;i = codeStr.indexOf(SPACE,j);};str = codeStr.slice(j,codeStr.length);if(str.length > 0){arr.push(str);};if(this.Khh0){this.KHH2 = arr[arr.length - 2];this.KBB1 = arr[arr.length - 1];}else{this.KHH2 = arr[arr.length - 2];this.KBB1 = arr[arr.length - 1];};this.Kqq8 = Vjj5.getTypeByTypeNS(this.KHH2);};};function Vaa5(){this.Kqq8 = -1;this.KHH2 = "";this.KBB1 = "";this.KII7 = false;this.KII6 = false;this.Klll2 = null;this.Klll1 = function(codeStr){let SEMICOLON = ";";let SPACE = " ";let i = codeStr.indexOf(SEMICOLON);if(i > 0)codeStr = codeStr.slice(0,i);i = codeStr.indexOf(SPACE);let j = 0;let str = "";let arr = [];while( i>=0 ){str = codeStr.slice(j,i);if(str.length > 0){arr.push(str);};j = i+1;i = codeStr.indexOf(SPACE,j);};str = codeStr.slice(j,codeStr.length);if(str.length > 0){arr.push(str);};this.KHH2 = arr[arr.length - 2];this.KBB1 = arr[arr.length - 1];i = this.KBB1.indexOf("[");if(i > 0){this.KBB1 = this.KBB1.slice(0,i);;this.KHH2 +="[]";};this.Kqq8 = Vjj5.getTypeByTypeNS(this.KHH2);this.KII6 = this.Kqq8 == Vjj5.SHADER_SAMPLER2D || this.Kqq8 == Vjj5.SHADER_SAMPLERCUBE || this.Kqq8 == Vjj5.SHADER_SAMPLER3D;};};function Vii4(){let m_useTex = false;this.KUU7 = null;this.Kjj2 = null;this.Kyyy0 = "";this.KXX6 = null;this.KLL1 = null;this.KSS7 = 0;this.Kvvv0 = function(){m_useTex = false;this.KUU7 = null;this.Kjj2 = null;this.Kyyy0 = "";this.KXX6 = null;this.KLL1 = null;this.KSS7 = 0;};this.KDD8 = function(vshdsrc){let semicolonReg = new RegExp(";", "g");vshdsrc = vshdsrc.replace(semicolonReg, ";\n");vshdsrc = vshdsrc.replace("{", "{\n");vshdsrc = vshdsrc.replace("}", "\n}");let ENTER = "\n";let i = vshdsrc.indexOf(ENTER);let j = 0;let codeList = [];let str = "";let subStr = "";let regSpace = new RegExp(" ", "g");while( i>=0 ){str = vshdsrc.slice(j,i);if(str.length > 0){subStr = subStr.replace(regSpace, "");if(subStr.indexOf("//") != 0){codeList.push(str);};};j = i+1;i = vshdsrc.indexOf(ENTER,j);};str = vshdsrc.slice(j,vshdsrc.length);if(str.length > 0){subStr = subStr.replace(regSpace, "");if(subStr.indexOf("//") != 0){codeList.push(str);};};let UNIFORM = "uniform ";let len = codeList.length;let attri = null;this.KXX6 = [];this.KUU7 = [];var uniform = null;if(this.KLL1 == null)this.KLL1 = [];if(this.Kjj2 == null)this.Kjj2 = [];i = 0;let flagLayout = false;let flagAttri = false;while(i < len){str = codeList[i];flagLayout = str.indexOf( "layout" ) >= 0;flagAttri = str.indexOf( "attribute " ) >= 0;if( flagLayout || flagAttri ){attri = new Vll2();attri.Khh0 = flagLayout;attri.Klll1(str);this.KXX6.push(attri);this.KUU7.push( attri.KBB1 );}else if( str.indexOf( UNIFORM ) >= 0 ){uniform = new Vaa5();uniform.Klll1(str);this.KLL1.push(uniform);this.Kjj2.push( uniform.KBB1 );;this.Kyyy0 += uniform.KBB1 + " ";};++i;};};this.Kuu6 = function(fshdsrc){let semicolonReg = new RegExp(";", "g");fshdsrc = fshdsrc.replace(semicolonReg, ";\n");fshdsrc = fshdsrc.replace("{", "{\n");fshdsrc = fshdsrc.replace("}", "\n}");let ENTER = "\n";let i = fshdsrc.indexOf(ENTER);let j = 0;let codeList = [];let str = "";let subStr = "";let regSpace = new RegExp(" ", "g");while( i>=0 ){str = fshdsrc.slice(j,i);if(str.length > 0){subStr = subStr.replace(regSpace, "");if(subStr.indexOf("//") != 0){codeList.push(str);};};j = i+1;i = fshdsrc.indexOf(ENTER,j);};str = fshdsrc.slice(j,fshdsrc.length);if(str.length > 0){subStr = subStr.replace(regSpace, "");if(subStr.indexOf("//") != 0){codeList.push(str);};};let UNIFORM = "uniform ";let len = codeList.length;let uniform = null;if(this.KLL1 == null)this.KLL1 = [];i = 0;while(i < len){str = codeList[i];if( str.indexOf( UNIFORM ) >= 0 && this.Kyyy0.indexOf( UNIFORM ) < 0){uniform = new Vaa5();uniform.Klll1(str);this.KLL1.push(uniform);;this.Kyyy0 += uniform.KBB1 + " ";if(uniform.KII6){this.KSS7 ++;}else{};};++i;};};};function Vdd2(){let m_gl = null;let m_texTotal = 0;let m_useTex = false;this.KUU7 = null;let m_aLocations = null;let m_aLocationTypes = null;let m_uLocations = null;let m_texLocations = [null,null,null,null, null,null,null,null];let m_attribLIndexList = [-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1];this.KXX6 = null;this.KLL1 = null;let Vff0 = {};let m_haveCommonUniform = false;this.KFF1 = function(unique_ns,vshdsrc,fshdSrc){if(Vpp4()){var regTex = new RegExp(/texture\(/, "g");fshdSrc = fshdSrc.replace(regTex, "texture2D(");};Vdd2.___s_codeParser.Kvvv0();Vdd2.___s_codeParser.KDD8(vshdsrc);Vdd2.___s_codeParser.Kuu6(fshdSrc);this.KXX6 = Vdd2.___s_codeParser.KXX6;this.KLL1 = Vdd2.___s_codeParser.KLL1;this.KUU7 = Vdd2.___s_codeParser.KUU7;m_texTotal = Vdd2.___s_codeParser.KSS7;m_useTex = m_texTotal > 0;m_haveCommonUniform = m_texTotal < this.KLL1.length;m_vshdSrc = vshdsrc;m_fshdSrc = fshdSrc;m_shdUniqueName = unique_ns;if(SHADERCODE_TRACE){};};this.useTexLocation = function(){for(let  i = 0; i < m_texTotal; ++i){if(m_texLocations[i] != null){m_gl.uniform1i(m_texLocations[i], i);}else{m_texLocations[i] = m_gl.getUniformLocation(m_program, Vjj5.UNIFORMNS_TEX_SAMPLER_LIST[ i ]);m_gl.uniform1i(m_texLocations[i], i);};};};this.haveTexture = function(){return m_useTex;};this.dataUniformEnabled = false;this.createLocations = function(){let i = 0;let len = 0;if(this.KUU7 != null && this.KUU7.length > 0){if(m_aLocations == null){m_aLocations = [];m_aLocationTypes = [];len = this.KUU7.length;let type = 0;while(i < len){let altI = m_gl.getAttribLocation(m_program, this.KUU7[i]);m_aLocations.push( altI );type = Vff6.getVBufAttributeTypeByNS(this.KUU7[i]);m_aLocationTypes.push( type );m_attribLIndexList[ type ] = altI;++i;};if(SHADERCODE_TRACE){};if(m_aLocations[0] > -1){this.dataUniformEnabled = true;};};};if(m_haveCommonUniform){if(m_uLocations == null){m_uLocations = [];len = this.KLL1.length;i = 0;let j = 0;let ul = null;let uns = "";while(i < len){if(!this.KLL1[i].KII6){uns = this.KLL1[i].KBB1;ul = m_gl.getUniformLocation(m_program, uns);if(SHADERCODE_TRACE){};if(ul != null){this.KLL1[i].Klll2 = ul;Vff0[ uns ] = this.KLL1[i];m_uLocations.push(ul);this.dataUniformEnabled = true;}else{if(SHADERCODE_TRACE){};};};++i;};};};};this.getLocationTypeByIndex = function(index){return m_aLocationTypes[index];};let m_attrid = 0;let m_attridIndex = 0;this.vertexAttribPointerType = function(attribType,size, type, normalized, stride, offset){m_attrid = m_attribLIndexList[attribType];if(m_attrid > -1){m_gl.enableVertexAttribArray( m_attrid );m_gl.vertexAttribPointer(m_attrid,size,type,normalized,stride,offset);};};this.vertexAttribPointerAt = function(i,size, type, normalized, stride, offset){m_attridIndex = i;m_attrid = m_aLocations[i];if(m_attrid > -1){m_gl.enableVertexAttribArray( m_attrid );m_gl.vertexAttribPointer(m_attrid,size,type,normalized,stride,offset);};};this.vertexAttribPointerNext = function(size, type, normalized, stride, offset){m_attrid = m_aLocations[m_attridIndex];if(m_attrid > -1){m_gl.enableVertexAttribArray( m_attrid );m_gl.vertexAttribPointer(m_attrid,size,type,normalized,stride,offset);};m_attridIndex ++;};this.vertexAttribPointerFirst = function(size, type, normalized, stride, offset){m_attridIndex = 1;m_attrid = m_aLocations[0];if(m_attrid > -1){m_gl.enableVertexAttribArray( m_attrid );m_gl.vertexAttribPointer(m_attrid,size,type,normalized,stride,offset);};};let m_uLc = null;let m_uIndex = 0;this.Kyyy2 = function(i){m_uIndex = i+1;return m_uLocations[i];};this.getUniformLocationNext = function(){m_uLc = m_uLocations[m_uIndex++];return m_uLc;};this.getUniformLocationFirst = function(){m_uIndex = 1;return m_uLocations[0];};this.KQQ5 = function(nameString){return Vff0[ nameString ].Klll2;};this.getUniformTypeNameByNS = function(nameString){return Vff0[ nameString ].KHH2;};this.getUniformTypeByNS = function(nameString){return Vff0[ nameString ].Kqq8;};this.hasUniformByName = function(nameString){return !(Vff0[ nameString ] == undefined || Vff0[ nameString ] == null);};this.KBB1 = "Vdd2";this.uid = -1;let m_vshdSrc = "";let m_fshdSrc = "";let m_shdUniqueName = "";let m_program = null;function Vee0( vshd_str, fshd_str ){let vtxShd = Voo5(m_gl.VERTEX_SHADER, vshd_str);let frgShd = Voo5(m_gl.FRAGMENT_SHADER, fshd_str);let shdProgram = m_gl.createProgram();m_gl.attachShader(shdProgram, vtxShd);m_gl.attachShader(shdProgram, frgShd);m_gl.linkProgram(shdProgram);if (!m_gl.getProgramParameter(shdProgram, m_gl.LINK_STATUS)){if(SHADERCODE_TRACE){};return null;};return shdProgram;};function Voo5(type, source){let shader = m_gl.createShader(type);m_gl.shaderSource(shader, source);m_gl.compileShader(shader);if (!m_gl.getShaderParameter(shader, m_gl.COMPILE_STATUS)){if(SHADERCODE_TRACE){};m_gl.deleteShader(shader);return null;};return shader;};this.Kttt0 = function(){return m_shdUniqueName;};this.KKK3 = function(){return m_program != null;};this.Kjj6 = function(gl){if(m_program == null){m_gl = gl;m_program = Vee0(m_vshdSrc,m_fshdSrc);if(null != m_program) this.createLocations();if(SHADERCODE_TRACE){};};};this.Kff0 = function(){return "[Vdd2("+m_shdUniqueName+")]";};this.Kppp5 = function(){return m_program;};this.KNN3 = function(){m_aLocations = null;m_texLocations[0] = null;m_texLocations[1] = null;m_texLocations[2] = null;m_texLocations[3] = null;m_texLocations[4] = null;m_texLocations[5] = null;m_texLocations[6] = null;m_texLocations[7] = null;if(m_program != null){m_gl.deleteProgram(m_program);m_program = null;};m_gl = null;};};Vdd2.___s_codeParser = new Vii4();Vdd2.___voxShadersDict = new Map();Vdd2.___UID = 0;Vdd2.___programList = [];Vdd2.Create = function(unique_name_str,vshdsrc,fshdSrc){if(unique_name_str ==undefined){return null;};if((typeof unique_name_str) == "string"){if(Vdd2.___voxShadersDict.has(unique_name_str)){return Vdd2.___voxShadersDict.get(unique_name_str);};var p = new Vdd2();p.KFF1(unique_name_str, vshdsrc,fshdSrc);p.KBB1 = unique_name_str;p.uid = Vdd2.___UID;Vdd2.___UID ++;Vdd2.___programList[p.uid] = p;Vdd2.___voxShadersDict.set(unique_name_str,p);if(SHADERCODE_TRACE){console.log("Vdd2.Create() a new Vdd2: ",p);};return p;};return null;};Vdd2.Find = function(unique_name_str){if(Vdd2.___voxShadersDict.has(unique_name_str)){return Vdd2.___voxShadersDict.get(unique_name_str);};return null;};Vdd2.Reset = function(type){};function Vcc7(){this.KUU5 = false;this.Kwww0 = null;this.Krrr2 = null;this.KFF3 = function(shdCode_uniqueName){if(this.KYY0() == null){var program = Vdd2.Find( shdCode_uniqueName );if(program != null) this.Ksss3(program);};return this.KYY0() != null;};this.KFF1 = function(shdCode_uniqueName,shdCode_vshdCode,shdCode_fshdCode){if(this.KYY0() == null){Vqq4.useShaderBuffer(null);var program = Vdd2.Find( shdCode_uniqueName );if(null == program){program = Vdd2.Create(shdCode_uniqueName, shdCode_vshdCode, shdCode_fshdCode);};this.Ksss3(program);};};this.KUU0 = function(){return null;};this.Ksss5 = function(texEnabled){if(this.KYY0() == null){if(texEnabled == undefined) texEnabled = false;if(Vcc7.___s_codeBuffer == null){Vcc7.___s_codeBuffer = new Vqq4();};Vqq4.useShaderBuffer( this.KUU0() );Vcc7.___s_codeBuffer.KFF1(texEnabled);var shdCode_uniqueName = Vcc7.___s_codeBuffer.Kttt0();var program = Vdd2.Find( shdCode_uniqueName );if(null == program){Vcc7.___s_codeBuffer.Knnn1();var shdCode_fshdCode = Vcc7.___s_codeBuffer.Krr8();var shdCode_vshdCode = Vcc7.___s_codeBuffer.KQQ8();program = Vdd2.Create(shdCode_uniqueName, shdCode_vshdCode, shdCode_fshdCode);};Vqq4.useShaderBuffer(null);this.Ksss3(program);};};let m_spg = null;this.Ksss3 = function(p){ m_spg = p;};this.KYY0 = function(){return m_spg;};this.Kppp5 = function(){return m_spg.Kppp5();};let m_texList = null;let m_texListLen = 0;this.Kwww7 = function(texList){m_texList = texList;m_texListLen = texList.length;m_tex = null;};this.KII2 = function(){return m_texList;};let m_tex = null;this.KJJ3 = function(p){m_tex = p;};this.KMM4 = function(){return m_tex;};this.Kww5 = function(){if(m_tex != null){if(!m_tex.KKK7()){return false;};let nextTex = m_tex.Kqq0;let ntboo = true;while(nextTex != null){if(!nextTex.KKK7()){ntboo = false;break;};nextTex = nextTex.Kqq0;if(nextTex == m_tex){ntboo = false;Vee4("Vcc7::texDataEnabled(), nextTex == tex, Error!");abort();break;};};return ntboo;};if(m_texList != null){let boo = true;for(let i = 0; i < m_texListLen; ++i){if(!m_texList[i].KKK7()){boo = false;break;};};return boo;};return false;};this.Kvvv2 = function(camera){var cuniform = new Vhh0();cuniform.KLL5 = [this.Kyyy2(1),this.Kyyy2(2)];cuniform.Kaaa7(camera.Klll7);return cuniform;};this.KEE6 = function(ro){var oum = new Voo0();oum.Kxx2 = [Vjj5.SHADER_MAT4];oum.KBB3 = 1;oum.KLL5 = [this.Kyyy2(0)];oum.Krrr4 = [ro.KQQ0()];return oum;};this.Kyyy2 = function(i){return m_spg.Kyyy2(i);};this.KQQ5 = function(nameString){return m_spg.KQQ5(nameString);};this.Kzzz3 = function(){return m_spg.haveTexture();};this.Kll4 = function(){if(null != m_spg){let len = m_spg.KXX6.length;let i = 0;let type = 0;let layoutBit = 0x0;while(i < len){type = Vff6.getVBufTypeByNS(m_spg.KXX6[i].KBB1);switch(type){case Vff6.VBUF_VS:layoutBit |= Vbb4.BIT_ONE_0;break;case Vff6.VBUF_UVS:layoutBit |= Vbb4.BIT_ONE_1;break;case Vff6.VBUF_NVS:layoutBit |= Vbb4.BIT_ONE_2;break;case Vff6.VBUF_CVS:layoutBit |= Vbb4.BIT_ONE_3;break;case Vff6.VBUF_VS2:layoutBit |= Vbb4.BIT_ONE_4;break;case Vff6.VBUF_UVS2:layoutBit |= Vbb4.BIT_ONE_5;break;case Vff6.VBUF_NVS2:layoutBit |= Vbb4.BIT_ONE_6;break;case Vff6.VBUF_CVS2:layoutBit |= Vbb4.BIT_ONE_7;break;default:};++i;};return layoutBit;};return 0x0;};this.KNN3 = function(){m_spg = null;m_tex = null;m_texList = null;};this.Kff0 = function(){return "[Vcc7()]";};};Vcc7.___s_codeBuffer = null;Vcc7.FindShader = function(unique_name_str){return Vdd2.Find(unique_name_str);};let DISP_OBJ_ID = 1;function Voo2(){let m_obj_id = DISP_OBJ_ID++;this.KKK5 = function(){return m_obj_id;};let m_autoUpdateClosed = false;let m_updateEnabled = true;this.KBB1 = "Voo2";this.Kvvv4 = new Voo7();this.KNN6 = new Voo7();this.KBBB4 = true;this.Koo7 = true;let m_invMatEnabled = false;let m_oMatEnabled = false;this.Kxx4 = Vkk7.BACK;this.Kyyy6 = Vnn8.NORMAL;this.Kuuu8 = Vcc1.RENDER_OPAQUE;this.KTT4 = 0;this.Kaaa6 = 0;this.KGG0 = 0;this.Kjjj1 = function(boo){if(boo == undefined) boo = true;m_autoUpdateClosed = !boo;};let m_action = null;this.Kss3 = function(a){if(a == undefined)return;if(m_action != null && a == m_action) m_action.Krr4(null);m_action = null;if(a != null){m_action = a;m_action.Krr4(this);};};this.Ktt0 = function(){return m_action;};this.Kooo0 = function(pr,pg,pb){};this.KXX2 = false;this.Kpp6 = null;this.Kmm1 = function(type,stageMouseX,stageMouseY,lPos,wPos){if(this.Kpp6 != null){this.Kpp6(this,type,stageMouseX,stageMouseY,lPos,wPos);};};var m_pos = new Vqq0();this.Kfff2 = function(){return m_pos.x;};this.Kfff3 = function(){return m_pos.y;};this.Kfff4 = function(){return m_pos.z;};this.KHH8 = function(p){m_pos.x = p;this.KGG0 = 1;m_updateEnabled = true;};this.Kiii3 = function(p){m_pos.y = p;this.KGG0 = 1;m_updateEnabled = true;};this.Kiii4 = function(p){m_pos.z = p;this.KGG0 = 1;m_updateEnabled = true;};this.Kiii7 = function(px,py,pz){m_pos.x = px;m_pos.y = py;m_pos.z = pz;m_updateEnabled = true;this.KGG0 = 1;};this.KFF2 = function(pv){m_pos.x = pv.x;m_pos.y = pv.y;m_pos.z = pv.z;m_updateEnabled = true;this.KGG0 = 1;};this.Kss7 = function(pv){pv.x = m_pos.x;pv.y = m_pos.y;pv.z = m_pos.z;};var m_rx=0,m_ry=0,m_rz=0;this.KCC8 = function(){return m_rx;};this.KDD0 = function(){return m_ry;};this.KCC7 = function(){return m_rz;};this.Kccc3 = function(degrees){m_rx = degrees;this.KGG0 = 1;};this.Kccc4 = function(degrees){m_ry = degrees;this.KGG0 = 1;};this.Kccc2 = function(degrees){m_rz = degrees;this.KGG0 = 1;};this.Kgg5 = function(rx,ry,rz){m_rx = rx;m_ry = ry;m_rz = rz;m_updateEnabled = true;this.KGG0 = 1;};var m_sx=1.0,m_sy=1.0,m_sz=1.0;this.Kggg2 = function(){return m_sx;};this.Kggg1 = function(){return m_sy;};this.Kggg0 = function(){return m_sz;};this.Kuu5 = function(p){m_sx = p;this.KGG0 = 1;};this.KRR6 = function(p){m_sy = p;this.KGG0 = 1;};this.Kwww6 = function(p){m_sz = p;this.KGG0 = 1;};this.KHH5 = function(sx,sy,sz){m_sx = sx;m_sy = sy;m_sz = sz;m_updateEnabled = true;this.KGG0 = 1;};this.Kxxx2 = function(s){m_sx = s;m_sy = s;m_sz = s;m_updateEnabled = true;this.KGG0 = 1;};var m_localMat = Vpp6.getMatrix();var m_omat = null;var m_invOmat = null;var m_mesh = null;var m_material = null;var m_parentMat = null;this.KCC5 = function( mat ){m_parentMat = mat;if(m_parentMat != null){if(m_omat == null){m_omat = Vpp6.getMatrix();};}else{if(m_omat != null){Vpp6.retrieveMatrix(m_omat);m_omat = null;};};};this.KYY5 = function(){if(m_invOmat != null){if(m_invMatEnabled){if(m_parentMat == null) m_invOmat.Kbb8(m_localMat);else m_invOmat.Kbb8(m_omat);m_invOmat.Kcc6();}else{this.Kzzz6();if(m_invMatEnabled){if(m_parentMat == null) m_invOmat.Kbb8(m_localMat);else m_invOmat.Kbb8(m_omat);m_invOmat.Kcc6();};};}else{m_invOmat = Vpp6.getMatrix();if(m_parentMat == null) m_invOmat.Kbb8(m_localMat);else m_invOmat.Kbb8(m_omat);m_invOmat.Kcc6();};m_invMatEnabled = false;return m_invOmat;};this.KNN4 = function(){return m_localMat;};this.KQQ0 = function(){if(m_omat != null){return m_omat;};if(m_parentMat == null){return m_localMat;};if(m_oMatEnabled){m_omat.Kbb8(m_localMat);m_omat.Kaa3(m_parentMat);m_oMatEnabled = false;}else{this.Kzzz6();m_omat.Kbb8(m_localMat);m_omat.Kaa3(m_parentMat);};return m_omat;};this.Ksss1 = function(matrix){m_omat = matrix;m_updateEnabled = false;};this.Kpp7 = function(){return m_mesh;};this.Kqq1 = function(m,boundsEnabeld){m_mesh = m;if(m_mesh != null && boundsEnabeld != undefined && boundsEnabeld){this.KNN6.Kbb8(m_mesh.Kvvv4);};};this.Kkk6 = function(){return m_material;};this.Kll3 = function(m){m_material = m;};this.KNN3 = function(){m_direcV = null;m_directV = null;if(m_direcM != null) Vpp6.retrieveMatrix(m_direcM);m_direcM = null;if(m_invOmat != null) Vpp6.retrieveMatrix(m_invOmat);m_invOmat = null;m_parentMat = null;if(m_localMat != null) Vpp6.retrieveMatrix(m_localMat);m_localMat = null;if(m_omat != null) Vpp6.retrieveMatrix(m_omat);m_omat = null;if(m_action != null){m_action.KNN3();m_action = null;};m_mesh = null;m_material = null;};let m_dAng = 0.0;let m_tv3 = new Vqq0();let m_direcM = null;let m_direcV = null;let m_directV = null;let m_bv = new Vqq0(1.0,0.0,0.0);this.Kggg7 = function(directV, bv, maxAng){if(maxAng == undefined) maxAng = 1000;if(directV != null){m_directV = directV;if(bv != null) m_bv.Kbb8(bv);if (m_direcV == null) m_direcV = new Vqq0();m_direcV.Kkkk3(m_bv.x, m_bv.y, m_bv.z);let ang = Vqq0.radianBetween(m_direcV, directV);m_dAng = Math.abs(ang);if (m_dAng > 0.01) {;if (m_direcM != null) {;m_direcM.Kaa1();}else{m_direcM = Vpp6.getMatrix();};Vqq0.cross(m_direcV, directV, m_tv3);m_tv3.Kww1();if (m_dAng > maxAng) {;if (ang * maxAng < 0) maxAng *= -1;}else {maxAng = ang;};m_direcM.Kaa6(maxAng, m_tv3);m_direcV.Kbb8(directV);m_updateEnabled = true;this.KGG0 = 1;};}else if(m_directV != null){m_directV = null;m_bv.Kkkk3(1.0,0.0,0.0);m_updateEnabled = true;this.KGG0 = 1;};};this.Kzzz6 = function(){if(m_action != null) m_action.Kzzz6();if (m_updateEnabled){if(m_autoUpdateClosed){this.KGG0 = 0;};m_localMat.Kaa1();m_localMat.Kbb2(m_sx, m_sy, m_sz);m_localMat.Kbb1(m_rx * Vjj2.MATH_PI_OVER_180, m_ry * Vjj2.MATH_PI_OVER_180, m_rz * Vjj2.MATH_PI_OVER_180);if(m_directV != null){if (m_direcM != null){m_localMat.Kaa3(m_direcM);};};m_localMat.Kbb5(m_pos);m_updateEnabled = false;m_invMatEnabled = true;m_oMatEnabled = true;this.Kaaa6 = this.shadowStatus << 12 | this.depthTestType << 8 | this.Kyyy6<<4 | this.Kxx4;this.Kvvv4.Kzzz8(m_pos.x,m_pos.y,m_pos.z);};};let m__rSign = Vgg2.SCENE_RO_ERASE;this.Kpp4 = function(t){m__rSign = t;};this.KFF5 = function(){return m__rSign;};this.Kff0 = function(){return "[Voo2 Object]";};};function Vhh4(){Voo2.call( this );this.Kggg5 = function(renderer){};this.Kgg6 = function(renderer){};this.Kqq6 = function(){return true;};this.Knn6 = function(){return true;};this.Kaaa2 = function(){return true;};};function Vjj7(){Voo2.call(this);this.Kxxx8 = true;this.Krr3 = false;this.Kuuu6 = 0;this.Kll6 = 0;this.KVV0 = 0;this.Kooo0 = function(pr,pg,pb,pa){if(pa == undefined) pa = 1.0;var m = this.Kkk6();if(m != null){m.Kpp0[0] = pr;m.Kpp0[1] = pg;m.Kpp0[2] = pb;m.Kpp0[3] = pa;};};this.Knn5 = function(texList){let urlEnabled = ((texList != undefined && texList != null) && texList.length > 0);if(this.Kkk6() == null){let cm = new Primitive3DMaterial();cm.Ksss5(urlEnabled);this.Kll3(cm);}else if(this.Kkk6().KYY0() == null){this.Kkk6().Ksss5(urlEnabled);};if(urlEnabled && this.Kkk6().KMM4() == null && this.Kkk6().Kzzz3()){let i = 0;let len = texList.length;let tex = texList[0];if(len < 2){this.Kkk6().KJJ3( tex );++i;while(i < len){tex.Kqq0 = texList[i];tex = tex.Kqq0;++i;};tex.Kqq0 = null;}else{this.Kkk6().Kwww7(texList);};};};this.Kff0 = function(){return "[Vjj7]";};};function Vbb0(){Vjj7.call(this);this.KFF1 = function(startX,startY,pwidth,pheight,texList){this.Knn5(texList);if(this.Kpp7() == null){let mesh = new Vcc5();mesh.Kxxx8 = this.Kxxx8;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(startX,startY,pwidth,pheight);this.Kqq1(mesh);};};this.Kmm7 = function(startX,startZ,pwidth,plong,texList){this.Knn5(texList);if(this.Kpp7() == null){let mesh = new Vcc5();mesh.Kxxx8 = this.Kxxx8;mesh.Keee7 = true;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(startX,startZ,pwidth,plong);this.Kqq1(mesh);};};this.Kff0 = function(){return "[Vbb0]";};};function Vkk0(){Vii7.call(this);this.Kaaa8 = Vdd7.FLAT;let m_vs = null;let m_uvs = null;let m_nvs = null;let m_cvs = null;let m_ivs = null;this.Kddd5 = false;this.KHH4 = function(){return m_vs;};this.KYY1 = function(){return m_uvs;};this.KMM5 = function(){return m_nvs;};this.KHH6 = function(){return m_cvs;};this.KQQ7 = function(){return m_ivs;};this.KFF1 = function(minV,maxV){this.Kvvv4.min.Kbb8(minV);this.Kvvv4.max.Kbb8(maxV);this.Kvvv4.Kzzz6();let point0 = [ this.Kvvv4.max.x,this.Kvvv4.min.y,this.Kvvv4.max.z ];let point1 = [ this.Kvvv4.max.x,this.Kvvv4.min.y,this.Kvvv4.min.z ];let point2 = [ this.Kvvv4.min.x,this.Kvvv4.min.y,this.Kvvv4.min.z ];let point3 = [ this.Kvvv4.min.x,this.Kvvv4.min.y,this.Kvvv4.max.z ];let point4 = [ this.Kvvv4.max.x,this.Kvvv4.max.y,this.Kvvv4.max.z ];let point5 = [ this.Kvvv4.max.x,this.Kvvv4.max.y,this.Kvvv4.min.z ];let point6 = [ this.Kvvv4.min.x,this.Kvvv4.max.y,this.Kvvv4.min.z ];let point7 = [ this.Kvvv4.min.x,this.Kvvv4.max.y,this.Kvvv4.max.z ];this.Ktt3 = 24;let i = 0;let baseI = 0;let k = 0;m_vs = new Float32Array(72);m_ivs = new Uint16Array(36);m_vs[i + 0] = point5[0]; m_vs[i + 1] = point5[1]; m_vs[i + 2] = point5[2];m_vs[i + 3] = point6[0]; m_vs[i + 4] = point6[1]; m_vs[i + 5] = point6[2];m_vs[i + 6] = point2[0]; m_vs[i + 7] = point2[1]; m_vs[i + 8] = point2[2];m_vs[i + 9] = point1[0]; m_vs[i + 10] = point1[1]; m_vs[i + 11] = point1[2];m_ivs[baseI] = 3; m_ivs[baseI+1] = 2; m_ivs[baseI+2] = 1;m_ivs[baseI + 3] = 3; m_ivs[baseI + 4] = 1; m_ivs[baseI + 5] = 0;;i += 12;m_vs[i + 0] = point4[0]; m_vs[i + 1] = point4[1]; m_vs[i + 2] = point4[2];m_vs[i + 3] = point7[0]; m_vs[i + 4] = point7[1]; m_vs[i + 5] = point7[2];m_vs[i + 6] = point3[0]; m_vs[i + 7] = point3[1]; m_vs[i + 8] = point3[2];m_vs[i + 9] = point0[0]; m_vs[i + 10] = point0[1]; m_vs[i + 11] = point0[2];;baseI += 6;;k += 4;m_ivs[baseI] = k+2; m_ivs[baseI + 1] = k+3; m_ivs[baseI + 2] = k;m_ivs[baseI + 3] = k+2; m_ivs[baseI + 4] = k; m_ivs[baseI + 5] = k+1;;i += 12;m_vs[i + 0] = point7[0]; m_vs[i + 1] = point7[1]; m_vs[i + 2] = point7[2];m_vs[i + 3] = point6[0]; m_vs[i + 4] = point6[1]; m_vs[i + 5] = point6[2];m_vs[i + 6] = point2[0]; m_vs[i + 7] = point2[1]; m_vs[i + 8] = point2[2];m_vs[i + 9] = point3[0]; m_vs[i + 10] = point3[1]; m_vs[i + 11] = point3[2];;baseI += 6;;k += 4;m_ivs[baseI] = k + 2; m_ivs[baseI + 1] = k + 3; m_ivs[baseI + 2] = k;m_ivs[baseI + 3] = k + 2; m_ivs[baseI + 4] = k; m_ivs[baseI + 5] = k + 1;;i += 12;m_vs[i + 0] = point4[0]; m_vs[i + 1] = point4[1]; m_vs[i + 2] = point4[2];m_vs[i + 3] = point5[0]; m_vs[i + 4] = point5[1]; m_vs[i + 5] = point5[2];m_vs[i + 6] = point1[0]; m_vs[i + 7] = point1[1]; m_vs[i + 8] = point1[2];m_vs[i + 9] = point0[0]; m_vs[i + 10] = point0[1]; m_vs[i + 11] = point0[2];;baseI += 6;;k += 4;m_ivs[baseI] = k + 3; m_ivs[baseI + 1] = k + 2; m_ivs[baseI + 2] = k + 1;m_ivs[baseI + 3] = k + 3; m_ivs[baseI + 4] = k + 1; m_ivs[baseI + 5] = k;;i += 12;m_vs[i + 0] = point0[0]; m_vs[i + 1] = point0[1]; m_vs[i + 2] = point0[2];m_vs[i + 3] = point1[0]; m_vs[i + 4] = point1[1]; m_vs[i + 5] = point1[2];m_vs[i + 6] = point2[0]; m_vs[i + 7] = point2[1]; m_vs[i + 8] = point2[2];m_vs[i + 9] = point3[0]; m_vs[i + 10] = point3[1]; m_vs[i + 11] = point3[2];;baseI += 6;;k += 4;m_ivs[baseI] = k + 3; m_ivs[baseI + 1] = k + 2; m_ivs[baseI + 2] = k + 1;m_ivs[baseI + 3] = k + 3; m_ivs[baseI + 4] = k + 1; m_ivs[baseI + 5] = k;;i += 12;m_vs[i + 0] = point4[0]; m_vs[i + 1] = point4[1]; m_vs[i + 2] = point4[2];m_vs[i + 3] = point5[0]; m_vs[i + 4] = point5[1]; m_vs[i + 5] = point5[2];m_vs[i + 6] = point6[0]; m_vs[i + 7] = point6[1]; m_vs[i + 8] = point6[2];m_vs[i + 9] = point7[0]; m_vs[i + 10] = point7[1]; m_vs[i + 11] = point7[2];Vgg3.Reset();Vgg3.AddFloat32Data(m_vs,3);let typeList = [Vff6.VBUF_VS];;baseI += 6;;k += 4;m_ivs[baseI] = k + 2; m_ivs[baseI + 1] = k + 3; m_ivs[baseI + 2] = k;m_ivs[baseI + 3] = k + 2; m_ivs[baseI + 4] = k; m_ivs[baseI + 5] = k + 1;m_numTriangles = 12;let faceTotal = 6;if (this.Kyy7(Vff6.VBUF_UVS_INDEX)){i = 0;baseI = this.Ktt3 * 2;m_uvs = new Float32Array(48);if(this.Kddd5){while(i < baseI){m_uvs[i] = 1.0; m_uvs[i + 1] = 0.0;m_uvs[i + 2] = 0.0; m_uvs[i + 3] = 0.0;m_uvs[i + 4] = 0.0; m_uvs[i + 5] = 1.0;m_uvs[i + 6] = 1.0; m_uvs[i + 7] = 1.0;;i+=8;};}else{while(i < baseI){m_uvs[i] = 1.0; m_uvs[i + 1] = 1.0;m_uvs[i + 2] = 0.0; m_uvs[i + 3] = 1.0;m_uvs[i + 4] = 0.0; m_uvs[i + 5] = 0.0;m_uvs[i + 6] = 1.0; m_uvs[i + 7] = 0.0;;i+=8;};};Vgg3.AddFloat32Data(m_uvs, 2);typeList.push(Vff6.VBUF_UVS);};if (this.Kyy7(Vff6.VBUF_NVS_INDEX)){m_nvs = new Float32Array(72);baseI = 0;let nx = 0.0;let ny = 0.0;let nz = 0.0;if(this.Kaaa8 == Vdd7.FLAT){while (baseI < faceTotal){nx = 0.0; ny = 0.0; nz = 0.0;switch (baseI){case 0:nz = -1.0;break;case 1:nz = 1.0;break;case 2:nx = -1.0;break;case 3:nx = 1.0;break;case 4:ny = -1.0;break;case 5:ny = 1.0;break;default:};i = baseI * 12;nx *= this.Kkk3;ny *= this.Kkk3;nz *= this.Kkk3;m_nvs[i] = nx; m_nvs[i + 1] = ny; m_nvs[i + 2] = nz;m_nvs[i+3] = nx; m_nvs[i + 4] = ny; m_nvs[i + 5] = nz;m_nvs[i+6] = nx; m_nvs[i + 7] = ny; m_nvs[i + 8] = nz;m_nvs[i+9] = nx; m_nvs[i + 10] = ny; m_nvs[i + 11] = nz;++baseI;};}else{let centV = new Vqq0((minV.x + maxV.x) * 0.5,(minV.y + maxV.y) * 0.5,(minV.z + maxV.z) * 0.5);let d = 0.0;while(baseI < this.Ktt3){i = baseI * 3;nx = m_vs[i] - centV.x;ny = m_vs[i+1] - centV.y;nz = m_vs[i+2] - centV.z;d = Math.sqrt(nx*nx + ny*ny + nz*nz);if (d > Vjj2.MATH_MIN_POSITIVE){m_nvs[i] = nx / d;m_nvs[i+1] = ny / d;m_nvs[i+2] = nz / d;};++baseI;};};Vgg3.AddFloat32Data(m_nvs,3);typeList.push(Vff6.VBUF_NVS);};if (this.Kyy7(Vff6.VBUF_CVS_INDEX)){m_cvs = new Float32Array(72);baseI = 0;let pr = 1.0;let pg = 1.0;let pb = 1.0;while (baseI < faceTotal){i = baseI * 12;m_cvs[i] = pr; m_cvs[i + 1] = pg; m_cvs[i + 2] = pb;m_cvs[i+3] = pr; m_cvs[i + 4] = pg; m_cvs[i + 5] = pb;m_cvs[i+6] = pr; m_cvs[i + 7] = pg; m_cvs[i + 8] = pb;m_cvs[i+9] = pr; m_cvs[i + 10] = pg; m_cvs[i + 11] = pb;++baseI;};Vgg3.AddFloat32Data(m_cvs,3);typeList.push(Vff6.VBUF_CVS);};Vgg3.vbWholeDataEnabled = this.Kxxx8;this.KCC1 = Vgg3.CreateBySaveData(Vff6.VTXTYPE_GL_TRIANGLES,typeList);this.KCC1.Kyy6(m_ivs);this.Kmm3 = m_ivs.length;};this.KAA3 = function(uvslen8,i){if(m_uvs != null){m_uvs.set(uvslen8,i * 8);};};};function Vpp7(){Vjj7.call(this);this.Kkk3 = 1.0;this.KFF1 = function(minV, maxV,texList){this.Knn5(texList);if(this.Kpp7() == null){let mesh = new Vkk0();mesh.Kkk3 = this.Kkk3;mesh.Kxxx8 = this.Kxxx8;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(minV, maxV);this.Kqq1(mesh,true);};};this.KAA3 = function(uvslen8,i){let mesh = this.Kpp7();if(mesh != null){mesh.KAA3(uvslen8, i);};};this.Kff0 = function(){return "[Vpp7]";};};function Vff1(){Vii7.call( this );this.KNN1 = false;let m_vs = null;let m_uvs = null;let m_nvs = null;let m_cvs = null;let m_ivs = null;this.KHH4 = function(){return m_vs;};this.KYY1 = function(){return m_uvs;};this.KMM5 = function(){return m_nvs;};this.KHH6 = function(){return m_cvs;};this.KQQ7 = function(){return m_ivs;};let m_longitudeNumSegments = 10;let m_latitudeNumSegments = 10;let m_radius = 50;this.KFF1 = function(radius, longitudeNumSegments, latitudeNumSegments){if (this.Ktt3 < 1){if (radius < 0.01)return;if (longitudeNumSegments < 2) longitudeNumSegments = 2;if (latitudeNumSegments < 2) latitudeNumSegments = 2;m_radius = Math.abs(radius);m_longitudeNumSegments = longitudeNumSegments;m_latitudeNumSegments = latitudeNumSegments;let i = 1,j = 0,trisTot = 0;let yRad = 0.0, px = 0.0, py = 0.0;let vtx = new Vmm1(0, -m_radius, 0, trisTot);this.Kvvv4.min.Kkkk3(-m_radius,-m_radius,-m_radius);this.Kvvv4.max.Kkkk3(m_radius,m_radius,m_radius);this.Kvvv4.Kzzz6();let vtxVec = [];let vtxRows = [];vtxRows.push( [] );let vtxRow = vtxRows[0];vtx.u = 0.5; vtx.v = 0.5;vtx.nx = 0.0; vtx.ny = -1.0; vtx.nz = 0.0;vtxRow.push(vtx.Kzzz7());vtxVec.push(vtxRow[0]);let pr = 0.0,pr2 = m_radius * 2.01;let py2 = 0.0;let f = 1.0 / m_radius;for (; i < m_latitudeNumSegments; ++i){yRad = (Math.PI * i) / m_latitudeNumSegments;px = Math.sin(yRad);py = Math.cos(yRad);vtx.y = -m_radius * py;pr = m_radius * px;py2 = vtx.y;if (py2 < 0) py2 = -py2;if(!this.KNN1) py2 = m_radius - py2;py2 /= pr2;vtxRows.push([]);let row = vtxRows[i];for (j = 0; j < m_longitudeNumSegments; ++j) {yRad = (Math.PI * 2 * j) / m_longitudeNumSegments;++trisTot;px = Math.sin(yRad);py = Math.cos(yRad);vtx.x = px * pr;vtx.z = py * pr;vtx.Kll0 = trisTot;px *= py2;py *= py2;vtx.u = 0.5 + px;vtx.v = 0.5 + py;vtx.nx = vtx.x * f; vtx.ny = vtx.y * f; vtx.nz = vtx.z * f;row.push(vtx.Kzzz7());vtxVec.push(row[j]);};row.push(row[0]);};++trisTot;vtx.Kll0 = trisTot;vtx.x = 0; vtx.y = m_radius; vtx.z = 0;vtx.u = 0.5; vtx.v = 0.5;vtx.nx = 0.0; vtx.ny = 1.0; vtx.nz = 0.0;vtxRows.push([]);let lastRow = vtxRows[m_latitudeNumSegments];lastRow.push(vtx.Kzzz7());vtxVec.push(lastRow[0]);let pvtx = null;let pivs = [];let rowa = null;let rowb = null;i = 1;for (; i <= m_latitudeNumSegments; ++i){rowa = vtxRows[i-1];rowb = vtxRows[i];for (j = 1; j <= m_longitudeNumSegments; ++j){if (i == 1){pivs.push(rowa[0].Kll0); pivs.push(rowb[j].Kll0); pivs.push(rowb[j - 1].Kll0);}else if(i == m_latitudeNumSegments){pivs.push(rowa[j].Kll0); pivs.push(rowb[0].Kll0); pivs.push(rowa[j - 1].Kll0);}else{pivs.push(rowa[j].Kll0); pivs.push(rowb[j - 1].Kll0); pivs.push(rowa[j - 1].Kll0);pivs.push(rowa[j].Kll0); pivs.push(rowb[j].Kll0); pivs.push(rowb[j - 1].Kll0);};};};m_numIndices = pivs.length;this.Ktt3 = vtxVec.length;m_vs = new Float32Array(this.Ktt3 * 3);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_vs[i] = pvtx.x; m_vs[i + 1] = pvtx.y; m_vs[i + 2] = pvtx.z;;i += 3;};Vgg3.Reset();Vgg3.AddFloat32Data(m_vs,3);let typeList = [Vff6.VBUF_VS];if (this.Kyy7(Vff6.VBUF_UVS_INDEX)){m_uvs = new Float32Array(this.Ktt3 * 2);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_uvs[i] = pvtx.u; m_uvs[i + 1] = pvtx.v;;i += 2;};Vgg3.AddFloat32Data(m_uvs,2);typeList.push(Vff6.VBUF_UVS);};if (this.Kyy7(Vff6.VBUF_NVS_INDEX)){m_nvs = new Float32Array(this.Ktt3 * 3);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_nvs[i] = pvtx.nx; m_nvs[i + 1] = pvtx.ny; m_nvs[i + 2] = pvtx.nz;;i += 3;};Vgg3.AddFloat32Data(m_nvs,3);typeList.push(Vff6.VBUF_NVS);};if (this.Kyy7(Vff6.VBUF_CVS_INDEX)){m_cvs = new Float32Array(this.Ktt3 * 3);i = 0;for (j = 0; j < this.Ktt3; ++j){m_cvs[i] = 1.0; m_cvs[i + 1] = 1.0; m_cvs[i + 2] = 1.0;;i += 3;};Vgg3.AddFloat32Data(m_cvs,3);typeList.push(Vff6.VBUF_CVS);};Vgg3.vbWholeDataEnabled = this.Kxxx8;this.KCC1 = Vgg3.CreateBySaveData(Vff6.VTXTYPE_GL_TRIANGLES,typeList);m_ivs = new Uint16Array(pivs);this.KCC1.Kyy6(m_ivs);this.Kmm3 = m_ivs.length;};};};function Vaa2(){Vjj7.call(this);this.KFF1 = function(radius, longitudeNumSegments, latitudeNumSegments,texList){this.Knn5(texList);if(this.Kpp7() == null){let mesh = new Vff1();mesh.Kxxx8 = this.Kxxx8;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(radius, longitudeNumSegments, latitudeNumSegments);this.Kqq1(mesh,true);};};this.Kff0 = function(){return "[Vaa2]";};};function Vgg5(){Vii7.call( this );this.KNN1 = false;let m_vs = null;let m_uvs = null;let m_nvs = null;let m_cvs = null;let m_ivs = null;this.KHH4 = function(){return m_vs;};this.KYY1 = function(){return m_uvs;};this.KMM5 = function(){return m_nvs;};this.KHH6 = function(){return m_cvs;};this.KQQ7 = function(){return m_ivs;};this.KFF1 = function(radius, height, longitudeNumSegments, uvType, alignYRatio, latitudeNumSegments){if (this.Ktt3 < 1){if (radius < 0.01)return;if (longitudeNumSegments < 2) longitudeNumSegments = 2;latitudeNumSegments = 3;let m_radius = Math.abs(radius);let m_height = Math.abs(height);let m_longitudeNumSegments = longitudeNumSegments;let m_latitudeNumSegments = latitudeNumSegments;let i = 1,j = 0,trisTot = 0;let yRad = 0, px = 0, py = 0;let minY = alignYRatio * m_height;let vtx = new Vmm1();vtx.y = minY;let vtxVec = [];let vtxRows = [];vtxRows.push([]);let vtxRow = vtxRows[0];vtx.u = 0.5; vtx.v = 0.5;vtx.nx = 0.0; vtx.ny = -1.0; vtx.nz = 0.0;vtxRow.push(vtx.Kzzz7());vtxVec.push(vtxRow[0]);for (; i < m_latitudeNumSegments; ++i){vtx.y = minY + m_height * (i-1);vtxRows.push([]);let row = vtxRows[i];for (j = 0; j < m_longitudeNumSegments; ++j) {yRad = (Math.PI * 2 * j) / m_longitudeNumSegments;++trisTot;px = Math.sin(yRad);py = Math.cos(yRad);vtx.x = px * m_radius;vtx.z = py * m_radius;vtx.Kll0 = trisTot;px *= 0.495;py *= 0.495;vtx.u = 0.5 + px;vtx.v = 0.5 + py;if (i < 2){vtx.nx = 0.0; vtx.ny = -1.0; vtx.nz = 0.0;}else{vtx.nx = 0.0; vtx.ny = 1.0; vtx.nz = 0.0;};row.push(vtx.Kzzz7());vtxVec.push(row[j]);};row.push(row[0]);};++trisTot;vtx.Kll0 = trisTot;vtx.x = 0; vtx.y = minY + m_height; vtx.z = 0;vtx.u = 0.5; vtx.v = 0.5;vtx.nx = 0.0; vtx.ny = 1.0; vtx.nz = 0.0;vtxRows.push([]);let lastRow = vtxRows[3];lastRow.push(vtx.Kzzz7());vtxVec.push(lastRow[0]);let f = 1.0 / m_radius;for (i = 0; i < 2; ++i){let preRow = vtxRows[i+1];vtxRows.push([]);let row = vtxRows[vtxRows.length - 1];for (j = 0; j <= m_longitudeNumSegments; ++j){++trisTot;vtx.Kbb8(preRow[j]);vtx.Kll0 = trisTot;if (uvType < 1) {;if (i < 1){vtx.v = 0.0;}else{vtx.v = 1.0;};vtx.u = j / m_longitudeNumSegments;}else{if (i < 1){vtx.u = 0.0;}else{vtx.u = 1.0;};vtx.v = j / m_longitudeNumSegments;};vtx.ny = 0.0;vtx.nx = vtx.x * f;vtx.nz = vtx.z * f;row.push(vtx.Kzzz7());vtxVec.push(row[j]);};};let pvtx = null;let pivs = [];i = 1;let rowa = null;let rowb = null;for (; i <= m_latitudeNumSegments; ++i){rowa = vtxRows[i-1];rowb = vtxRows[i];for (j = 1; j <= m_longitudeNumSegments; ++j){if (i == 1){pivs.push(rowa[0].Kll0); pivs.push(rowb[j].Kll0); pivs.push(rowb[j-1].Kll0);}else if(i == m_latitudeNumSegments){pivs.push(rowa[j].Kll0); pivs.push(rowb[0].Kll0); pivs.push(rowa[j - 1].Kll0);};};};rowa = vtxRows[vtxRows.length - 2];rowb = vtxRows[vtxRows.length - 1];for (j = 1; j <= m_longitudeNumSegments; ++j){pivs.push(rowa[j].Kll0); pivs.push(rowb[j - 1].Kll0); pivs.push(rowa[j - 1].Kll0);pivs.push(rowa[j].Kll0); pivs.push(rowb[j].Kll0); pivs.push(rowb[j - 1].Kll0);};m_numIndices = pivs.length;this.Ktt3 = vtxVec.length;m_vs = new Float32Array(this.Ktt3 * 3);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_vs[i] = pvtx.x; m_vs[i + 1] = pvtx.y; m_vs[i + 2] = pvtx.z;;i += 3;};this.Kvvv4.Kvv4(m_vs);this.Kvvv4.Kzzz6();Vgg3.Reset();Vgg3.AddFloat32Data(m_vs,3);let typeList = [Vff6.VBUF_VS];if (this.Kyy7(Vff6.VBUF_UVS_INDEX)){m_uvs = new Float32Array(this.Ktt3 * 2);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_uvs[i] = pvtx.u; m_uvs[i + 1] = pvtx.v;;i += 2;};Vgg3.AddFloat32Data(m_uvs,2);typeList.push(Vff6.VBUF_UVS);};if (this.Kyy7(Vff6.VBUF_NVS_INDEX)){m_nvs = new Float32Array(this.Ktt3 * 3);i = 0;for (j = 0; j < this.Ktt3; ++j){pvtx = vtxVec[j];m_nvs[i] = pvtx.nx; m_nvs[i + 1] = pvtx.ny; m_nvs[i + 2] = pvtx.nz;;i += 3;};Vgg3.AddFloat32Data(m_nvs,3);};Vgg3.vbWholeDataEnabled = this.Kxxx8;this.KCC1 = Vgg3.CreateBySaveData();m_ivs = new Uint16Array(pivs);this.KCC1.Kyy6( m_ivs );this.Kmm3 = m_ivs.length;};};};function Vbb3(){Vjj7.call(this);this.KFF1 = function(radius, height, longitudeNumSegments, uvType, alignYRatio,texList){this.Knn5(texList);if(this.Kpp7() == null){let mesh = new Vgg5();mesh.Kxxx8 = this.Kxxx8;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(radius, height, longitudeNumSegments, uvType, alignYRatio, 2);this.Kqq1(mesh, true);};};this.Kff0 = function(){return "[Vbb3()]";};};function Vmm2(){Vii7.call( this );var m_vs = null;var m_cvs = null;this.KFF1 = function(posarr,colors){if(posarr.length < 6){Vee4("posarr.length < 6");abort();};this.Ktt3 = Math.floor(posarr.length/3);m_vs = posarr;m_cvs = colors;Vgg3.Reset();Vgg3.AddFloat32Data(new Float32Array(m_vs),3);Vgg3.AddFloat32Data(new Float32Array(m_cvs),3);this.KCC1 = Vgg3.CreateBySaveData( Vff6.VTXTYPE_GL_LINES );this.KCC1.Ktt3 = this.Ktt3;this.Keee3 = Vee6.ARRAYS_LINES;};};function Vkk8(){Voo2.call(this);this.Kww8 = new Vkk4(1.0,0.0,0.0,1.0);this.KRR1 = new Vkk4(0.0,1.0,0.0,1.0);this.KRR3 = new Vkk4(0.0,0.0,1.0,1.0);this.Kvv0 = function(lineW){if(this.Kpp7()){this.Kpp7().KCC1.Krrr7 = lineW;};};this.KFF1 = function(size){if(this.Kpp7() == null){if(size == undefined) size = 50;if(size < 10){size = 10;};var posarr = [0,0,0, size,0,0, 0,0,0, 0,size,0, 0,0,0, 0,0,size];var colorarr = [this.Kww8.r,this.Kww8.g,this.Kww8.b, this.Kww8.r,this.Kww8.g,this.Kww8.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR3.r,this.KRR3.g,this.KRR3.b, this.KRR3.r,this.KRR3.g,this.KRR3.b];var mesh = new Vmm2();mesh.KFF1(posarr, colorarr);this.Kqq1(mesh);};var material = this.Kkk6();if(material == null){material = new Vcc7();material.KFF1(Vkk8.uns, Vkk8.vsc, Vkk8.fsc);this.Kll3(material);};};this.Kjj7 = function(sizeX,sizeY,sizeZ){if(this.Kpp7() == null){var posarr = [0,0,0, sizeX,0,0, 0,0,0, 0,sizeY,0, 0,0,0, 0,0,sizeZ];var colorarr = [this.Kww8.r,this.Kww8.g,this.Kww8.b, this.Kww8.r,this.Kww8.g,this.Kww8.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR3.r,this.KRR3.g,this.KRR3.b, this.KRR3.r,this.KRR3.g,this.KRR3.b];var mesh = new Vmm2();mesh.KFF1(posarr, colorarr);this.Kqq1(mesh);};var material = this.Kkk6();if(material == null){material = new Vcc7();material.KFF1(Vkk8.uns, Vkk8.vsc, Vkk8.fsc);this.Kll3(material);};};this.KAAA6 = function(mat3D, size){if(this.Kpp7() == null){if(size == undefined) size = 50;if(size < 10){size = 10;};var posarr = [0,0,0, size * mat3D[0], size * mat3D[1], size * mat3D[2], 0,0,0, size * mat3D[4], size * mat3D[5], size * mat3D[6], 0,0,0, size * mat3D[8], size * mat3D[9], size * mat3D[10]];var colorarr = [this.Kww8.r,this.Kww8.g,this.Kww8.b, this.Kww8.r,this.Kww8.g,this.Kww8.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR1.r,this.KRR1.g,this.KRR1.b, this.KRR3.r,this.KRR3.g,this.KRR3.b, this.KRR3.r,this.KRR3.g,this.KRR3.b];var mesh = new Vmm2();mesh.KFF1(posarr, colorarr);this.Kqq1(mesh);};var material = this.Kkk6();if(material == null){material = new Vcc7();material.KFF1(Vkk8.uns, Vkk8.vsc, Vkk8.fsc);this.Kll3(material);};};};Vkk8.uns = "Line3D_shader";Vkk8.vsc ="precision mediump float;\n"
+"attribute vec3 a_vs;\n"
+"attribute vec3 a_cvs;\n"
+"uniform mat4 u_objMat;\n"
+"uniform mat4 u_viewMat;\n"
+"uniform mat4 u_projMat;\n"
+"varying vec3 v_vtxColor;\n"
+"void main()\n"
+"{\n"
+"  gl_Position = u_projMat * u_viewMat * u_objMat * vec4(a_vs,1.0);\n"
+"  v_vtxColor = a_cvs;\n"
+"}\n"
;Vkk8.fsc ="precision mediump float;\n"
+"varying vec3 v_vtxColor;\n"
+"void main()\n"
+"{"
+"    gl_FragColor = vec4(v_vtxColor, 1.0);\n"
+"}"
;function Vll6(){Vcc7.call( this );this.Kpp0 = new Float32Array([1.0,1.0,1.0,1.0]);this.Kvvv2 = function(camera){return null;};this.KEE6 = function(ro){var oum = new Voo0();oum.Kxx2 = [Vjj5.SHADER_VEC4];oum.KBB3 = 1;oum.KLL5 = [this.Kyyy2(0)];oum.Krrr4 = [this.Kpp0];return oum;};};function Vbb8(){Voo2.call(this);this.Kgg2 = 0.0;this.KUU6 = 0.0;this.Kppp6 = 1.0;this.KJJ5 = 1.0;this.Kddd5 = false;let m_colorMaterial = null;this.Kooo0 = function(pr,pg,pb,pa){if(pa == undefined) pa = 1.0;if(m_colorMaterial != null){m_colorMaterial.Kpp0[0] = pr;m_colorMaterial.Kpp0[1] = pg;m_colorMaterial.Kpp0[2] = pb;m_colorMaterial.Kpp0[3] = pa;};};this.KFF1 = function(startX,startY,pwidth,pheight,texList){var urlEnabled = ((texList != undefined && texList != null) && texList.length > 0);if(this.Kkk6() == null){m_colorMaterial = new Vll6();if(urlEnabled){m_colorMaterial.KFF1("ScreenPlane_tex_shader",Vbb8.s_texVtxGlsl, Vbb8.s_texFragGlsl);}else{m_colorMaterial.KFF1("ScreenPlane_shader",Vbb8.s_vtxGlsl, Vbb8.s_fragGlsl);};this.Kll3(m_colorMaterial);}else if(this.Kkk6().KYY0() == null){this.Kkk6().Ksss5(urlEnabled);};if(this.Kpp7() == null){var mesh = new Vcc5();mesh.Kgg2 = this.Kgg2;mesh.KUU6 = this.KUU6;mesh.Kppp6 = this.Kppp6;mesh.KJJ5 = this.KJJ5;mesh.Kddd5 = this.Kddd5;mesh.Kgg7( this.Kkk6().Kll4() );mesh.KFF1(startX,startY,pwidth,pheight);this.Kqq1(mesh);};var pm = this.Kkk6();if(urlEnabled && pm.KMM4() == null && pm.Kzzz3()){if(texList.length == 1){pm.KJJ3( texList[0] );}else{pm.Kwww7( texList );};};};this.Kff0 = function(){return "[Vbb8]";};};Vbb8.s_vtxGlsl ="\
precision mediump float;\n\
attribute vec3 a_vs;\n\
void main(){\n\
gl_Position = vec4(a_vs,1.0);\n\
}";
Vbb8.s_fragGlsl ="\
precision mediump float;\n\
uniform vec4 u_color;\n\
void main(){\n\
gl_FragColor = u_color;\n\
}";
Vbb8.s_texVtxGlsl ="\
precision mediump float;\n\
attribute vec3 a_vs;\n\
attribute vec2 a_uvs;\n\
varying vec2 v_uvs;\n\
void main(){\n\
gl_Position = vec4(a_vs,1.0);\n\
v_uvs = a_uvs;\n\
}";
Vbb8.s_texFragGlsl ="\
precision mediump float;\n\
uniform sampler2D u_sampler0;\n\
uniform vec4 u_color;\n\
varying vec2 v_uvs;\n\
void main(){\n\
gl_FragColor = u_color * texture2D(u_sampler0, v_uvs);\n\
}";
function Vdd5(){this.Kttt4 = new Vqq0();this.KMM7 = new Vqq0();this.KPP1 = -1;let m_pickSelector = null;this.Kfff0 = function( pickSelector ){m_pickSelector = pickSelector;};let m_camera = null;let m_pickList = null;let m_pickROList = null;let m_pickTotal = 0;let m_rl = new Vhh5();let m_pickPixelWorldPos = new Vqq0();let m_currDis = 0;let m_pickEnabled = true;this.Kzzz5 = function(){return m_pickTotal;};this.Kppp4 = function(){return m_pickROList;};this.KFF1 = function(){};this.Kggg3 = function(camera){m_camera = camera;};this.Kii0 = function(boo){m_pickEnabled = boo;};this.Khhh8 = function(){return m_pickEnabled;};this.KWW4 = function(){return m_rl;};this.Kddd7 = function(outPos){outPos.Kbb8(m_pickPixelWorldPos);};this.Kzz4 = function(){if(m_pickSelector != null){return m_pickSelector.pickDepth;};return 0;};this.KYY2 = function(boo){m_pickSelector.pickNormalEnabled = boo;};this.Kww2 = function(){return m_pickSelector.normal;};let m_preMPos = new Vqq0();this.Kkkk4 = function(){if(m_pickSelector != null){m_pickSelector.pickDepth = 0;};this.Kppp3(Stage.Kss2, Stage.Kss1);this.KPP1 = -1;m_currDis = 999999999;m_camera.Kzzz6();m_camera.KVV2(Stage.Kss2, Stage.Kss1, m_rl.Kaa0, m_rl.tv);m_rl.Kzzz6();m_pickList = [];m_pickROList = [];m_pickTotal = 0;};this.end = function(){};let m_pva = new Vqq0();let m_pvb = new Vqq0();let m_ltv = new Vqq0();let m_pickLocalPos = new Vqq0();let m_pickWorldPos = new Vqq0();let m_mat = null;let m_prePickRO = null;this.Khh3 = function(ro){if(m_pickEnabled){m_pva.Kbb8(m_rl.Kaa0);m_pvb.x = 100.0 * m_rl.tv.x + m_pva.x;m_pvb.y = 100.0 * m_rl.tv.y + m_pva.y;m_pvb.z = 100.0 * m_rl.tv.z + m_pva.z;m_mat = ro.KYY5();m_mat.transformVectorSelf(m_pva);m_mat.transformVectorSelf(m_pvb);m_ltv.x = m_pvb.x - m_pva.x;m_ltv.y = m_pvb.y - m_pva.y;m_ltv.z = m_pvb.z - m_pva.z;m_ltv.Kww1();let boo = Voo7.intersectionRL2(m_ltv, m_pva,ro.KNN6,m_pickLocalPos);if(boo){ro.KQQ0().transformOutVector(m_pickLocalPos,m_pickWorldPos);let dis2 = Vqq0.distanceSquared(m_pickWorldPos,m_rl.Kaa0);m_pickTotal ++;let Vkk5 = this.Knnn3();Vkk5.dis = dis2;Vkk5.ro = ro;Vkk5.wpos.Kbb8(m_pickWorldPos);Vkk5.lpos.Kbb8(m_pickLocalPos);m_pickList.push(Vkk5);m_pickROList.push(ro);};};};let m_poList = [];this.Knnn3 = function(){if(m_poList.length > 0){return m_poList.pop();};let Vkk5 = {dis:0,ro:null,wpos:new Vqq0(),lpos:new Vqq0()};return Vkk5;};function Vmm5(a, b){if (a.dis < b.dis ) {;return -1;};if (a.dis > b.dis ) {;return 1;};return 0;};let m_preox = -10;let m_preoy = -10;this.Kppp3 = function(pmx,pmy){let Vkk5 = null;if(m_pickSelector != null){if(m_pickTotal > 0){m_pickSelector.Kyyy7(pmx, pmy, m_pickROList);if(m_pickSelector.selectRO != null){if(m_pickSelector.pickDepth > 0){let pos = m_camera.Kss7();m_pickPixelWorldPos.x = m_rl.tv.x * m_pickSelector.pickDepth + pos.x;m_pickPixelWorldPos.y = m_rl.tv.y * m_pickSelector.pickDepth + pos.y;m_pickPixelWorldPos.z = m_rl.tv.z * m_pickSelector.pickDepth + pos.z;};Vkk5 = m_pickList[ m_pickSelector.selectROIndex ];if(m_prePickRO != Vkk5.ro){if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy, Vkk5.lpos,Vkk5.wpos);m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};}else if(m_prePickRO != null){if(Math.abs(m_preox - Vkk5.lpos.x) > Vjj2.MATH_MIN_POSITIVE || Math.abs(m_preoy - Vkk5.lpos.y) > Vjj2.MATH_MIN_POSITIVE){m_preox = Vkk5.lpos.x;m_preoy = Vkk5.lpos.y;if(this.KPP1 > 0){m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);this.KPP1 = -1;};m_prePickRO.Kmm1(EventConst.MOUSE_MOVE,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};};for(let j = 0; j < m_pickTotal; ++j){m_poList.push(m_pickList[j]);m_pickList[j] = null;};this.KMM7.Kbb8(Vkk5.wpos);this.Kttt4.Kbb8(Vkk5.lpos);}else if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};}else if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};}else{if(m_pickTotal > 0){m_pickList.sort(Vmm5);Vkk5 = m_pickList[0];if(m_prePickRO != Vkk5.ro){if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy, Vkk5.lpos,Vkk5.wpos);m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};}else if(m_prePickRO != null){if(Math.abs(m_preox - Vkk5.lpos.x) > Vjj2.MATH_MIN_POSITIVE || Math.abs(m_preoy - Vkk5.lpos.y) > Vjj2.MATH_MIN_POSITIVE){m_preox = Vkk5.lpos.x;m_preoy = Vkk5.lpos.y;if(this.KPP1 > 0){m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);this.KPP1 = -1;};m_prePickRO.Kmm1(EventConst.MOUSE_MOVE,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};};for(let i = 0; i < m_pickTotal; ++i){m_poList.push(m_pickList[i]);m_pickList[i] = null;};this.KMM7.Kbb8(Vkk5.wpos);this.Kttt4.Kbb8(Vkk5.lpos);}else{if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};};};};};function Vll3(){};Vll3.FRAMEBUFFER = 71;Vll3.DRAW_FRAMEBUFFER = 72;Vll3.READ_FRAMEBUFFER = 73;function Vhh7(fbufferType){if(fbufferType == undefined){fbufferType = Vll3.FRAMEBUFFER;};var m_fbo = null;var m_depthStencilRBO = null;var m_depthRBO = null;var m_width = 800;var m_height = 600;this.Kooo7 = true;this.KWW5 = false;this.KAA2 = false;this.KBB5 = 4;this.Kddd4 = function(){return m_fbo;};this.KII0 = function(){return m_depthStencilRBO;};this.KAA7 = function(){return m_depthRBO;};this.getWidth = function(){return m_width;};this.getHeight = function(){return m_height;};let m_bufferLType = fbufferType;let m_bufferType = 0;let m_gl = null;let m_texTargetTypes = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];let m_clearColorArr = new Float32Array(4);let m_stencilValueArr = new Uint32Array(4);this.Kxx7 = function(gl,t){if (m_fbo != null){switch (t){case Vll3.DRAW_FRAMEBUFFER:gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, m_fbo);break;case Vll3.READ_FRAMEBUFFER:gl.bindFramebuffer(gl.READ_FRAMEBUFFER, m_fbo);break;default:gl.bindFramebuffer(gl.FRAMEBUFFER, m_fbo);};};};this.Kkkk7 = function(t){m_bufferLType = t;};this.Kqqq7 = function(){return m_bufferLType;};this.Kiii5 = function(gl, color){if (m_fbo != null){m_clearColorArr[0] = color.r;m_clearColorArr[1] = color.g;m_clearColorArr[2] = color.b;m_clearColorArr[3] = color.a;if (m_preRttTotal > 1){for (let i = 0; i < m_preRttTotal; ++i){gl.clearBufferfv(gl.COLOR, i, m_clearColorArr);};}else{gl.clearBufferfv(gl.COLOR, 0, m_clearColorArr);};};};this.Kppp0 = function(gl, depth){if (m_fbo != null){if(depth == undefined){depth = 1.0;};m_clearColorArr[0] = depth;gl.clearBufferfv(gl.DEPTH, 0, m_clearColorArr);};};this.KCC4 = function(gl, stencil){if (m_fbo != null){if(stencil == undefined){stencil = 0x0;};m_stencilValueArr[0] = stencil;gl.clearBufferuiv(gl.STENCIL, 0, m_stencilValueArr);};};this.KHH3 = function(gl, depth, stencil){if (m_fbo != null){if(depth == undefined){depth = 1.0;};if(stencil == undefined){stencil = 0x0;};gl.clearBufferfi(gl.DEPTH_STENCIL, 0, depth, stencil);};};let m_rttTexProxyList = [];let m_rttTotal = 0;this.Knn3 = function(rgl,texProxy,outPutIndex){if(outPutIndex == undefined || outPutIndex < 0) outPutIndex = 0;if(m_fbo != null){if(outPutIndex == 0){m_attachmentTotal = 0;rgl.bindFramebuffer(m_bufferType,m_fbo);};if(m_rttTexProxyList.length == outPutIndex){m_rttTexProxyList.push(outPutIndex);m_rttTotal = outPutIndex + 1;}else if(outPutIndex < m_rttTexProxyList.length){m_rttTexProxyList[outPutIndex] = outPutIndex;m_rttTotal = outPutIndex + 1;}else{Vee4("Vhh7::renderToTexAt output ATTACHMENT index is not continuous, Error!");return;};};let i = 0;if(texProxy != null){let rTex = texProxy.Knn2();if(rTex == null){rTex = rgl.createTexture();rgl.bindTexture(Vaa6.getConst(rgl, texProxy.Keee1()), rTex);if(Vpp4()){rgl.texImage2D(Vaa6.getConst(rgl, texProxy.Keee1()), 0,Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5),Vaa0.toGL(rgl, texProxy.Kuuu0), null);}else{switch(texProxy.Kuuu0){case Vaa0.FLOAT:case Vaa0.HALF_FLOAT:const ext = rgl.getExtension("EXT_color_buffer_float");if (!ext){Vee4("donot need EXT_color_buffer_float");return;};break;};switch( texProxy.Keee1() ){case Vaa6.TEXTURE_2D:rgl.texImage2D(rgl.TEXTURE_2D, 0,Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5),Vaa0.toGL(rgl, texProxy.Kuuu0), null);break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.texImage2D(rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5), Vaa0.toGL(rgl, texProxy.Kuuu0), null);};break;};};texProxy.Koo3(rgl, rTex, texProxy.Keee1());};if(Vpp4()){rgl.framebufferTexture2D(m_bufferType, this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + m_attachmentTotal, rgl.TEXTURE_2D, rTex,0);++m_attachmentTotal;}else{switch( texProxy.Keee1() ){case Vaa6.TEXTURE_2D:if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, this.KBB5, rgl.RGBA8, m_width, m_height);};rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_2D,rTex,0);m_texTargetTypes[m_attachmentTotal] = Vaa6.TEXTURE_2D;++m_attachmentTotal;break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i,rTex,0);m_texTargetTypes[m_attachmentTotal] = Vaa6.TEXTURE_CUBE;++m_attachmentTotal;};break;};};}else{if(Vpp4()){rgl.framebufferTexture2D(m_bufferType, this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + m_attachmentTotal, rgl.TEXTURE_2D, null,0);m_attachmentTotal++;}else{switch( m_texTargetTypes[m_attachmentTotal] ){case Vaa6.TEXTURE_2D:rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_2D,null,0);m_attachmentTotal++;break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i,null,0);m_attachmentTotal++;};break;};};};};this.Kuuu5 = null;let m_preRttTotal = 0;let m_attachmentTotal = 0;this.Kvvv0 = function(){m_preRttTotal = -1;};this.use = function(rgl){m_gl = rgl;if(m_fbo != null){if(m_attachmentTotal > 1){if(m_preRttTotal != m_attachmentTotal){m_preRttTotal = m_attachmentTotal;let i = 0;let attachment = [];if( Vpp4() ){for(; i < m_attachmentTotal; ++i) attachment.push( this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + i );this.Kuuu5.drawBuffersWEBGL(attachment);}else{for(; i < m_attachmentTotal; ++i){attachment.push( rgl.COLOR_ATTACHMENT0 + i );};rgl.drawBuffers(attachment);};};}else{m_preRttTotal = 1;};};m_rttTotal = 0;m_attachmentTotal = 0;};this.Kuuu2 = function(){if(m_fbo != null){m_gl.bindFramebuffer(m_bufferType,m_fbo);};};this.KPP3 = function(rgl,pw,ph){if(m_fbo == null){m_rttTexProxyList = [];m_preRttTotal = m_attachmentTotal = 0;m_width = pw;m_height = ph;m_fbo = rgl.createFramebuffer();switch(m_bufferLType){case Vll3.DRAW_FRAMEBUFFER:m_bufferType = rgl.DRAW_FRAMEBUFFER;break;case Vll3.READ_FRAMEBUFFER:m_bufferType = rgl.READ_FRAMEBUFFER;break;default:m_bufferType = rgl.FRAMEBUFFER;break;};rgl.bindFramebuffer(m_bufferType,m_fbo);if(this.Kooo7){if(this.KWW5){if(m_depthStencilRBO == null){m_depthStencilRBO = rgl.createRenderbuffer();rgl.bindRenderbuffer(rgl.RENDERBUFFER,m_depthStencilRBO);if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, 0, rgl.DEPTH_STENCIL, pw, ph);}else{rgl.renderbufferStorage(rgl.RENDERBUFFER, rgl.DEPTH_STENCIL, pw,ph);};rgl.framebufferRenderbuffer(m_bufferType,rgl.DEPTH_STENCIL_ATTACHMENT, rgl.RENDERBUFFER, m_depthStencilRBO);};}else{if(m_depthRBO == null){m_depthRBO = rgl.createRenderbuffer();rgl.bindRenderbuffer(rgl.RENDERBUFFER,m_depthRBO);if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, this.KBB5, rgl.DEPTH_COMPONENT16, pw, ph);}else{rgl.renderbufferStorage(rgl.RENDERBUFFER, rgl.DEPTH_COMPONENT16, pw,ph);};rgl.framebufferRenderbuffer(m_bufferType,rgl.DEPTH_ATTACHMENT, rgl.RENDERBUFFER, m_depthRBO);};};rgl.bindRenderbuffer(rgl.RENDERBUFFER,null);};var e = rgl.checkFramebufferStatus(m_bufferType);if(e!== rgl.FRAMEBUFFER_COMPLETE){Vee4("Vhh7 create Error!");return alert("Vhh7 create Error!");};rgl.bindFramebuffer(m_bufferType, null);};};this.KFF1 = function(rgl,pw,ph){m_gl = rgl;if(m_fbo == null){this.KPP3(rgl, pw, ph);}else if(m_width != pw || m_height != ph){if(m_depthStencilRBO != null){rgl.deleteRenderbuffer(m_depthStencilRBO);m_depthStencilRBO = null;};if(m_depthRBO != null){rgl.deleteRenderbuffer(m_depthRBO);m_depthRBO = null;};rgl.deleteFramebuffer(m_fbo);m_fbo = null;this.KPP3(rgl, pw, ph);};};this.KNN3 = function(rgl){m_gl = null;};this.Kff0 = function(){let str = "";switch(m_bufferLType){case Vll3.FRAMEBUFFER:str = "FRAMEBUFFER";break;case Vll3.DRAW_FRAMEBUFFER:str = "DRAW_FRAMEBUFFER";break;case Vll3.READ_FRAMEBUFFER:str = "READ_FRAMEBUFFER";break;};return "[Vhh7("+str+")]";};};Vhh7.bindToBackbuffer = function(gl,t){switch (t){case Vll3.DRAW_FRAMEBUFFER:gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);break;case Vll3.READ_FRAMEBUFFER:gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);break;default:gl.bindFramebuffer(gl.FRAMEBUFFER, null);};};function Vii8(){let s_blendMode = Vnn8.NORMAL;let s_blendDisabled = true;let s_cullMode = Vkk7.NONE;let s_cullDisabled = true;let m_gl = null;let s_depthTestType = Vcc1.DISABLE;this.KGG2 = function(r){m_gl = r.gl;};this.Kyyy8 = function(mode){switch (mode){case Vkk7.BACK:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.BACK);};break;case Vkk7.FRONT:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.FRONT);};break;case Vkk7.FRONT_AND_BACK:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.FRONT_AND_BACK);};break;case Vkk7.NONE:case Vkk7.DISABLE:if(s_cullMode != mode){s_cullMode = mode;if(s_cullDisabled){s_cullDisabled = true;m_gl.disable(m_gl.CULL_FACE);};};break;default:break;};};this.KWW3 = function(mode){if(s_blendMode != mode){s_blendMode = mode;switch(mode){case Vnn8.NORMAL:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ZERO);break;case Vnn8.TRANSPARENT:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_ALPHA, m_gl.ONE_MINUS_SRC_ALPHA);break;case Vnn8.ALPHA_ADD:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ONE_MINUS_SRC_ALPHA);break;case Vnn8.ADD:if (s_blendDisabled) {m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_ALPHA, m_gl.ONE);break;case Vnn8.ADD2:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ONE);break;case Vnn8.INVERSE_ALPHA:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.SRC_ALPHA);break;case Vnn8.BLAZE:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_COLOR, m_gl.ONE);break;case Vnn8.OVERLAY:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.DST_COLOR, m_gl.DST_ALPHA);break;case Vnn8.OVERLAY2:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.DST_COLOR, m_gl.SRC_ALPHA);break;case Vnn8.DISABLE:if (!s_blendDisabled) { m_gl.disable(m_gl.BLEND); s_blendDisabled = true; };break;default:break;};};};this.Kggg4 = function(type){if (s_depthTestType != type) {;s_depthTestType = type;switch (type){case Vcc1.RENDER_ALWAYS:m_gl.depthMask(false); m_gl.depthFunc(m_gl.ALWAYS);break;case Vcc1.RENDER_SKY:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_OPAQUE:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LESS);break;case Vcc1.RENDER_OPAQUE_OVERHEAD:m_gl.depthMask(false); m_gl.depthFunc(m_gl.EQUAL);break;case Vcc1.RENDER_DECALS:m_gl.depthMask(false); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_BLEND:case Vcc1.RENDER_BLEND_SORT:case Vcc1.RENDER_TRANSPARENT_SORT:m_gl.depthMask(false); m_gl.depthFunc(m_gl.LESS);break;case Vcc1.RENDER_WIRE_FRAME:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_NEXT_LAYER:m_gl.depthMask(false); m_gl.depthFunc(m_gl.ALWAYS);break;case Vcc1.RENDER_WIRE_FRAME_NEXT:break;default:break;};};};};Vii8.rtexs = [null,null,null,null,null,null,null,null,null,null,null,null];Vii8.reset = function(){if(RUN_DEBUG_TRACE_ONE_TIME){};for(let i = 0; i < 12; ++i){Vii8.rtexs[i] = null;};Vii8.drawcallTimes = 0;};Vii8.roState = 0x0;Vii8.drawcallTimes = 0;function Vgg6(){let m_self = this;let m_rState = new Vii8();this.Kggg8 = null;this.KDD5 = null;this.gl = null;this.Kmmm8 = new Vkk4();let m_gl = null;let m_viewX = 0;let m_viewY = 0;let m_viewW = 0;let m_viewH = 0;let m_speViewW = 0;let m_speViewH = 0;this.Kqq2 = new Vcc2();this.KYY8 = 0;let Vjj4 = {mr:true,mg:true,mb:true,ma:true};let m_canvas2D = null;let m_ctx2D = null;let m_stCanvas = null;this.viewSizeAutoMatchStageSizeEnabled = true;this.KAAA5 = true;this.Kyyy5 = true;this.Kuuu5 = null;function Vhh8(evt){console.log(evt);};function Vcc3(evt){console.log(evt);};this.KFF1 = function(document, canvas_id_name){this.Kggg8 = document;m_stCanvas = document.getElementById(canvas_id_name);this.KDD5 = m_stCanvas;m_canvas2D = document.getElementById("text");m_ctx2D = m_canvas2D.getContext("2d");document.onkeydown = function(evt){Keyboard.Krrr5(evt);};document.onkeyup = function(evt){Keyboard.Kii6(evt);};this.KDD5.onmousedown = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;if(evt.button == 0){Stage.Kttt2();}else if(evt.button == 2){Stage.Keee6();};};this.KDD5.onmouseup = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;if(evt.button == 0){Stage.KBBB0();}else if(evt.button == 2){Stage.KXX0();};};this.KDD5.onmousemove = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;Stage.Kyyy4();};var attr = {depth:this.KAAA5,premultipliedAlpha: false, alpha: true, antialias:false,stencil:this.Kyyy5,preserveDrawingBuffer:true };if(Vpp4()){m_gl = this.gl = this.KDD5.getContext('webgl',attr) || this.KDD5.getContext("experimental-webgl",attr);if(m_gl == null || m_gl == undefined){Vee4("WebGL1 can not support!");return;}else{};this.Kuuu5 = m_gl.getExtension('WEBGL_draw_buffers');if (this.Kuuu5 != null) {;}else{Vee4("WEBGL_draw_buffers Extension can not support!");return;};}else{m_gl = this.gl = this.KDD5.getContext('webgl2',attr);if(m_gl == null || m_gl == undefined){Vee4("WebGL2 can not support!");return;}else{};};if(this.KAAA5) m_gl.enable(m_gl.DEPTH_TEST);else m_gl.disable(m_gl.DEPTH_TEST);if(this.Kyyy5) m_gl.enable(m_gl.STENCIL_TEST);else m_gl.disable(m_gl.STENCIL_TEST);m_gl.enable(m_gl.CULL_FACE);m_gl.cullFace(m_gl.BACK);Stage.Kvv6 = m_gl.drawingBufferWidth;Stage.KMM1 = m_gl.drawingBufferHeight;Stage.Kkkk5 = Stage.Kvv6 * 0.5;Stage.Kqqq1 = Stage.KMM1 * 0.5;if (!this.gl) {;alert('Unable to initialize WebGL. Your browser or machine may not support it.');return;};this.Khh8();window.addEventListener('resize', this.Khh8, false);m_rState.KGG2(this);this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT | m_gl.STENCIL_BUFFER_BIT;this.KDD5.addEventListener('webglcontextrestored', Vhh8, false);this.KDD5.addEventListener('webglcontextlost',Vcc3,false);m_viewW = Stage.Kvv6;m_viewH = Stage.KMM1;};this.Kbbb5 = function(){if(m_gl != null){return m_gl.isContextLost();};return false;};this.Kyyy1 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT;};this.Krrr6 = function(){this.KYY8 = m_gl.DEPTH_BUFFER_BIT;};this.KJJ6 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT;};this.KSS8 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT | m_gl.STENCIL_BUFFER_BIT;};this.Kpp5 = function(){return m_gl;};this.KKK1 = function(){return m_rState;};let m_displayWidth = 800.0;let m_displayHeight = 600.0;this.Khh8 = function (){m_displayWidth  = m_self.KDD5.clientWidth;m_displayHeight = m_self.KDD5.clientHeight;if (m_self.KDD5.width  != m_displayWidth ||m_self.KDD5.height != m_displayHeight){m_self.KDD5.width  = m_displayWidth;m_self.KDD5.height = m_displayHeight;};Stage.Kvv6 = m_gl.drawingBufferWidth;Stage.KMM1 = m_gl.drawingBufferHeight;Stage.Kkkk5 = Stage.Kvv6 * 0.5;Stage.Kqqq1 = Stage.KMM1 * 0.5;Stage.Kzzz6();if(m_self.viewSizeAutoMatchStageSizeEnabled){m_self.Kmmm1(Stage.Kvv6, Stage.KMM1);};};this.KXX7 = function(){return Stage.Kvv6;};this.Khhh0 = function(){return Stage.KMM1;};this.KII5 = "";let m_lastTime = 0;let m_fps = 60;this.KLL2 = true;this.KAA2 = false;this.Kwww1 = function(){return m_fps;};this.Kmm2 = function(){let t = new Date().getTime();if(m_lastTime > 0){m_lastTime = t - m_lastTime;m_fps = Math.round(1000/m_lastTime);};m_lastTime = t;if(this.KLL2){m_ctx2D.clearRect(0, 0, 600, 70);m_ctx2D.font="50px Verdana";m_ctx2D.fillStyle = "red";m_ctx2D.textAlign = "left";m_ctx2D.fillText("FPS:"+m_fps+this.KII5, 5,50);};};this.KWW2 = function(mr,mg,mb,ma){if(mr != undefined){Vjj4.mr = mr;};if(mg != undefined){Vjj4.mg = mg;};if(mb != undefined){Vjj4.mb = mb;};if(ma != undefined){Vjj4.ma = ma;};};this.Kjj1 = function(depth){m_gl.clearDepth(depth);};this.Knnn5 = function(){m_gl.clearColor(this.Kmmm8.r,this.Kmmm8.g,this.Kmmm8.b,this.Kmmm8.a);m_gl.clear(this.KYY8);};let m_scissorEnabled = false;this.KTT3 = function(boo){if(boo){if(!m_scissorEnabled){m_scissorEnabled = true;m_gl.enable(m_gl.SCISSOR_TEST);};}else{if(m_scissorEnabled){m_scissorEnabled = false;m_gl.disable(m_gl.SCISSOR_TEST);};};};this.KEE0 = function(px,py,pw,ph){m_gl.scissor(px,py, pw,ph);};let m_viewPortChanged = true;this.KGG7 = function(vw,vh){m_speViewW = vw;m_speViewH = vh;m_viewPortChanged = true;};this.Kmmm1 = function(pw,ph){if(m_viewW != pw || m_viewH != ph){m_viewW = pw;m_viewH = ph;this.Kqq2.Kss6(m_viewW, m_viewH);m_viewPortChanged = true;};};this.Klll5 = function(px,py,pw,ph){if(m_viewX != px || m_viewY != py){m_viewX = px;m_viewY = py;m_viewPortChanged = true;};if(m_viewW != pw || m_viewH != ph){m_viewW = pw;m_viewH = ph;this.Kqq2.Kss6(m_viewW, m_viewH);m_viewPortChanged = true;};};this.Kxxx1 = function(px,py,immediately){if(m_viewX != px || m_viewY != py){m_viewX = px;m_viewY = py;m_viewPortChanged = true;};if(immediately == undefined){immediately = false;};if(immediately){m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};};this.KGG8 = function(){return m_viewW;};this.Ksss2 = function(){return m_viewH;};this.KQQ4 = function(){return m_viewX;};this.Kjjj4 = function(){return m_viewY;};this.Kvvv0 = function(){m_rState.Kggg4(Vcc1.RENDER_OPAQUE);Vii8.reset();};this.Kggg5 = function(){m_gl.clearColor(this.Kmmm8.r,this.Kmmm8.g,this.Kmmm8.b,this.Kmmm8.a);m_gl.colorMask(Vjj4.mr,Vjj4.mg,Vjj4.mb,Vjj4.ma);m_gl.clearDepth(1.0);m_rState.Kggg4(Vcc1.RENDER_OPAQUE);if(this.KAAA5){m_gl.clear(this.KYY8);}else{m_gl.clear(m_gl.COLOR_BUFFER_BIT);};if(m_speViewW < 1){if(m_viewPortChanged){m_viewPortChanged = false;m_fboViewRect[0] = m_viewX;m_fboViewRect[1] = m_viewY;m_fboViewRect[2] = m_viewW;m_fboViewRect[3] = m_viewH;m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};}else{m_gl.viewport(m_viewX, m_viewY, m_speViewW, m_speViewH);m_speViewW = 0;};};this.Krr5 = function(){return m_displayWidth;};this.Kiii8 = function(){return m_displayHeight;};this.Kgg6 = function(){};let m_fboBuf = null;let m_fboClearBoo = true;let m_fboViewRect = new Uint16Array(4);let m_fboViewRectBoo = false;let m_fboType = Vll3.FRAMEBUFFER;let m_fboIndex = 0;let m_fboBufList = [null, null, null, null, null, null, null, null, null, null];let m_fboBiltRect = new Int32Array(8);this.KEE2 = function(texProxy,enableDepth,enableStencil, outputIndex){if(texProxy == undefined) texProxy = null;if(outputIndex == undefined || outputIndex == null){outputIndex = 0;};if(texProxy == null && outputIndex == 0){m_gl.bindFramebuffer(m_gl.FRAMEBUFFER,null);this.Kggg5();}else{if (outputIndex == 0){if(m_fboBuf != null){m_fboBuf.KFF1(m_gl, texProxy.getWidth(), texProxy.getHeight());};if (m_fboIndex >= 0){if (m_fboBuf == nullptr){m_fboBuf = new Vhh7(m_fboType);m_fboBuf.KAA2 = this.KAA2;m_fboBuf.Kuuu5 = this.Kuuu5;m_fboBufList[m_fboIndex] = m_fboBuf;m_fboBuf.Kooo7 = enableDepth;m_fboBuf.KWW5 = enableStencil;m_fboBuf.KFF1(m_gl, texProxy.getWidth(), texProxy.getHeight());};};};if(m_fboBuf != null){m_fboBuf.Knn3(m_gl,texProxy,outputIndex);};m_fboClearBoo = true;};};this.Kyy3 = function(int_px, int_py, int_pw, int_ph){m_fboViewRect[0] = int_px;m_fboViewRect[1] = int_py;m_fboViewRect[2] = int_pw;m_fboViewRect[3] = int_ph;m_fboViewRectBoo = true;};this.Kzz5 = function(int_index, frameBuffer_type){if (int_index > 7){int_index = 7;}else if(int_index < 0){int_index = 0;};if(frameBuffer_type == undefined){frameBuffer_type = Vll3.FRAMEBUFFER;};m_fboIndex = int_index;m_fboType = frameBuffer_type;m_fboBuf = m_fboBufList[m_fboIndex];};this.KSS4 = function(bool_clearColor, bool_clearDepth, bool_clearStencil){if(Vpp4()){if(m_fboBuf != null){if(m_fboClearBoo){m_fboClearBoo = false;m_fboBuf.use(m_gl);this.Kggg5();};};}else if (m_fboBuf != nullptr){if (m_fboClearBoo){m_fboClearBoo = false;m_fboBuf.use(m_gl);if (bool_clearColor){m_fboBuf.Kiii5(m_gl, this.Kmmm8);};if (m_fboBuf.Kooo7){if (m_fboBuf.KWW5){if (bool_clearDepth && bool_clearStencil){m_fboBuf.KHH3(m_gl);}else if (bool_clearDepth){m_fboBuf.Kppp0(m_gl);}else if (bool_clearStencil){m_fboBuf.KCC4(m_gl);};}else if(bool_clearDepth){m_fboBuf.Kppp0(m_gl);};}else if (bool_clearStencil && m_fboBuf.KWW5){m_fboBuf.KCC4(m_gl);};this.Kvvv0();m_fboBiltRect[4] = m_fboBiltRect[0] = m_viewX;m_fboBiltRect[5] = m_fboBiltRect[1] = m_viewY;m_fboBiltRect[6] = m_fboBiltRect[2] = m_viewX + m_viewW;m_fboBiltRect[7] = m_fboBiltRect[3] = m_viewY + m_viewH;if (m_fboViewRectBoo){m_fboViewRectBoo = false;m_viewPortChanged = true;m_gl.viewport(m_fboViewRect[0], m_fboViewRect[1], m_fboViewRect[2], m_fboViewRect[3]);}else{m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};};};};this.Kkkk6 = function(frameBuffer_type){if(frameBuffer_type == undefined){frameBuffer_type = Vll3.FRAMEBUFFER;};Vhh7.bindToBackbuffer(m_gl,frameBuffer_type);this.Kggg5();};this.KTT2 = function(px, py, width, height, format, type, pixels){m_gl.readPixels(px, py, width, height, format, type, pixels);};this.Khh1 = function(int_px, int_py, int_pw, int_ph){m_fboBiltRect[0] = int_px;m_fboBiltRect[1] = int_py;m_fboBiltRect[2] = int_px + int_pw;m_fboBiltRect[3] = int_py + int_ph;};this.Kqq4 = function(int_px, int_py, int_pw, int_ph){m_fboBiltRect[4] = int_px;m_fboBiltRect[5] = int_py;m_fboBiltRect[6] = int_px + int_pw;m_fboBiltRect[7] = int_py + int_ph;};this.KUU8 = function(int_readFBOIndex, int_writeFBOIndex, int_mask_bitfiled, int_filter){if (readFBOIndex > 7){readFBOIndex = 7;};if (writeFBOIndex > 7){writeFBOIndex = 7;};if (readFBOIndex >= 0 && m_fboBufList[readFBOIndex] != nullptr){m_fboBufList[readFBOIndex].Kxx7(Vll3.READ_FRAMEBUFFER);}else{Vhh7.bindToBackbuffer(Vll3.READ_FRAMEBUFFER);};if (writeFBOIndex >= 0 && m_fboBufList[writeFBOIndex] != nullptr){m_fboBufList[writeFBOIndex].Kxx7(Vll3.DRAW_FRAMEBUFFER);}else{FrameBufferObject.bindToBackbuffer(Vll3.DRAW_FRAMEBUFFER);};if(int_mask_bitfiled == undefined){int_mask_bitfiled = GL_COLOR_BUFFER_BIT;};if(int_filter == undefined){int_filter = m_gl.NEAREST;};m_gl.blitFramebuffer(m_fboBiltRect[0], m_fboBiltRect[1], m_fboBiltRect[2], m_fboBiltRect[3], m_fboBiltRect[4], m_fboBiltRect[5], m_fboBiltRect[6], m_fboBiltRect[7], int_mask_bitfiled, int_filter);};this.Kzzz6 = function(){if (this.Kqq2 != null){this.Kqq2.Kzzz6();Vdd2.Reset();};};this.KNN3 =function(){};};function Vdd0(){this.use = function(gl){};this.Kjj6 = function(gl){};this.Kqq0 = null;};function Vll0(){this.getWidth = function(){return 0;};this.getHeight = function(){return 0;};this.use = function(gl){};this.Kjj6 = function(gl){};this.Kmm0 = function(){return 0;};};function Vll8(){this.tex = null;this.KCC1 = null;this.Kll5 = null;this.Kxx4 = 0;this.Kyyy6 = 0;this.Kuuu8 = 0;this.Kaaa6 = 0;this.KBBB4 = true;this.Kll1 = null;this.KBB1 = "";this.KKK3 = true;this.KBBB2 = 1;this.KGG1 = false;let m_gtexList = null;let m_gtexIndexList = null;let m_texTotal = 0;let m_texTargetList = null;this.KOO2 = function(){return m_texTotal;};let m_texProxList = null;this.Kvvv3 = function(gl, ptex){this.tex = ptex;if(ptex != null){if( ptex.Khh5 ){this.KGG1 = true;};m_texProxList = [ptex];m_gtexList = [];m_gtexIndexList = [];ptex.Kjj6( gl );m_gtexIndexList.push(gl.TEXTURE0);m_gtexList.push( ptex.Knn2());let nextTex = ptex.Kqq0;let t = ptex.KSS7;m_texTotal = 1;m_texTargetList = [ptex.KMM2()];while(nextTex != null){if( nextTex.Khh5 ){this.KGG1 = true;};m_texProxList.push( nextTex );nextTex.Kjj6( gl );m_texTargetList.push( nextTex.KMM2() );m_gtexIndexList.push(gl.TEXTURE0 + t);m_gtexList.push( nextTex.Knn2());;t += nextTex.KSS7;nextTex = nextTex.Kqq0;m_texTotal ++;if(nextTex == ptex){Vee4("Vll8::collectTex(), nextTex == preTex, Error!");return;};};}else{m_texTotal = 0;};};this.KVV5 = function(gl, ptexList){m_texProxList = ptexList;if(ptexList.length > 0){this.tex = ptexList[0];if( ptexList[0].Khh5 ){this.KGG1 = true;};m_gtexList = [];m_gtexIndexList = [];ptexList[0].Kjj6( gl );m_gtexIndexList.push(gl.TEXTURE0);m_gtexList.push( ptexList[0].Knn2());m_texTargetList = [ ptexList[0].KMM2() ];let t = 0;t = ptexList[0].KSS7;m_texTotal = 1;while(m_texTotal < ptexList.length){if( ptexList[m_texTotal].Khh5 ){this.KGG1 = true;};ptexList[m_texTotal].Kjj6( gl );m_texTargetList.push( ptexList[m_texTotal].KMM2() );m_gtexIndexList.push(gl.TEXTURE0 + t);m_gtexList.push( ptexList[m_texTotal].Knn2());;t += ptexList[m_texTotal].KSS7;m_texTotal ++;};}else{m_texTotal = 0;};};this.Kzz0 = function(gl,pmaterial){let texList = pmaterial.KII2();if(texList != null){this.KVV5(gl,texList);}else{let tex = pmaterial.KMM4();if(tex != null){this.Kvvv3(gl,tex);};};};this.Ktt7 = function(gl,pmesh,shdp){pmesh.KCC1.Kjj6( gl, shdp );this.KCC1 = pmesh.KCC1;this.KCC1.Krr3 = pmesh.Krr3;this.KCC1.Kuuu6 = pmesh.Kuuu6;this.KCC1.Kll6 = pmesh.Kll6;this.KCC1.KVV0 = pmesh.KVV0;};this.Krr1 = function(gl){if(RUN_DEBUG_TRACE_ONE_TIME){};for(let i = 0; i < m_texTotal; ++i){if(Vii8.rtexs[i] != m_gtexList[i]){if(RUN_DEBUG_TRACE_ONE_TIME){};gl.activeTexture(m_gtexIndexList[i]);gl.bindTexture(m_texTargetList[i], m_gtexList[i]);Vii8.rtexs[i] = m_gtexList[i];};};if(RUN_DEBUG_TRACE_ONE_TIME){};};this.KEE4 = function(gl){for(let i = 0; i < m_texTotal; ++i){if(Vii8.rtexs[i] != m_gtexList[i]){m_texProxList[i].use(gl);Vii8.rtexs[i] = m_gtexList[i];};};};this.Kvvv0 = function(){m_gtexIndexList = null;m_gtexList = null;m_texTotal = 0;this.tex = null;this.KCC1 = null;this.Kll1 = null;if(this.Kll5 != null){this.Kll5.KNN3();this.Kll5 = null;};this.Kxx4 = 0;this.Kyyy6 = 0;this.Kuuu8 = 0;this.Kaaa6 = 0;this.KKK3 = true;this.KBBB2 = 1;};};Vll8.__units = [];Vll8.getUnit = function(){if(Vll8.__units.length){return Vll8.__units.pop();};return new Vll8();};Vll8.saveUnit = function(unit){Vll8.__units.push(unit);};function Vee2(){this.ro = null;this.Kpp2 = null;this.roI = 0;this.Keee4 = 0;this.Kll0 = 0;this.Kqq0 = null;this.Kqq7 = null;};function Vaa4(){let m_oArr = [];let m_indexList = [];let m_maxIndex = 0;let m_claspPool = [];this.KII1 = function(){if(m_claspPool.length > 0){return m_claspPool.pop();};return new Vee2();};this.KAAA2 = function(clasp){if(m_indexList.length < 1){let index = m_maxIndex;m_oArr.push(clasp);m_maxIndex ++;return index;}else{let i = m_indexList.pop();m_oArr[i] = clasp;return i;};Vee4("Too many render object!!!!");abort();return 0;};this.Knn7 = function(pi){return m_oArr[pi];};this.KMM0 = function(pi){if(m_oArr[pi] != null){let p = m_oArr[pi];p.ro = null;p.Kpp2 = null;p.roI = 0;p.Keee4 = 0;p.Kll0 = 0;p.Kqq0 = null;p.Kqq7 = null;m_claspPool.push(p);m_oArr[pi] = null;m_indexList.push(pi);};};this.Kuuu3 = function(ro){let i = ro.KFF5();if(i > -1){let clasp = this.Knn7(i);return clasp.Kpp2;};return null;};};function Vmm8(){};Vmm8.clasp = new Vaa4();function Vii3(){};Vii3.buildGlobal = function(material, camera,shdp){let m_sharedUniform = material.Kvvv2(camera);if(m_sharedUniform == null){m_sharedUniform = new Vdd0();}else{puniform = m_sharedUniform;while(puniform != null){if(puniform.Kjj2 != null && puniform.KLL5 == null){puniform.Kxx2 = [];puniform.KLL5 = [];puniform.KBB3 = puniform.Kjj2.length;for(i = 0; i < puniform.KBB3; ++i){puniform.Kxx2.push( shdp.getUniformTypeByNS(puniform.Kjj2[i]) );puniform.KLL5.push( shdp.KQQ5(puniform.Kjj2[i]) );};};puniform = puniform.Kqq0;};};return m_sharedUniform;};Vii3.buildLocal = function(sUniform, shdp){let puniform = sUniform;while(puniform != null){if(puniform.Kjj2 != null && puniform.KLL5 == null){puniform.Kxx2 = [];puniform.KLL5 = [];puniform.KBB3 = puniform.Kjj2.length;for(i = 0; i < puniform.KBB3; ++i){puniform.Kxx2.push( shdp.getUniformTypeByNS(puniform.Kjj2[i]) );puniform.KLL5.push( shdp.KQQ5(puniform.Kjj2[i]) );};};puniform = puniform.Kqq0;};};function Vhh3(){this.Kkkk8 = null;this.KPP7 = null;let m_sign = true;let m_sharedUniform = null;let m_units = [];let m_unitsLen = 0;this.Khh7 = null;this.KAAA7 = null;this.KKK6 = "";this.Kkk5 = -1;this.Kll0 = -1;let m_tempUnit = new Vll8();this.KLL3 = function(material,camera,ro){if(m_sharedUniform == null){m_sharedUniform = Vii3.buildGlobal(material, camera, this.KAAA7);};let unit = Vll8.getUnit();unit.KBB1 = ro.KBB1;unit.Kll5 = material.KEE6(ro);if(unit.Kll5 == null){unit.Kll5 = new Vdd0();}else{Vii3.buildLocal(unit.Kll5, this.KAAA7);};ro.Kzzz6();unit.Kxx4 = ro.Kxx4;unit.Kyyy6 = ro.Kyyy6;unit.Kuuu8 = ro.Kuuu8;unit.Kaaa6 = ro.Kaaa6;unit.KBBB4 = ro.KBBB4;m_units.push( unit );m_unitsLen ++;return unit;};this.use = function(gl,gshd,pcamera){if(m_unitsLen < 1){return;};let gmt = this.KPP7;this.KPP7 = null;if(gmt != null && gmt.KYY0() != null){gshd = gmt.KYY0();if(gmt.Kwww0 == null){gmt.KYY0().Kjj6( gl );gmt.Kwww0 = Vii3.buildGlobal(gmt, pcamera, gshd);gmt.Kwww0.KBB4 = true;};gl.useProgram( gshd.Kppp5() );gshd.useTexLocation();let puniform = gmt.Kwww0;puniform.use(gl);puniform = puniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};};m_sign = (gshd == null);let rshdp = this.KAAA7;let i = 0;let unit = null;var prevb = null;var preUnit = m_tempUnit;let puniform = null;for(; i < m_unitsLen; ++i){unit = m_units[i];if(unit.KKK3){if(this.KAAA7.dataUniformEnabled){if(m_sign){gl.useProgram( this.Khh7 );this.KAAA7.useTexLocation();m_sharedUniform.use(gl);puniform = m_sharedUniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};m_sign = false;};if(gshd == null){unit.Kll5.use(gl);puniform = unit.Kll5.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};}else{unit.Kll5.KTT6(gl, gshd);puniform = unit.Kll5.Kqq0;while(puniform != null){puniform.KTT6(gl, gshd);puniform = puniform.Kqq0;};};}else{continue;};if(gshd == null){if(prevb != unit.KCC1){prevb = unit.KCC1;prevb.use( rshdp );};}else{if(prevb != unit.KCC1){prevb = unit.KCC1;prevb.use( gshd );};};if(unit.Kll1 != preUnit.Kll1){if(unit.tex != null){if( unit.KGG1 ){unit.KEE4(gl);}else{unit.Krr1(gl);};};};if(Vii8.roState != unit.Kaaa6){Vii8.roState = unit.Kaaa6;this.Kkkk8.Kyyy8(unit.Kxx4);this.Kkkk8.KWW3(unit.Kyyy6);this.Kkkk8.Kggg4(unit.Kuuu8);};unit.KCC1.Kzzz1(gl);preUnit = unit;Vii8.drawcallTimes++;}else{if(unit.KBBB2 < 0){m_units.splice(i,1);i--;m_unitsLen --;unit.Kvvv0();Vll8.saveUnit( unit );};};};};this.KOO8 = function(){let i = 0;let unit = null;for(; i < m_unitsLen; ++i){unit = m_units.pop();unit.Kvvv0();Vll8.saveUnit( unit );};m_unitsLen = 0;};};function Vjj0(){this.KBB1 = "Vjj0";this.Kuu3 = 0;this.Kzzz4 = null;this.Ksss7 = null;this.uid = 0;let m_nodes = [];let m_nodesTotal = 0;let m_claspTotal = 0;let m_claspBegin = null;let m_claspEnd = null;let m_roiBuilder = Vmm8.clasp;this.Kkkk8 = null;let m_nodeUList = null;let m_sceneSpace = null;this.KLL3 = function(gl,camera,ro){if(m_nodeUList == null){m_nodeUList = [];for(let nk = 0; nk < 1100; ++nk){m_nodeUList.push(null);};};let material = ro.Kkk6();let mesh = ro.Kpp7();let shdp = material.KYY0();shdp.Kjj6( gl );if(!shdp.dataUniformEnabled){Vee4("Error: "+shdp.Kttt0()+" upload failure !!!!!");};let node = m_nodeUList[shdp.uid];if(node == null){node = new Vhh3();node.Kkkk8 = this.Kkkk8;node.KAAA7 = shdp;node.Kkk5 = shdp.uid;node.Kll0 = m_nodesTotal;node.Khh7 = shdp.Kppp5();m_nodeUList[node.Kkk5] = node;m_nodes.push( node );m_nodesTotal++;};let unit = node.KLL3(material,camera,ro);let clasp = m_roiBuilder.KII1();unit.Kzz0(gl, material );unit.Ktt7(gl, mesh, shdp );unit.Kll1 = ro.Kkk6();clasp.ro = ro;clasp.Kpp2 = unit;ro.Kpp4(m_roiBuilder.KAAA2(clasp));if(m_claspBegin == null){m_claspEnd = m_claspBegin = clasp;}else{if(m_claspEnd.Kqq7 != null){m_claspEnd.Kqq0 = clasp;clasp.Kqq7 = m_claspEnd;m_claspEnd = clasp;}else{m_claspBegin.Kqq0 = clasp;clasp.Kqq7 = m_claspBegin;m_claspEnd = clasp;};};m_claspTotal ++;};this.Kiii0 = function(ro){if(m_claspBegin == null){return false;};let i = ro.KFF5();let nto = m_roiBuilder.Knn7(i);if(nto != null && nto.ro == ro){nto.ro.Kpp4( -1 );nto.Kpp2.KKK3 = false;nto.Kpp2.KBBB2 = -1;nto.Kpp2 = null;if(nto != m_claspBegin){nto.Kqq7.Kqq0 = nto.Kqq0;if(nto.Kqq0 != null){nto.Kqq0.Kqq7 = nto.Kqq7;nto.Kqq0 = null;}else{m_claspEnd = nto.Kqq7;};nto.Kqq7 = null;}else{m_claspBegin = nto.Kqq0;if(m_claspBegin != null){m_claspBegin.Kqq7 = null;}else{m_claspEnd = null;};nto.Kqq0 = null;};m_roiBuilder.KMM0( i );nto.ro = null;return true;};return false;};this.KOO8 = function(){let nto = m_claspBegin;let nextro = nto;while(nextro != null){nto = nextro;nextro = nto.Kqq0;nto.Kqq0 = null;nto.Kqq7 = null;nto.Kpp2.KKK3 = false;nto.Kpp2.KBBB2 = -1;nto.Kpp2 = null;nto.ro.Kpp4( -1 );m_roiBuilder.KMM0( nto.ro.KFF5() );nto.ro = null;};m_claspBegin = m_claspEnd = null;if(m_nodeUList != null){let len = m_nodeUList.length;for(let i = 0; i < len; ++i){if(m_nodeUList[i]  != null){m_nodeUList[i].KOO8();};};};};let m_currCamera = null;this.Kzzz6 = function(camera,flag){m_currCamera = camera;let next = m_claspBegin;let co = null;let ro = null;m_sceneSpace = this.Kzzz4;if(m_sceneSpace == null){while(next != null){co = next;next = next.Kqq0;ro = co.ro;if(flag > 0 && ro.KGG0 > 0)ro.Kzzz6();if(ro.Koo7){if(co.Kpp2.KBBB4){co.Kpp2.KKK3 = camera.Kjj4(ro);};}else{co.Kpp2.KKK3 = ro.Koo7;};};}else{while(next != null){co = next;next = next.Kqq0;ro = co.ro;if(flag > 0 && ro.KGG0 > 0)ro.Kzzz6();if(ro.Koo7){if(co.Kpp2.KBBB4){co.Kpp2.KKK3 = camera.Kjj4(ro);if(co.Kpp2.KKK3){if(ro.KXX2)m_sceneSpace.Khh3(ro);};};}else{co.Kpp2.KKK3 = ro.Koo7;};};};};this.KSS3 = function(){};this.Klll4 = function(nodeI,material){if(m_nodesTotal > nodeI)m_nodes[nodeI].KPP7 = material;};this.KPP2 = function(oldMaterial,newMaterial){if(m_nodeUList != null && oldMaterial.KYY0() != null){let node = m_nodeUList[oldMaterial.KYY0().uid];if(node != null){node.KPP7 = newMaterial;};};};this.use = function(gl){let gshd = null;if(this.Ksss7 != null && this.Ksss7.KYY0() != null){gshd = this.Ksss7.KYY0();if(this.Ksss7.Kwww0 == null){this.Ksss7.KYY0().Kjj6( gl );this.Ksss7.Kwww0 = Vii3.buildGlobal(this.Ksss7, m_currCamera, gshd);this.Ksss7.Kwww0.KBB4 = true;};gl.useProgram( gshd.Kppp5() );gshd.useTexLocation();let puniform = this.Ksss7.Kwww0;puniform.use(gl);puniform = puniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};};let i = 0;let node = null;for(; i < m_nodesTotal; ++i){node = m_nodes[i];node.use(gl,gshd,m_currCamera);};this.Ksss7 = null;};};function Vkk3(){this.Kzzz4 = null;this.Ksss7 = null;this.Kkkk8 = null;let m_sceneSpace = null;let m_roList = [];let m_roTotal = 0;this.KLL3 = function(gl,camera,ro){let material = ro.Kkk6();let tex = material.KMM4();let mesh = ro.Kpp7();if(tex == null) tex = new Vll0();let shdp = material.KYY0();shdp.Kjj6( gl );if(!shdp.dataUniformEnabled){Vee4("Error: "+shdp.Kttt0()+" upload failure !!!!!");};tex.Kjj6( gl );let nextTex = tex.Kqq0;while(nextTex != null){nextTex.Kjj6(gl);nextTex = nextTex.Kqq0;if(nextTex == tex){Vee4("Vjj0::addRO(), nextTex == tex, Error!");break;};};mesh.KCC1.Kjj6( gl );m_roList.push( ro );m_roTotal ++;};this.Kiii0 = function(ro){return false;};let m_currCamera = null;this.Kzzz6 = function(camera){m_currCamera = camera;let co = null;let ro = null;m_sceneSpace = this.Kzzz4;let i = 0;let len = m_roList.length;if(m_sceneSpace == null || !m_sceneSpace.Khhh8()){while(i < len){ro = m_roList[i];ro.Kzzz6();if(ro.Koo7){if(ro.KBBB4){if( camera.Kjj4(ro) ){this.Khhh4(ro);};};};++i;};}else{while(i < len){ro = m_roList[i];ro.Kzzz6();if(ro.Koo7){if(co.KBBB4){if(camera.Kjj4(ro)){if(ro.KXX2){m_sceneSpace.Khh3(ro);};this.Khhh4(ro);};};};++i;};};};let m_material = null;let m_mesh = null;let m_tex = null;let m_shdp = null;let m_uniform = null;let m_preShdp = null;let m_preMaterial = null;let m_preTex = null;let m_preVtxBuf = null;let m_renderROBoo = false;let m_renderState = -1;this.KSS3 = function(){m_preMaterial = null;m_preTex = null;m_preShdp = null;m_preVtxBuf = null;m_renderState = -1;};this.Khhh4 = function(ro){if(ro != null && ro.Koo7){m_material = ro.Kkk6();m_mesh = ro.Kpp7();m_tex = null;m_renderROBoo = false;if(m_mesh != null && m_mesh.KCC1 != null && m_material != null){m_shdp = m_material.KYY0();if(m_shdp != null){if(m_shdp.haveTexture()){m_tex = m_material.KMM4();if(m_tex != null && m_tex.KKK7()){m_renderROBoo = true;if(!m_tex.isGPUEnabled()){m_tex.Kjj6(m_gl);};};}else{m_renderROBoo = true;};};};if(m_renderROBoo){if(m_preMaterial != m_material){if(m_preShdp != m_shdp){if(!m_shdp.isGPUEnabled()){m_shdp.Kjj6(m_gl);};m_preShdp = m_shdp;if(m_shdp.dataUniformEnabled){m_gl.useProgram( m_shdp.Kppp5() );m_shdp.useTexLocation();if(m_shdp.sharedUniform == null){m_shdp.sharedUniform = m_material.Kvvv2(null);if(m_shdp.sharedUniform != null){m_uniform = m_shdp.sharedUniform;while(m_uniform != null){if(m_uniform.Kjj2 != null && m_uniform.KLL5 == null){m_uniform.Kxx2 = [];m_uniform.KLL5 = [];m_uniform.KBB3 = m_uniform.Kjj2.length;let i = 0;while(i < m_uniform.KBB3){m_uniform.Kxx2.push( m_shdp.getUniformTypeByNS(m_uniform.Kjj2[i]) );m_uniform.KLL5.push( m_shdp.KQQ5(m_uniform.Kjj2[i]) );++i;};};m_uniform = m_uniform.Kqq0;};};};if(m_shdp.sharedUniform != null){m_uniform = m_shdp.sharedUniform;m_uniform.use(m_gl);m_uniform = m_uniform.Kqq0;while(m_uniform != null){m_uniform.use(m_gl);m_uniform = m_uniform.Kqq0;};};};};m_preMaterial = m_material;};if(m_shdp.dataUniformEnabled){if(m_material.Kll5 == null){m_material.Kll5 = m_material.KEE6(ro);if(m_material.Kll5 != null){m_uniform = m_material.Kll5;while(m_uniform != null){if(m_uniform.Kjj2 != null && m_uniform.KLL5 == null){m_uniform.Kxx2 = [];m_uniform.KLL5 = [];m_uniform.KBB3 = m_uniform.Kjj2.length;let i = 0;while(i < m_uniform.KBB3){m_uniform.Kxx2.push( m_shdp.getUniformTypeByNS(m_uniform.Kjj2[i]) );m_uniform.KLL5.push( m_shdp.KQQ5(m_uniform.Kjj2[i]) );++i;};};m_uniform = m_uniform.Kqq0;};};};if(m_material.Kll5 != null){m_uniform = m_material.Kll5;m_uniform.use(m_gl);m_uniform = m_uniform.Kqq0;while(m_uniform != null){m_uniform.use(m_gl);m_uniform = m_uniform.Kqq0;};};};if(!m_mesh.KCC1.isGPUEnabled()){m_mesh.KCC1.Kjj6(m_gl);};if(m_preVtxBuf != m_mesh.KCC1){m_preVtxBuf = m_mesh.KCC1;m_preVtxBuf.use(m_shdp);};if(m_preTex != m_tex){if(m_tex != null){m_tex.Kooo1 = 0;m_tex.use(m_gl);let nextTex = m_tex.Kqq0;let t = m_tex.KSS7;while(nextTex != null){nextTex.Kooo1 = t;nextTex.use(m_gl);;t += nextTex.KSS7;nextTex = nextTex.Kqq0;if(nextTex == m_tex){return;};};};m_preTex = m_tex;};if(m_renderState != ro.Kaaa6){m_renderState = ro.Kaaa6;m_rState.Kyyy8(ro.Kxx4);m_rState.KWW3(ro.Kyyy6);m_rState.Kggg4(ro.Kuuu8);};m_mesh.KCC1.Kzzz1();};};};this.use = function(gl){};};function Vdd6(){this.Kggg5 = function(renderer){};this.Kgg6 = function(renderer){};};function Vjj6(renderCtrl){this.Kqq2 = null;this.KKK3 = true;this.Koo7 = true;this.Kqq0 = null;this.KGG3 = -1;let m_block = new ___RenderSortBlock();let m_roscFilter = new Vii5();let m_renderer = null;let m_renderCtrl = null;if(renderCtrl != undefined){m_renderCtrl = renderCtrl;};this.Kzz1 = false;this.Knn0 = null;this.Kzzz4 = null;this.KOO8 = function(){};this.Kxx3 = function(renderer){m_renderer = renderer;m_block.Kzzz4 = this.Kzzz4;m_roscFilter.Kuu3 = this.KGG3;m_solidBlock.Kuu3 = this.KGG3;m_block.Kkkk8 = m_renderer.KKK1();};this.KVV8 = function(blockIndex, material){m_block.Ksss7 = material;};this.Klll4 = function(blockIndex,nodeI,material){m_block.Klll4(nodeI,material);};this.KPP2 = function(oldMaterial,newMaterial){m_block.KPP2(oldMaterial,newMaterial);};this.Kkk7 = function(disp){if(disp != null && disp != undefined){if(disp.KFF5() < 0){if(!this.Kzz1)m_roscFilter.KLL3(disp);};};};this.Kccc0 = function(ro){m_block.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);};this.Kzzz6 = function(camera,flag){if(this.KKK3){if(!this.Kzz1){m_roscFilter.Ktt6(this);m_block.Kzzz6(camera,flag);};};};let m_beginFlag = 0;this.Kggg5 = function(forceBoo){if(forceBoo == undefined) forceBoo = false;if(m_beginFlag == 0 || forceBoo){m_beginFlag = 1;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kggg5 != null){this.Knn0.Kggg5(m_renderer,);m_renderer.KSS4(this.Knn0.Kqq6(), this.Knn0.Knn6(), this.Knn0.Kaaa2());};};};};};this.Kgg6 = function(){if(m_beginFlag == 1){m_beginFlag = 0;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kgg6 != null) this.Knn0.Kgg6(m_renderer);};};};};this.use = function(gl){if(this.KKK3 && this.Koo7){if(m_renderCtrl != null){m_renderCtrl.Kggg5(m_renderer);};m_block.use(gl);if(m_renderCtrl != null){m_renderCtrl.Kgg6(m_renderer);};};};this.Kiii0 = function(disp){let s = disp.KFF5();if(s != Vgg2.SCENE_RO_FILTER_FINISH){let boo = m_blendBlock.Kiii0(disp);if(boo){return true;}else{return m_solidBlock.Kiii0(disp);};}else{return m_roscFilter.Kiii0(disp);};};};function Vbb5(renderCtrl){this.KKK3 = true;this.Koo7 = true;this.Kqq0 = null;this.Kqq2 = null;this.KGG3 = -1;let m_solidBlock = new Vjj0();let m_blendBlock = new Vjj0();let m_blocks = [];let m_roscFilter = new Vii5();let m_renderer = null;let m_renderCtrl = null;if(renderCtrl != undefined){m_renderCtrl = renderCtrl;};this.Kzz1 = false;this.Knn0 = null;this.Kzzz4 = null;this.KOO8 = function(blockIndex){m_solidBlock.KOO8();m_blendBlock.KOO8();};this.Kxx3 = function(renderer){m_renderer = renderer;m_solidBlock.uid = 1;m_blendBlock.uid = 2;m_blocks.push(null);m_blocks.push(m_solidBlock);m_blocks.push(m_blendBlock);;m_solidBlock.KBB1 += "_Solid";;m_blendBlock.KBB1 += "_Blend";m_solidBlock.Kzzz4 = this.Kzzz4;m_blendBlock.Kzzz4 = this.Kzzz4;m_roscFilter.Kuu3 = this.KGG3;m_solidBlock.Kuu3 = this.KGG3;m_blendBlock.Kuu3 = this.KGG3;m_solidBlock.Kkkk8 = m_renderer.KKK1();m_blendBlock.Kkkk8 = m_renderer.KKK1();};this.KVV8 = function(blockIndex, material){if(blockIndex < 1){m_solidBlock.Ksss7 = material;}else{m_blendBlock.Ksss7 = material;};};this.Klll4 = function(blockIndex,nodeI,material){if(blockIndex < 1){m_solidBlock.Klll4(nodeI,material);}else{m_blendBlock.Klll4(nodeI,material);};};this.KPP2 = function(blockIndex,oldMaterial,newMaterial){if(blockIndex < 1){m_solidBlock.KPP2(oldMaterial,newMaterial);}else{m_blendBlock.KPP2(oldMaterial,newMaterial);};};this.Kkk7 = function(disp){if(disp != null && disp != undefined){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){if(!this.Kzz1){m_roscFilter.KLL3(disp);};};};};this.Kccc0 = function(ro){let s = ro.KFF5();if(s == Vgg2.SCENE_RO_FILTER_FINISH){switch(ro.Kuuu8){case Vcc1.RENDER_BLEND:case Vcc1.RENDER_BLEND_SORT:case Vcc1.RENDER_TRANSPARENT_SORT:case Vcc1.RENDER_SKY:case Vcc1.RENDER_NEXT_LAYER:m_blendBlock.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);break;default:m_solidBlock.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);};};};this.Kzzz6 = function(camera,flag){if(this.KKK3){if(!this.Kzz1){m_roscFilter.Ktt6(this);m_solidBlock.Kzzz6(camera,flag);m_blendBlock.Kzzz6(camera,flag);};};};let m_beginFlag = 0;this.Kggg5 = function(forceBoo){if(forceBoo == undefined) forceBoo = false;if(m_beginFlag == 0 || forceBoo){m_beginFlag = 1;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kggg5 != null){this.Knn0.Kggg5(m_renderer);m_renderer.KSS4(this.Knn0.Kqq6(), this.Knn0.Knn6(), this.Knn0.Kaaa2());};};};};};this.Kgg6 = function(){if(m_beginFlag == 1){m_beginFlag = 0;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kgg6 != null){this.Knn0.Kgg6(m_renderer);};};};};};this.use = function(gl){if(this.KKK3 && this.Koo7){if(this.Kzz1){}else{if(m_renderCtrl != null){m_renderCtrl.Kggg5(m_renderer);};m_solidBlock.use(gl);m_blendBlock.use(gl);if(m_renderCtrl != null){m_renderCtrl.Kgg6(m_renderer);};};};};this.Kiii0 = function(disp){let s = disp.KFF5();if(s != Vgg2.SCENE_RO_FILTER_FINISH){if((s&Vgg2.SCENE_RO_FILTER_BEGIN) != Vgg2.SCENE_RO_FILTER_BEGIN){s = 0xf & (s >> 16);let boo = m_blocks[s].Kiii0(disp);return boo;}else{return m_roscFilter.Kiii0(disp);};}else{return m_roscFilter.Kiii0(disp);};};};function Vii5(){let m_waitList = [];let m_waitTotal = 0;this.Kuu3 = -1;this.KLL3 = function(ro){let sign = Vgg2.SCENE_RO_FILTER_BEGIN | (this.Kuu3 << 24);ro.Kpp4( sign );m_waitList.push( ro );m_waitTotal ++;};this.Kiii0 = function(ro){ro.Kpp4(Vgg2.SCENE_RO_ERASE);return true;};let m_ro = null;let m_material = null;this.Ktt6 = function(sc){let tex = null;let shdp = null;for(let i = 0; i < m_waitTotal; ++i){m_ro = m_waitList[i];if(m_ro.KFF5() > Vgg2.SCENE_RO_ERASE){m_material = m_ro.Kkk6();if(m_material != null && m_ro.Kpp7() != null){shdp = m_material.KYY0();if(shdp != null){if(shdp.haveTexture()){if(m_material.Kww5()){m_waitList.splice(i,1);--m_waitTotal;--i;m_ro.Kpp4( Vgg2.SCENE_RO_FILTER_FINISH );sc.Kccc0(m_ro);};}else{m_waitList.splice(i,1);--m_waitTotal;--i;m_ro.Kpp4( Vgg2.SCENE_RO_FILTER_FINISH );sc.Kccc0(m_ro);};};};}else{m_waitList.splice(i,1);m_waitTotal --;--i;m_ro.Kpp4( Vgg2.SCENE_RO_ERASE );};};};};function Vmm6(pickEnabled){let m_renderer = new Vgg6();this.KDD5 = null;this.gl = null;this.Kaaa5 = true;this.KFF0 = false;this.Kqq2 = null;this.Kccc7 = 0.1;this.Kzzz2 = 2000.0;this.KAA6 = 45.0;this.KAAA5 = true;this.Kyyy5 = true;this.KAA2 = false;this.Kzzz4 = null;if(pickEnabled == undefined){pickEnabled = true;};if(pickEnabled){this.Kzzz4 = new Vdd5();};let m_viewX = 0;let m_viewY = 0;let m_viewWidth = 512;let m_viewHeight = 512;let m_viewSizeEnabled = false;this.Klll5 = function(px,py,pw,ph){m_viewX = px;m_viewY = py;m_viewWidth = pw;m_viewHeight = ph;m_viewSizeEnabled = true;};this.KFF1 = function(glCanvasNS,posV3, lookAtPosV3, upV3){if (!m_renderer){Vee4("webgl create error");abort();};if(posV3 == undefined){posV3 = new Vqq0(500.0, 600.0, 500.0);};if(lookAtPosV3 == undefined){lookAtPosV3 = new Vqq0(0.0, 0.0, 0.0);};if(upV3 == undefined){upV3 = new Vqq0(0.0, 1.0, 0.0);};m_renderer.KAAA5 = this.KAAA5;m_renderer.Kyyy5 = this.Kyyy5;m_renderer.KAA2 = this.KAA2;m_renderer.KFF1(document,glCanvasNS);this.KDD5 = m_renderer.KDD5;this.gl = m_renderer.gl;m_renderer.Kqq2.Koo6 = true;if(m_viewSizeEnabled){if(this.Kaaa5){if(this.KFF0){m_renderer.Kqq2.Kff2(Vjj2.degreeToRadian(this.KAA6), m_viewWidth, m_viewHeight, this.Kccc7, this.Kzzz2);}else{m_renderer.Kqq2.Kff1(Vjj2.degreeToRadian(this.KAA6), m_viewWidth/m_viewHeight, this.Kccc7, this.Kzzz2);};}else{m_renderer.Kqq2.Kff3(this.Kccc7, this.Kzzz2, -0.5 * m_viewHeight, 0.5 * m_viewHeight, -0.5 * m_viewWidth, 0.5 * m_viewWidth);};}else{m_viewWidth = Stage.Kvv6;m_viewHeight = Stage.KMM1;if(this.Kaaa5){if(this.KFF0){m_renderer.Kqq2.Kff2(Vjj2.degreeToRadian(this.KAA6), m_viewWidth, m_viewHeight, this.Kccc7, this.Kzzz2);}else{m_renderer.Kqq2.Kff1(Vjj2.degreeToRadian(this.KAA6), m_viewWidth/m_viewHeight, this.Kccc7, this.Kzzz2);};}else{m_renderer.Kqq2.Kff3(this.Kccc7, this.Kzzz2, -0.5 * m_viewHeight, 0.5 * m_viewHeight, -0.5 * m_viewWidth, 0.5 * m_viewWidth);};};m_renderer.Kqq2.Kff6(posV3, lookAtPosV3, upV3);m_renderer.Kqq2.Kzzz6();this.Kqq2 = m_renderer.Kqq2;if(this.Kzzz4 != null){this.Kzzz4.Kggg3(m_renderer.Kqq2);};m_renderer.KLL2 = false;m_renderer.Kmmm8.Kxxx6(0.0,0.0,0.0);};this.Kfff8 = function(){return m_renderer;};let m_scPageHead = null;let m_scPageTail = null;let m_scPagesArr = [];this.KGG6 = function(sortObj){let scPage = new Vjj6();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};return scPage.KGG3;};this.Ksss0 = function(){Vii8.reset();m_renderer.Kzzz6();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();};let m_separateIndex = 32;this.KYY6 = function(){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_separateIndex;scPage.Kxx3( m_renderer );scPage.Kqq2 = this.Kqq2;++m_separateIndex;return scPage;};this.Kii2 = function(page,pcamera,flag){if(flag == undefined){flag = 1;};if(pcamera == undefined){page.Kzzz6( page.Kqq2,flag );}else{page.Kzzz6( pcamera,flag );};page.use( this.gl );};this.Kfff6 = function(page,disp){if(disp != null && disp != undefined){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){page.Kkk7(disp);return 0;};};return -1;};this.Kccc6 = function(page, disp){if(disp != null){let s = disp.KFF5();s = s>>24;if(s == page.KGG3 && disp.KFF5() > Vgg2.SCENE_RO_ERASE){page.Kiii0( disp );};};};this.Kqqq0 = function(){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};return scPage.KGG3;};this.Kkk7 = function(disp, sc_index){if(disp != null){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){if(sc_index == undefined){;sc_index = -1;};let scPage = null;if(sc_index < 0){scPage = m_scPageTail;}else{if(sc_index>=0 && sc_index < m_scPagesArr.length){scPage = m_scPagesArr[sc_index];};};if(scPage != null && !scPage.Kzz1){scPage.Kkk7(disp);return scPage.KGG3;}else{scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};scPage.Kkk7(disp);return scPage.KGG3;};};};return -1;};this.KYY4 = function(disp){if(disp != null && disp != undefined){let s = disp.KFF5();if(s > Vgg2.SCENE_RO_ERASE){s = (s>>24);let page = m_scPagesArr[s];page.Kiii0( disp );};};};this.Kqqq6 = function(rttdisp){return this.Kwww2(rttdisp);};this.Kwww2 = function(rttdisp){if(rttdisp != null && rttdisp != undefined){if(rttdisp.KFF5() == Vgg2.SCENE_RO_ERASE){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kzz1 = true;scPage.Kxx3( m_renderer );if(m_scPageHead == null){m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};scPage.Knn0 = rttdisp;scPage.Kkk7(rttdisp);return scPage.KGG3;};};return -1;};this.Keee0 = function(disp,texList){let runit = Vmm8.clasp.Kuuu3(disp);if(runit != null){disp.Kkk6().Kwww7( texList );runit.Kzz0(m_renderer.gl, disp.Kkk6());};};let m_runBegin = true;let m_runEnd = true;this.KDD1 = function(){m_renderer.KSS8();Vii8.roState = -1;};this.KOO3 = function(){if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.Kkkk4();};};Vii8.reset();m_runBegin = false;m_renderer.Kzzz6();m_renderer.Kmm2();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();};this.Kkk0 = function(index,pcamera){let page = m_scPagesArr[index];page.Kqq2 = pcamera;};this.Kss8 = function(index){let page = m_scPagesArr[index];return page.Kqq2;};this.KVV4 = function(i,updateBoo,cleanFBOBoo,flag,prttEnabled){let page = m_scPagesArr[i];let nextPage = page.Kqq0;if(prttEnabled == undefined){prttEnabled = true;};if(page.KKK3){if(page.Kzz1){page.Kgg6();};};if(prttEnabled && nextPage != null){if(nextPage.Kzz1){if(cleanFBOBoo){nextPage.Kggg5(true);}else{m_renderer.Krrr6();m_renderer.Kggg5();};};};if(flag == undefined){flag = 1;};if(!page.Kzz1){if(updateBoo == undefined || updateBoo){page.Kzzz6( page.Kqq2,flag );};Vii8.roState = -1;page.use( this.gl );};};this.KHH0 = function(i,material,blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[i];page.KVV8(blockIndex,material);};this.Kooo3 = function(pageI,nodeI,material, blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[pageI];page.Klll4(blockIndex,nodeI,material);};this.KPP2 = function(pageI,oldMaterial,newMaterial, blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[pageI];page.KPP2(blockIndex, oldMaterial, newMaterial);};this.Krr6 = function(pageIndex, rttEnabled, flag){if (pageIndex > -1 && pageIndex < m_scPagesArr.length){if(rttEnabled == undefined){rttEnabled = true;};if(flag == undefined){flag = 1;};let page = m_scPagesArr[pageIndex];let nextPageI = pageIndex + 1;if (nextPageI < m_scPagesArr.length){if (rttEnabled){if (page.KKK3){if (page.Kzz1){page.Kgg6();};};let nextPage = null;while (nextPageI < m_scPagesArr.length){nextPage = m_scPagesArr[nextPageI];if (nextPage.Kzz1){if (nextPage.KKK3){nextPage.Kggg5();};break;}else{++nextPageI;};};};};if (page.KKK3){if (!page.Kzz1){page.Kzzz6(page.Kqq2,flag);page.use(this.gl);};};};};this.Kuuu4 = function(){if(m_runEnd){if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.end();};};m_renderer.Kgg6();};m_runEnd = true;m_runBegin = true;};this.Kfff1 = function(i, boo){if(boo == undefined) boo = true;let page = m_scPagesArr[i];page.KKK3 = boo;};this.Kyy5 = function(i, boo){if(boo == undefined) boo = true;let page = m_scPagesArr[i];page.Koo7 = boo;};this.KAAA3 = function(i){let page = m_scPagesArr[i];return page;};this.KAA1 = function(i){let page = m_scPagesArr[i];page.KOO8();};this.Klll3 = function(){return m_scPagesArr.length;};this.KGG7 = function(vw,vh){m_renderer.KGG7(vw,vh);};this.run = function(){if(m_runBegin){if(this.Kzzz4.Khhh8()){this.Kzzz4.Kkkk4();};Vii8.reset();m_renderer.Kzzz6();m_renderer.Kmm2();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();RenderSYS_DRAWTIMES = 0;};m_runBegin = true;let nextPage = m_scPageHead;let rttPage = null;let page = null;let pageI = 0;while(nextPage != null){page = nextPage;nextPage = page.Kqq0;if(page.KKK3){if(page.Kzz1){page.Kgg6();};};rttPage = nextPage;while(rttPage != null){if(rttPage.Kzz1){rttPage.Kggg5();break;}else{rttPage = rttPage.Kqq0;};};if(page.KKK3){if(!page.Kzz1){page.Kzzz6( page.Kqq2,1 );Vii8.roState = -1;page.use( this.gl );};};pageI ++;};if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.end();};};m_renderer.Kgg6();m_runEnd = false;};this.Kttt2 = function(){if(this.Kzzz4 != null){this.Kzzz4.KPP1 = EventConst.MOUSE_DOWN;};};this.KBBB0 = function(){if(this.Kzzz4 != null){this.Kzzz4.KPP1 = EventConst.MOUSE_UP;};};};function Vdd5(){this.Kttt4 = new Vqq0();this.KMM7 = new Vqq0();this.KPP1 = -1;let m_pickSelector = null;this.Kfff0 = function( pickSelector ){m_pickSelector = pickSelector;};let m_camera = null;let m_pickList = null;let m_pickROList = null;let m_pickTotal = 0;let m_rl = new Vhh5();let m_pickPixelWorldPos = new Vqq0();let m_currDis = 0;let m_pickEnabled = true;this.Kzzz5 = function(){return m_pickTotal;};this.Kppp4 = function(){return m_pickROList;};this.KFF1 = function(){};this.Kggg3 = function(camera){m_camera = camera;};this.Kii0 = function(boo){m_pickEnabled = boo;};this.Khhh8 = function(){return m_pickEnabled;};this.KWW4 = function(){return m_rl;};this.Kddd7 = function(outPos){outPos.Kbb8(m_pickPixelWorldPos);};this.Kzz4 = function(){if(m_pickSelector != null){return m_pickSelector.pickDepth;};return 0;};this.KYY2 = function(boo){m_pickSelector.pickNormalEnabled = boo;};this.Kww2 = function(){return m_pickSelector.normal;};let m_preMPos = new Vqq0();this.Kkkk4 = function(){if(m_pickSelector != null){m_pickSelector.pickDepth = 0;};this.Kppp3(Stage.Kss2, Stage.Kss1);this.KPP1 = -1;m_currDis = 999999999;m_camera.Kzzz6();m_camera.KVV2(Stage.Kss2, Stage.Kss1, m_rl.Kaa0, m_rl.tv);m_rl.Kzzz6();m_pickList = [];m_pickROList = [];m_pickTotal = 0;};this.end = function(){};let m_pva = new Vqq0();let m_pvb = new Vqq0();let m_ltv = new Vqq0();let m_pickLocalPos = new Vqq0();let m_pickWorldPos = new Vqq0();let m_mat = null;let m_prePickRO = null;this.Khh3 = function(ro){if(m_pickEnabled){m_pva.Kbb8(m_rl.Kaa0);m_pvb.x = 100.0 * m_rl.tv.x + m_pva.x;m_pvb.y = 100.0 * m_rl.tv.y + m_pva.y;m_pvb.z = 100.0 * m_rl.tv.z + m_pva.z;m_mat = ro.KYY5();m_mat.transformVectorSelf(m_pva);m_mat.transformVectorSelf(m_pvb);m_ltv.x = m_pvb.x - m_pva.x;m_ltv.y = m_pvb.y - m_pva.y;m_ltv.z = m_pvb.z - m_pva.z;m_ltv.Kww1();let boo = Voo7.intersectionRL2(m_ltv, m_pva,ro.KNN6,m_pickLocalPos);if(boo){ro.KQQ0().transformOutVector(m_pickLocalPos,m_pickWorldPos);let dis2 = Vqq0.distanceSquared(m_pickWorldPos,m_rl.Kaa0);m_pickTotal ++;let Vkk5 = this.Knnn3();Vkk5.dis = dis2;Vkk5.ro = ro;Vkk5.wpos.Kbb8(m_pickWorldPos);Vkk5.lpos.Kbb8(m_pickLocalPos);m_pickList.push(Vkk5);m_pickROList.push(ro);};};};let m_poList = [];this.Knnn3 = function(){if(m_poList.length > 0){return m_poList.pop();};let Vkk5 = {dis:0,ro:null,wpos:new Vqq0(),lpos:new Vqq0()};return Vkk5;};function Vmm5(a, b){if (a.dis < b.dis ) {;return -1;};if (a.dis > b.dis ) {;return 1;};return 0;};let m_preox = -10;let m_preoy = -10;this.Kppp3 = function(pmx,pmy){let Vkk5 = null;if(m_pickSelector != null){if(m_pickTotal > 0){m_pickSelector.Kyyy7(pmx, pmy, m_pickROList);if(m_pickSelector.selectRO != null){if(m_pickSelector.pickDepth > 0){let pos = m_camera.Kss7();m_pickPixelWorldPos.x = m_rl.tv.x * m_pickSelector.pickDepth + pos.x;m_pickPixelWorldPos.y = m_rl.tv.y * m_pickSelector.pickDepth + pos.y;m_pickPixelWorldPos.z = m_rl.tv.z * m_pickSelector.pickDepth + pos.z;};Vkk5 = m_pickList[ m_pickSelector.selectROIndex ];if(m_prePickRO != Vkk5.ro){if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy, Vkk5.lpos,Vkk5.wpos);m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};}else if(m_prePickRO != null){if(Math.abs(m_preox - Vkk5.lpos.x) > Vjj2.MATH_MIN_POSITIVE || Math.abs(m_preoy - Vkk5.lpos.y) > Vjj2.MATH_MIN_POSITIVE){m_preox = Vkk5.lpos.x;m_preoy = Vkk5.lpos.y;if(this.KPP1 > 0){m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);this.KPP1 = -1;};m_prePickRO.Kmm1(EventConst.MOUSE_MOVE,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};};for(let j = 0; j < m_pickTotal; ++j){m_poList.push(m_pickList[j]);m_pickList[j] = null;};this.KMM7.Kbb8(Vkk5.wpos);this.Kttt4.Kbb8(Vkk5.lpos);}else if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};}else if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};}else{if(m_pickTotal > 0){m_pickList.sort(Vmm5);Vkk5 = m_pickList[0];if(m_prePickRO != Vkk5.ro){if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy, Vkk5.lpos,Vkk5.wpos);m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO = Vkk5.ro;m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_IN,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};}else if(m_prePickRO != null){if(Math.abs(m_preox - Vkk5.lpos.x) > Vjj2.MATH_MIN_POSITIVE || Math.abs(m_preoy - Vkk5.lpos.y) > Vjj2.MATH_MIN_POSITIVE){m_preox = Vkk5.lpos.x;m_preoy = Vkk5.lpos.y;if(this.KPP1 > 0){m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);this.KPP1 = -1;};m_prePickRO.Kmm1(EventConst.MOUSE_MOVE,pmx,pmy, Vkk5.lpos,Vkk5.wpos);}else{m_prePickRO.Kmm1(this.KPP1,pmx,pmy, Vkk5.lpos,Vkk5.wpos);};};for(let i = 0; i < m_pickTotal; ++i){m_poList.push(m_pickList[i]);m_pickList[i] = null;};this.KMM7.Kbb8(Vkk5.wpos);this.Kttt4.Kbb8(Vkk5.lpos);}else{if(m_prePickRO != null){m_prePickRO.Kmm1(EventConst.MOUSE_MOVE_OUT,pmx,pmy,m_pickLocalPos,m_pickWorldPos);m_prePickRO = null;};};};};};function Vll3(){};Vll3.FRAMEBUFFER = 71;Vll3.DRAW_FRAMEBUFFER = 72;Vll3.READ_FRAMEBUFFER = 73;function Vhh7(fbufferType){if(fbufferType == undefined){fbufferType = Vll3.FRAMEBUFFER;};var m_fbo = null;var m_depthStencilRBO = null;var m_depthRBO = null;var m_width = 800;var m_height = 600;this.Kooo7 = true;this.KWW5 = false;this.KAA2 = false;this.KBB5 = 4;this.Kddd4 = function(){return m_fbo;};this.KII0 = function(){return m_depthStencilRBO;};this.KAA7 = function(){return m_depthRBO;};this.getWidth = function(){return m_width;};this.getHeight = function(){return m_height;};let m_bufferLType = fbufferType;let m_bufferType = 0;let m_gl = null;let m_texTargetTypes = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];let m_clearColorArr = new Float32Array(4);let m_stencilValueArr = new Uint32Array(4);this.Kxx7 = function(gl,t){if (m_fbo != null){switch (t){case Vll3.DRAW_FRAMEBUFFER:gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, m_fbo);break;case Vll3.READ_FRAMEBUFFER:gl.bindFramebuffer(gl.READ_FRAMEBUFFER, m_fbo);break;default:gl.bindFramebuffer(gl.FRAMEBUFFER, m_fbo);};};};this.Kkkk7 = function(t){m_bufferLType = t;};this.Kqqq7 = function(){return m_bufferLType;};this.Kiii5 = function(gl, color){if (m_fbo != null){m_clearColorArr[0] = color.r;m_clearColorArr[1] = color.g;m_clearColorArr[2] = color.b;m_clearColorArr[3] = color.a;if (m_preRttTotal > 1){for (let i = 0; i < m_preRttTotal; ++i){gl.clearBufferfv(gl.COLOR, i, m_clearColorArr);};}else{gl.clearBufferfv(gl.COLOR, 0, m_clearColorArr);};};};this.Kppp0 = function(gl, depth){if (m_fbo != null){if(depth == undefined){depth = 1.0;};m_clearColorArr[0] = depth;gl.clearBufferfv(gl.DEPTH, 0, m_clearColorArr);};};this.KCC4 = function(gl, stencil){if (m_fbo != null){if(stencil == undefined){stencil = 0x0;};m_stencilValueArr[0] = stencil;gl.clearBufferuiv(gl.STENCIL, 0, m_stencilValueArr);};};this.KHH3 = function(gl, depth, stencil){if (m_fbo != null){if(depth == undefined){depth = 1.0;};if(stencil == undefined){stencil = 0x0;};gl.clearBufferfi(gl.DEPTH_STENCIL, 0, depth, stencil);};};let m_rttTexProxyList = [];let m_rttTotal = 0;this.Knn3 = function(rgl,texProxy,outPutIndex){if(outPutIndex == undefined || outPutIndex < 0) outPutIndex = 0;if(m_fbo != null){if(outPutIndex == 0){m_attachmentTotal = 0;rgl.bindFramebuffer(m_bufferType,m_fbo);};if(m_rttTexProxyList.length == outPutIndex){m_rttTexProxyList.push(outPutIndex);m_rttTotal = outPutIndex + 1;}else if(outPutIndex < m_rttTexProxyList.length){m_rttTexProxyList[outPutIndex] = outPutIndex;m_rttTotal = outPutIndex + 1;}else{Vee4("Vhh7::renderToTexAt output ATTACHMENT index is not continuous, Error!");return;};};let i = 0;if(texProxy != null){let rTex = texProxy.Knn2();if(rTex == null){rTex = rgl.createTexture();rgl.bindTexture(Vaa6.getConst(rgl, texProxy.Keee1()), rTex);if(Vpp4()){rgl.texImage2D(Vaa6.getConst(rgl, texProxy.Keee1()), 0,Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5),Vaa0.toGL(rgl, texProxy.Kuuu0), null);}else{switch(texProxy.Kuuu0){case Vaa0.FLOAT:case Vaa0.HALF_FLOAT:const ext = rgl.getExtension("EXT_color_buffer_float");if (!ext){Vee4("donot need EXT_color_buffer_float");return;};break;};switch( texProxy.Keee1() ){case Vaa6.TEXTURE_2D:rgl.texImage2D(rgl.TEXTURE_2D, 0,Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5),Vaa0.toGL(rgl, texProxy.Kuuu0), null);break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.texImage2D(rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, Vnn2.toGL(rgl,texProxy.Kvvv8),m_width,m_height,0,Vnn2.toGL(rgl,texProxy.Kvvv5), Vaa0.toGL(rgl, texProxy.Kuuu0), null);};break;};};texProxy.Koo3(rgl, rTex, texProxy.Keee1());};if(Vpp4()){rgl.framebufferTexture2D(m_bufferType, this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + m_attachmentTotal, rgl.TEXTURE_2D, rTex,0);++m_attachmentTotal;}else{switch( texProxy.Keee1() ){case Vaa6.TEXTURE_2D:if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, this.KBB5, rgl.RGBA8, m_width, m_height);};rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_2D,rTex,0);m_texTargetTypes[m_attachmentTotal] = Vaa6.TEXTURE_2D;++m_attachmentTotal;break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i,rTex,0);m_texTargetTypes[m_attachmentTotal] = Vaa6.TEXTURE_CUBE;++m_attachmentTotal;};break;};};}else{if(Vpp4()){rgl.framebufferTexture2D(m_bufferType, this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + m_attachmentTotal, rgl.TEXTURE_2D, null,0);m_attachmentTotal++;}else{switch( m_texTargetTypes[m_attachmentTotal] ){case Vaa6.TEXTURE_2D:rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_2D,null,0);m_attachmentTotal++;break;case Vaa6.TEXTURE_CUBE:for(i = 0; i < 6; ++i){rgl.framebufferTexture2D(m_bufferType,rgl.COLOR_ATTACHMENT0 + m_attachmentTotal, rgl.TEXTURE_CUBE_MAP_POSITIVE_X + i,null,0);m_attachmentTotal++;};break;};};};};this.Kuuu5 = null;let m_preRttTotal = 0;let m_attachmentTotal = 0;this.Kvvv0 = function(){m_preRttTotal = -1;};this.use = function(rgl){m_gl = rgl;if(m_fbo != null){if(m_attachmentTotal > 1){if(m_preRttTotal != m_attachmentTotal){m_preRttTotal = m_attachmentTotal;let i = 0;let attachment = [];if( Vpp4() ){for(; i < m_attachmentTotal; ++i) attachment.push( this.Kuuu5.COLOR_ATTACHMENT0_WEBGL + i );this.Kuuu5.drawBuffersWEBGL(attachment);}else{for(; i < m_attachmentTotal; ++i){attachment.push( rgl.COLOR_ATTACHMENT0 + i );};rgl.drawBuffers(attachment);};};}else{m_preRttTotal = 1;};};m_rttTotal = 0;m_attachmentTotal = 0;};this.Kuuu2 = function(){if(m_fbo != null){m_gl.bindFramebuffer(m_bufferType,m_fbo);};};this.KPP3 = function(rgl,pw,ph){if(m_fbo == null){m_rttTexProxyList = [];m_preRttTotal = m_attachmentTotal = 0;m_width = pw;m_height = ph;m_fbo = rgl.createFramebuffer();switch(m_bufferLType){case Vll3.DRAW_FRAMEBUFFER:m_bufferType = rgl.DRAW_FRAMEBUFFER;break;case Vll3.READ_FRAMEBUFFER:m_bufferType = rgl.READ_FRAMEBUFFER;break;default:m_bufferType = rgl.FRAMEBUFFER;break;};rgl.bindFramebuffer(m_bufferType,m_fbo);if(this.Kooo7){if(this.KWW5){if(m_depthStencilRBO == null){m_depthStencilRBO = rgl.createRenderbuffer();rgl.bindRenderbuffer(rgl.RENDERBUFFER,m_depthStencilRBO);if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, 0, rgl.DEPTH_STENCIL, pw, ph);}else{rgl.renderbufferStorage(rgl.RENDERBUFFER, rgl.DEPTH_STENCIL, pw,ph);};rgl.framebufferRenderbuffer(m_bufferType,rgl.DEPTH_STENCIL_ATTACHMENT, rgl.RENDERBUFFER, m_depthStencilRBO);};}else{if(m_depthRBO == null){m_depthRBO = rgl.createRenderbuffer();rgl.bindRenderbuffer(rgl.RENDERBUFFER,m_depthRBO);if(this.KAA2){rgl.renderbufferStorageMultisample(rgl.RENDERBUFFER, this.KBB5, rgl.DEPTH_COMPONENT16, pw, ph);}else{rgl.renderbufferStorage(rgl.RENDERBUFFER, rgl.DEPTH_COMPONENT16, pw,ph);};rgl.framebufferRenderbuffer(m_bufferType,rgl.DEPTH_ATTACHMENT, rgl.RENDERBUFFER, m_depthRBO);};};rgl.bindRenderbuffer(rgl.RENDERBUFFER,null);};var e = rgl.checkFramebufferStatus(m_bufferType);if(e!== rgl.FRAMEBUFFER_COMPLETE){Vee4("Vhh7 create Error!");return alert("Vhh7 create Error!");};rgl.bindFramebuffer(m_bufferType, null);};};this.KFF1 = function(rgl,pw,ph){m_gl = rgl;if(m_fbo == null){this.KPP3(rgl, pw, ph);}else if(m_width != pw || m_height != ph){if(m_depthStencilRBO != null){rgl.deleteRenderbuffer(m_depthStencilRBO);m_depthStencilRBO = null;};if(m_depthRBO != null){rgl.deleteRenderbuffer(m_depthRBO);m_depthRBO = null;};rgl.deleteFramebuffer(m_fbo);m_fbo = null;this.KPP3(rgl, pw, ph);};};this.KNN3 = function(rgl){m_gl = null;};this.Kff0 = function(){let str = "";switch(m_bufferLType){case Vll3.FRAMEBUFFER:str = "FRAMEBUFFER";break;case Vll3.DRAW_FRAMEBUFFER:str = "DRAW_FRAMEBUFFER";break;case Vll3.READ_FRAMEBUFFER:str = "READ_FRAMEBUFFER";break;};return "[Vhh7("+str+")]";};};Vhh7.bindToBackbuffer = function(gl,t){switch (t){case Vll3.DRAW_FRAMEBUFFER:gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);break;case Vll3.READ_FRAMEBUFFER:gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);break;default:gl.bindFramebuffer(gl.FRAMEBUFFER, null);};};function Vii8(){let s_blendMode = Vnn8.NORMAL;let s_blendDisabled = true;let s_cullMode = Vkk7.NONE;let s_cullDisabled = true;let m_gl = null;let s_depthTestType = Vcc1.DISABLE;this.KGG2 = function(r){m_gl = r.gl;};this.Kyyy8 = function(mode){switch (mode){case Vkk7.BACK:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.BACK);};break;case Vkk7.FRONT:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.FRONT);};break;case Vkk7.FRONT_AND_BACK:if(s_cullMode != mode){s_cullMode = mode;if(!s_cullDisabled){s_cullDisabled = false;m_gl.enable(m_gl.CULL_FACE);};m_gl.cullFace(m_gl.FRONT_AND_BACK);};break;case Vkk7.NONE:case Vkk7.DISABLE:if(s_cullMode != mode){s_cullMode = mode;if(s_cullDisabled){s_cullDisabled = true;m_gl.disable(m_gl.CULL_FACE);};};break;default:break;};};this.KWW3 = function(mode){if(s_blendMode != mode){s_blendMode = mode;switch(mode){case Vnn8.NORMAL:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ZERO);break;case Vnn8.TRANSPARENT:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_ALPHA, m_gl.ONE_MINUS_SRC_ALPHA);break;case Vnn8.ALPHA_ADD:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ONE_MINUS_SRC_ALPHA);break;case Vnn8.ADD:if (s_blendDisabled) {m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_ALPHA, m_gl.ONE);break;case Vnn8.ADD2:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.ONE);break;case Vnn8.INVERSE_ALPHA:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.ONE, m_gl.SRC_ALPHA);break;case Vnn8.BLAZE:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.SRC_COLOR, m_gl.ONE);break;case Vnn8.OVERLAY:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.DST_COLOR, m_gl.DST_ALPHA);break;case Vnn8.OVERLAY2:if (s_blendDisabled) { m_gl.enable(m_gl.BLEND); s_blendDisabled = false; m_gl.blendEquation(m_gl.FUNC_ADD);};m_gl.blendFunc(m_gl.DST_COLOR, m_gl.SRC_ALPHA);break;case Vnn8.DISABLE:if (!s_blendDisabled) { m_gl.disable(m_gl.BLEND); s_blendDisabled = true; };break;default:break;};};};this.Kggg4 = function(type){if (s_depthTestType != type) {;s_depthTestType = type;switch (type){case Vcc1.RENDER_ALWAYS:m_gl.depthMask(false); m_gl.depthFunc(m_gl.ALWAYS);break;case Vcc1.RENDER_SKY:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_OPAQUE:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LESS);break;case Vcc1.RENDER_OPAQUE_OVERHEAD:m_gl.depthMask(false); m_gl.depthFunc(m_gl.EQUAL);break;case Vcc1.RENDER_DECALS:m_gl.depthMask(false); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_BLEND:case Vcc1.RENDER_BLEND_SORT:case Vcc1.RENDER_TRANSPARENT_SORT:m_gl.depthMask(false); m_gl.depthFunc(m_gl.LESS);break;case Vcc1.RENDER_WIRE_FRAME:m_gl.depthMask(true); m_gl.depthFunc(m_gl.LEQUAL);break;case Vcc1.RENDER_NEXT_LAYER:m_gl.depthMask(false); m_gl.depthFunc(m_gl.ALWAYS);break;case Vcc1.RENDER_WIRE_FRAME_NEXT:break;default:break;};};};};Vii8.rtexs = [null,null,null,null,null,null,null,null,null,null,null,null];Vii8.reset = function(){if(RUN_DEBUG_TRACE_ONE_TIME){};for(let i = 0; i < 12; ++i){Vii8.rtexs[i] = null;};Vii8.drawcallTimes = 0;};Vii8.roState = 0x0;Vii8.drawcallTimes = 0;function Vgg6(){let m_self = this;let m_rState = new Vii8();this.Kggg8 = null;this.KDD5 = null;this.gl = null;this.Kmmm8 = new Vkk4();let m_gl = null;let m_viewX = 0;let m_viewY = 0;let m_viewW = 0;let m_viewH = 0;let m_speViewW = 0;let m_speViewH = 0;this.Kqq2 = new Vcc2();this.KYY8 = 0;let Vjj4 = {mr:true,mg:true,mb:true,ma:true};let m_canvas2D = null;let m_ctx2D = null;let m_stCanvas = null;this.viewSizeAutoMatchStageSizeEnabled = true;this.KAAA5 = true;this.Kyyy5 = true;this.Kuuu5 = null;function Vhh8(evt){console.log(evt);};function Vcc3(evt){console.log(evt);};this.KFF1 = function(document, canvas_id_name){this.Kggg8 = document;m_stCanvas = document.getElementById(canvas_id_name);this.KDD5 = m_stCanvas;m_canvas2D = document.getElementById("text");m_ctx2D = m_canvas2D.getContext("2d");document.onkeydown = function(evt){Keyboard.Krrr5(evt);};document.onkeyup = function(evt){Keyboard.Kii6(evt);};this.KDD5.onmousedown = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;if(evt.button == 0){Stage.Kttt2();}else if(evt.button == 2){Stage.Keee6();};};this.KDD5.onmouseup = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;if(evt.button == 0){Stage.KBBB0();}else if(evt.button == 2){Stage.KXX0();};};this.KDD5.onmousemove = function(evt){var rect = m_stCanvas.getBoundingClientRect();let px = evt.clientX - rect.left;let py = evt.clientY - rect.top;Stage.Kss2 = px;Stage.Kss1 = Stage.KMM1 - py;Stage.Kbbb3 = px;Stage.Kbbb4 = py;Stage.Kyyy4();};var attr = {depth:this.KAAA5,premultipliedAlpha: false, alpha: true, antialias:false,stencil:this.Kyyy5,preserveDrawingBuffer:true };if(Vpp4()){m_gl = this.gl = this.KDD5.getContext('webgl',attr) || this.KDD5.getContext("experimental-webgl",attr);if(m_gl == null || m_gl == undefined){Vee4("WebGL1 can not support!");return;}else{};this.Kuuu5 = m_gl.getExtension('WEBGL_draw_buffers');if (this.Kuuu5 != null) {;}else{Vee4("WEBGL_draw_buffers Extension can not support!");return;};}else{m_gl = this.gl = this.KDD5.getContext('webgl2',attr);if(m_gl == null || m_gl == undefined){Vee4("WebGL2 can not support!");return;}else{};};if(this.KAAA5) m_gl.enable(m_gl.DEPTH_TEST);else m_gl.disable(m_gl.DEPTH_TEST);if(this.Kyyy5) m_gl.enable(m_gl.STENCIL_TEST);else m_gl.disable(m_gl.STENCIL_TEST);m_gl.enable(m_gl.CULL_FACE);m_gl.cullFace(m_gl.BACK);Stage.Kvv6 = m_gl.drawingBufferWidth;Stage.KMM1 = m_gl.drawingBufferHeight;Stage.Kkkk5 = Stage.Kvv6 * 0.5;Stage.Kqqq1 = Stage.KMM1 * 0.5;if (!this.gl) {;alert('Unable to initialize WebGL. Your browser or machine may not support it.');return;};this.Khh8();window.addEventListener('resize', this.Khh8, false);m_rState.KGG2(this);this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT | m_gl.STENCIL_BUFFER_BIT;this.KDD5.addEventListener('webglcontextrestored', Vhh8, false);this.KDD5.addEventListener('webglcontextlost',Vcc3,false);m_viewW = Stage.Kvv6;m_viewH = Stage.KMM1;};this.Kbbb5 = function(){if(m_gl != null){return m_gl.isContextLost();};return false;};this.Kyyy1 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT;};this.Krrr6 = function(){this.KYY8 = m_gl.DEPTH_BUFFER_BIT;};this.KJJ6 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT;};this.KSS8 = function(){this.KYY8 = m_gl.COLOR_BUFFER_BIT | m_gl.DEPTH_BUFFER_BIT | m_gl.STENCIL_BUFFER_BIT;};this.Kpp5 = function(){return m_gl;};this.KKK1 = function(){return m_rState;};let m_displayWidth = 800.0;let m_displayHeight = 600.0;this.Khh8 = function (){m_displayWidth  = m_self.KDD5.clientWidth;m_displayHeight = m_self.KDD5.clientHeight;if (m_self.KDD5.width  != m_displayWidth ||m_self.KDD5.height != m_displayHeight){m_self.KDD5.width  = m_displayWidth;m_self.KDD5.height = m_displayHeight;};Stage.Kvv6 = m_gl.drawingBufferWidth;Stage.KMM1 = m_gl.drawingBufferHeight;Stage.Kkkk5 = Stage.Kvv6 * 0.5;Stage.Kqqq1 = Stage.KMM1 * 0.5;Stage.Kzzz6();if(m_self.viewSizeAutoMatchStageSizeEnabled){m_self.Kmmm1(Stage.Kvv6, Stage.KMM1);};};this.KXX7 = function(){return Stage.Kvv6;};this.Khhh0 = function(){return Stage.KMM1;};this.KII5 = "";let m_lastTime = 0;let m_fps = 60;this.KLL2 = true;this.KAA2 = false;this.Kwww1 = function(){return m_fps;};this.Kmm2 = function(){let t = new Date().getTime();if(m_lastTime > 0){m_lastTime = t - m_lastTime;m_fps = Math.round(1000/m_lastTime);};m_lastTime = t;if(this.KLL2){m_ctx2D.clearRect(0, 0, 600, 70);m_ctx2D.font="50px Verdana";m_ctx2D.fillStyle = "red";m_ctx2D.textAlign = "left";m_ctx2D.fillText("FPS:"+m_fps+this.KII5, 5,50);};};this.KWW2 = function(mr,mg,mb,ma){if(mr != undefined){Vjj4.mr = mr;};if(mg != undefined){Vjj4.mg = mg;};if(mb != undefined){Vjj4.mb = mb;};if(ma != undefined){Vjj4.ma = ma;};};this.Kjj1 = function(depth){m_gl.clearDepth(depth);};this.Knnn5 = function(){m_gl.clearColor(this.Kmmm8.r,this.Kmmm8.g,this.Kmmm8.b,this.Kmmm8.a);m_gl.clear(this.KYY8);};let m_scissorEnabled = false;this.KTT3 = function(boo){if(boo){if(!m_scissorEnabled){m_scissorEnabled = true;m_gl.enable(m_gl.SCISSOR_TEST);};}else{if(m_scissorEnabled){m_scissorEnabled = false;m_gl.disable(m_gl.SCISSOR_TEST);};};};this.KEE0 = function(px,py,pw,ph){m_gl.scissor(px,py, pw,ph);};let m_viewPortChanged = true;this.KGG7 = function(vw,vh){m_speViewW = vw;m_speViewH = vh;m_viewPortChanged = true;};this.Kmmm1 = function(pw,ph){if(m_viewW != pw || m_viewH != ph){m_viewW = pw;m_viewH = ph;this.Kqq2.Kss6(m_viewW, m_viewH);m_viewPortChanged = true;};};this.Klll5 = function(px,py,pw,ph){if(m_viewX != px || m_viewY != py){m_viewX = px;m_viewY = py;m_viewPortChanged = true;};if(m_viewW != pw || m_viewH != ph){m_viewW = pw;m_viewH = ph;this.Kqq2.Kss6(m_viewW, m_viewH);m_viewPortChanged = true;};};this.Kxxx1 = function(px,py,immediately){if(m_viewX != px || m_viewY != py){m_viewX = px;m_viewY = py;m_viewPortChanged = true;};if(immediately == undefined){immediately = false;};if(immediately){m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};};this.KGG8 = function(){return m_viewW;};this.Ksss2 = function(){return m_viewH;};this.KQQ4 = function(){return m_viewX;};this.Kjjj4 = function(){return m_viewY;};this.Kvvv0 = function(){m_rState.Kggg4(Vcc1.RENDER_OPAQUE);Vii8.reset();};this.Kggg5 = function(){m_gl.clearColor(this.Kmmm8.r,this.Kmmm8.g,this.Kmmm8.b,this.Kmmm8.a);m_gl.colorMask(Vjj4.mr,Vjj4.mg,Vjj4.mb,Vjj4.ma);m_gl.clearDepth(1.0);m_rState.Kggg4(Vcc1.RENDER_OPAQUE);if(this.KAAA5){m_gl.clear(this.KYY8);}else{m_gl.clear(m_gl.COLOR_BUFFER_BIT);};if(m_speViewW < 1){if(m_viewPortChanged){m_viewPortChanged = false;m_fboViewRect[0] = m_viewX;m_fboViewRect[1] = m_viewY;m_fboViewRect[2] = m_viewW;m_fboViewRect[3] = m_viewH;m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};}else{m_gl.viewport(m_viewX, m_viewY, m_speViewW, m_speViewH);m_speViewW = 0;};};this.Krr5 = function(){return m_displayWidth;};this.Kiii8 = function(){return m_displayHeight;};this.Kgg6 = function(){};let m_fboBuf = null;let m_fboClearBoo = true;let m_fboViewRect = new Uint16Array(4);let m_fboViewRectBoo = false;let m_fboType = Vll3.FRAMEBUFFER;let m_fboIndex = 0;let m_fboBufList = [null, null, null, null, null, null, null, null, null, null];let m_fboBiltRect = new Int32Array(8);this.KEE2 = function(texProxy,enableDepth,enableStencil, outputIndex){if(texProxy == undefined) texProxy = null;if(outputIndex == undefined || outputIndex == null){outputIndex = 0;};if(texProxy == null && outputIndex == 0){m_gl.bindFramebuffer(m_gl.FRAMEBUFFER,null);this.Kggg5();}else{if (outputIndex == 0){if(m_fboBuf != null){m_fboBuf.KFF1(m_gl, texProxy.getWidth(), texProxy.getHeight());};if (m_fboIndex >= 0){if (m_fboBuf == nullptr){m_fboBuf = new Vhh7(m_fboType);m_fboBuf.KAA2 = this.KAA2;m_fboBuf.Kuuu5 = this.Kuuu5;m_fboBufList[m_fboIndex] = m_fboBuf;m_fboBuf.Kooo7 = enableDepth;m_fboBuf.KWW5 = enableStencil;m_fboBuf.KFF1(m_gl, texProxy.getWidth(), texProxy.getHeight());};};};if(m_fboBuf != null){m_fboBuf.Knn3(m_gl,texProxy,outputIndex);};m_fboClearBoo = true;};};this.Kyy3 = function(int_px, int_py, int_pw, int_ph){m_fboViewRect[0] = int_px;m_fboViewRect[1] = int_py;m_fboViewRect[2] = int_pw;m_fboViewRect[3] = int_ph;m_fboViewRectBoo = true;};this.Kzz5 = function(int_index, frameBuffer_type){if (int_index > 7){int_index = 7;}else if(int_index < 0){int_index = 0;};if(frameBuffer_type == undefined){frameBuffer_type = Vll3.FRAMEBUFFER;};m_fboIndex = int_index;m_fboType = frameBuffer_type;m_fboBuf = m_fboBufList[m_fboIndex];};this.KSS4 = function(bool_clearColor, bool_clearDepth, bool_clearStencil){if(Vpp4()){if(m_fboBuf != null){if(m_fboClearBoo){m_fboClearBoo = false;m_fboBuf.use(m_gl);this.Kggg5();};};}else if (m_fboBuf != nullptr){if (m_fboClearBoo){m_fboClearBoo = false;m_fboBuf.use(m_gl);if (bool_clearColor){m_fboBuf.Kiii5(m_gl, this.Kmmm8);};if (m_fboBuf.Kooo7){if (m_fboBuf.KWW5){if (bool_clearDepth && bool_clearStencil){m_fboBuf.KHH3(m_gl);}else if (bool_clearDepth){m_fboBuf.Kppp0(m_gl);}else if (bool_clearStencil){m_fboBuf.KCC4(m_gl);};}else if(bool_clearDepth){m_fboBuf.Kppp0(m_gl);};}else if (bool_clearStencil && m_fboBuf.KWW5){m_fboBuf.KCC4(m_gl);};this.Kvvv0();m_fboBiltRect[4] = m_fboBiltRect[0] = m_viewX;m_fboBiltRect[5] = m_fboBiltRect[1] = m_viewY;m_fboBiltRect[6] = m_fboBiltRect[2] = m_viewX + m_viewW;m_fboBiltRect[7] = m_fboBiltRect[3] = m_viewY + m_viewH;if (m_fboViewRectBoo){m_fboViewRectBoo = false;m_viewPortChanged = true;m_gl.viewport(m_fboViewRect[0], m_fboViewRect[1], m_fboViewRect[2], m_fboViewRect[3]);}else{m_gl.viewport(m_viewX, m_viewY, m_viewW, m_viewH);};};};};this.Kkkk6 = function(frameBuffer_type){if(frameBuffer_type == undefined){frameBuffer_type = Vll3.FRAMEBUFFER;};Vhh7.bindToBackbuffer(m_gl,frameBuffer_type);this.Kggg5();};this.KTT2 = function(px, py, width, height, format, type, pixels){m_gl.readPixels(px, py, width, height, format, type, pixels);};this.Khh1 = function(int_px, int_py, int_pw, int_ph){m_fboBiltRect[0] = int_px;m_fboBiltRect[1] = int_py;m_fboBiltRect[2] = int_px + int_pw;m_fboBiltRect[3] = int_py + int_ph;};this.Kqq4 = function(int_px, int_py, int_pw, int_ph){m_fboBiltRect[4] = int_px;m_fboBiltRect[5] = int_py;m_fboBiltRect[6] = int_px + int_pw;m_fboBiltRect[7] = int_py + int_ph;};this.KUU8 = function(int_readFBOIndex, int_writeFBOIndex, int_mask_bitfiled, int_filter){if (readFBOIndex > 7){readFBOIndex = 7;};if (writeFBOIndex > 7){writeFBOIndex = 7;};if (readFBOIndex >= 0 && m_fboBufList[readFBOIndex] != nullptr){m_fboBufList[readFBOIndex].Kxx7(Vll3.READ_FRAMEBUFFER);}else{Vhh7.bindToBackbuffer(Vll3.READ_FRAMEBUFFER);};if (writeFBOIndex >= 0 && m_fboBufList[writeFBOIndex] != nullptr){m_fboBufList[writeFBOIndex].Kxx7(Vll3.DRAW_FRAMEBUFFER);}else{FrameBufferObject.bindToBackbuffer(Vll3.DRAW_FRAMEBUFFER);};if(int_mask_bitfiled == undefined){int_mask_bitfiled = GL_COLOR_BUFFER_BIT;};if(int_filter == undefined){int_filter = m_gl.NEAREST;};m_gl.blitFramebuffer(m_fboBiltRect[0], m_fboBiltRect[1], m_fboBiltRect[2], m_fboBiltRect[3], m_fboBiltRect[4], m_fboBiltRect[5], m_fboBiltRect[6], m_fboBiltRect[7], int_mask_bitfiled, int_filter);};this.Kzzz6 = function(){if (this.Kqq2 != null){this.Kqq2.Kzzz6();Vdd2.Reset();};};this.KNN3 =function(){};};function Vdd0(){this.use = function(gl){};this.Kjj6 = function(gl){};this.Kqq0 = null;};function Vll0(){this.getWidth = function(){return 0;};this.getHeight = function(){return 0;};this.use = function(gl){};this.Kjj6 = function(gl){};this.Kmm0 = function(){return 0;};};function Vll8(){this.Keee3 = Vee6.ELEMENTS_TRIANGLES;this.Kmm3 = 0;this.KPP4 = 0;this.tex = null;this.KCC1 = null;this.Kll5 = null;this.Kxx4 = 0;this.Kyyy6 = 0;this.Kuuu8 = 0;this.Kaaa6 = 0;this.KBBB4 = true;this.Kll1 = null;this.Kii4 = -1;this.KBB1 = "";this.KKK3 = true;this.KBBB2 = 1;this.KGG1 = false;let m_gtexList = null;let m_gtexIndexList = null;let m_texTotal = 0;let m_texTargetList = null;this.KOO2 = function(){return m_texTotal;};let m_texProxList = null;this.Kvvv3 = function(gl, ptex){this.tex = ptex;if(ptex != null){if( ptex.Khh5 ){this.KGG1 = true;};m_texProxList = [ptex];m_gtexList = [];m_gtexIndexList = [];ptex.Kjj6( gl );m_gtexIndexList.push(gl.TEXTURE0);m_gtexList.push( ptex.Knn2());let nextTex = ptex.Kqq0;let t = ptex.KSS7;m_texTotal = 1;m_texTargetList = [ptex.KMM2()];while(nextTex != null){if( nextTex.Khh5 ){this.KGG1 = true;};m_texProxList.push( nextTex );nextTex.Kjj6( gl );m_texTargetList.push( nextTex.KMM2() );m_gtexIndexList.push(gl.TEXTURE0 + t);m_gtexList.push( nextTex.Knn2());;t += nextTex.KSS7;nextTex = nextTex.Kqq0;m_texTotal ++;if(nextTex == ptex){Vee4("Vll8::collectTex(), nextTex == preTex, Error!");return;};};}else{m_texTotal = 0;};};this.KVV5 = function(gl, ptexList){m_texProxList = ptexList;if(ptexList.length > 0){this.tex = ptexList[0];if( ptexList[0].Khh5 ){this.KGG1 = true;};m_gtexList = [];m_gtexIndexList = [];ptexList[0].Kjj6( gl );m_gtexIndexList.push(gl.TEXTURE0);m_gtexList.push( ptexList[0].Knn2());m_texTargetList = [ ptexList[0].KMM2() ];let t = 0;t = ptexList[0].KSS7;m_texTotal = 1;while(m_texTotal < ptexList.length){if( ptexList[m_texTotal].Khh5 ){this.KGG1 = true;};ptexList[m_texTotal].Kjj6( gl );m_texTargetList.push( ptexList[m_texTotal].KMM2() );m_gtexIndexList.push(gl.TEXTURE0 + t);m_gtexList.push( ptexList[m_texTotal].Knn2());;t += ptexList[m_texTotal].KSS7;m_texTotal ++;};}else{m_texTotal = 0;};};this.Kzz0 = function(gl,pmaterial){let texList = pmaterial.KII2();if(texList != null){this.KVV5(gl,texList);}else{let tex = pmaterial.KMM4();if(tex != null){this.Kvvv3(gl,tex);};};};this.Ktt7 = function(gl,pmesh,shdp){pmesh.KCC1.Kjj6( gl,shdp );this.KCC1 = pmesh.KCC1;this.KCC1.Kuuu6 = pmesh.Kuuu6;this.KCC1.Kll6 = pmesh.Kll6;this.KCC1.KVV0 = pmesh.KVV0;if(this.Keee3 != Vee6.ELEMENTS_INSTANCED_TRIANGLES){switch(pmesh.Keee3){case Vee6.ELEMENTS_TRIANGLES:if(pmesh.Kmm3 < 1){this.Kmm3 = this.KCC1.Kjjj5;}else{this.Kmm3 = pmesh.Kmm3;};break;default:if(pmesh.Kmm3 < 1){this.Kmm3 = this.KCC1.Ktt3;}else{this.Kmm3 = pmesh.Kmm3;};};if(pmesh.KPP4 > 0){this.KPP4 = pmesh.KPP4;};this.Keee3 = pmesh.Keee3;};};this.Krr1 = function(gl){if(RUN_DEBUG_TRACE_ONE_TIME){};for(let i = 0; i < m_texTotal; ++i){if(Vii8.rtexs[i] != m_gtexList[i]){if(RUN_DEBUG_TRACE_ONE_TIME){};gl.activeTexture(m_gtexIndexList[i]);gl.bindTexture(m_texTargetList[i], m_gtexList[i]);Vii8.rtexs[i] = m_gtexList[i];};};if(RUN_DEBUG_TRACE_ONE_TIME){};};this.KEE4 = function(gl){for(let i = 0; i < m_texTotal; ++i){if(Vii8.rtexs[i] != m_gtexList[i]){m_texProxList[i].use(gl);Vii8.rtexs[i] = m_gtexList[i];};};};this.Kvvv0 = function(){m_gtexIndexList = null;m_gtexList = null;m_texTotal = 0;this.tex = null;this.Kii4 = -1;this.KCC1 = null;this.Kll1 = null;if(this.Kll5 != null){this.Kll5.KNN3();this.Kll5 = null;};this.Kxx4 = 0;this.Kyyy6 = 0;this.Kuuu8 = 0;this.Kaaa6 = 0;this.KKK3 = true;this.KBBB2 = 1;};};Vll8.__units = [];Vll8.getUnit = function(){if(Vll8.__units.length){return Vll8.__units.pop();};return new Vll8();};Vll8.saveUnit = function(unit){Vll8.__units.push(unit);};function Vee2(){this.ro = null;this.Kpp2 = null;this.roI = 0;this.Keee4 = 0;this.Kll0 = 0;this.Kqq0 = null;this.Kqq7 = null;};function Vaa4(){let m_oArr = [];let m_indexList = [];let m_maxIndex = 0;let m_claspPool = [];this.KII1 = function(){if(m_claspPool.length > 0){return m_claspPool.pop();};return new Vee2();};this.KAAA2 = function(clasp){if(m_indexList.length < 1){let index = m_maxIndex;m_oArr.push(clasp);m_maxIndex ++;return index;}else{let i = m_indexList.pop();m_oArr[i] = clasp;return i;};Vee4("Too many render object!!!!");abort();return 0;};this.Knn7 = function(pi){return m_oArr[pi];};this.KMM0 = function(pi){if(m_oArr[pi] != null){let p = m_oArr[pi];p.ro = null;p.Kpp2 = null;p.roI = 0;p.Keee4 = 0;p.Kll0 = 0;p.Kqq0 = null;p.Kqq7 = null;m_claspPool.push(p);m_oArr[pi] = null;m_indexList.push(pi);};};this.Kuuu3 = function(ro){let i = ro.KFF5();if(i > Vgg2.SCENE_RO_ERASE){i = i & 0xffff;let clasp = this.Knn7(i);if(clasp != null){return clasp.Kpp2;};};return null;};};function Vmm8(){};Vmm8.clasp = new Vaa4();function Vii3(){};Vii3.buildGlobal = function(material, camera,shdp){let m_sharedUniform = material.Kvvv2(camera);if(m_sharedUniform == null){m_sharedUniform = new Vdd0();}else{puniform = m_sharedUniform;while(puniform != null){if(puniform.Kjj2 != null && puniform.KLL5 == null){puniform.Kxx2 = [];puniform.KLL5 = [];puniform.KBB3 = puniform.Kjj2.length;for(i = 0; i < puniform.KBB3; ++i){puniform.Kxx2.push( shdp.getUniformTypeByNS(puniform.Kjj2[i]) );puniform.KLL5.push( shdp.KQQ5(puniform.Kjj2[i]) );};};puniform = puniform.Kqq0;};};return m_sharedUniform;};Vii3.buildLocal = function(sUniform, shdp){let puniform = sUniform;while(puniform != null){if(puniform.Kjj2 != null && puniform.KLL5 == null){puniform.Kxx2 = [];puniform.KLL5 = [];puniform.KBB3 = puniform.Kjj2.length;for(i = 0; i < puniform.KBB3; ++i){puniform.Kxx2.push( shdp.getUniformTypeByNS(puniform.Kjj2[i]) );puniform.KLL5.push( shdp.KQQ5(puniform.Kjj2[i]) );};};puniform = puniform.Kqq0;};};function Vhh3(){this.Kkkk8 = null;this.KPP7 = null;let m_sign = true;let m_sharedUniform = null;let m_units = [];let m_unitsLen = 0;this.Khh7 = null;this.KAAA7 = null;this.KKK6 = "";this.Kkk5 = -1;this.Kll0 = -1;let m_tempUnit = new Vll8();this.KOO5 = function(){return m_unitsLen;};this.Kvvv2 = function(camera){if(m_unitsLen > 0 && this.KAAA7 != null){if(m_sharedUniform == null){m_sharedUniform = Vii3.buildGlobal(m_units[0].Kll1, camera, this.KAAA7);}else{m_sharedUniform.KNN3();m_sharedUniform = Vii3.buildGlobal(m_units[0].Kll1, camera, this.KAAA7);};};};this.KLL3 = function(material,camera,ro){if(m_sharedUniform == null){m_sharedUniform = Vii3.buildGlobal(material, camera, this.KAAA7);};let unit = Vll8.getUnit();unit.KBB1 = ro.KBB1;unit.Kll5 = material.KEE6(ro);if(unit.Kll5 == null){unit.Kll5 = new Vdd0();}else{Vii3.buildLocal(unit.Kll5, this.KAAA7);};ro.Kzzz6();unit.Kxx4 = ro.Kxx4;unit.Kyyy6 = ro.Kyyy6;unit.Kuuu8 = ro.Kuuu8;unit.Kaaa6 = ro.Kaaa6;unit.KBBB4 = ro.KBBB4;m_units.push( unit );m_unitsLen ++;return unit;};this.use = function(gl,gshd,pcamera){if(m_unitsLen < 1){return;};let gmt = this.KPP7;this.KPP7 = null;if(gmt != null && gmt.KYY0() != null){gshd = gmt.KYY0();if(gmt.Kwww0 == null){gmt.KYY0().Kjj6( gl );gmt.Kwww0 = Vii3.buildGlobal(gmt, pcamera, gshd);gmt.Kwww0.KBB4 = true;};gl.useProgram( gshd.Kppp5() );gshd.useTexLocation();let puniform = gmt.Kwww0;puniform.use(gl);puniform = puniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};};m_sign = (gshd == null);let rshdp = this.KAAA7;let i = 0;let unit = null;var prevb = null;var preUnit = m_tempUnit;let puniform = null;for(; i < m_unitsLen; ++i){unit = m_units[i];if(unit.KKK3){if(gshd == null){if(this.KAAA7.dataUniformEnabled){if(m_sign){gl.useProgram( this.Khh7 );this.KAAA7.useTexLocation();m_sharedUniform.use(gl);puniform = m_sharedUniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};m_sign = false;};unit.Kll5.use(gl);puniform = unit.Kll5.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};}else{continue;};if(prevb != unit.KCC1){prevb = unit.KCC1;prevb.use( rshdp );};}else{unit.Kll5.KTT6(gl, gshd);puniform = unit.Kll5.Kqq0;while(puniform != null){puniform.KTT6(gl, gshd);puniform = puniform.Kqq0;};if(prevb != unit.KCC1){prevb = unit.KCC1;prevb.use( gshd );};};if(unit.Kll1 != preUnit.Kll1){if(unit.tex != null){if( unit.KGG1 ){unit.KEE4(gl);}else{unit.Krr1(gl);};};};if(Vii8.roState != unit.Kaaa6){Vii8.roState = unit.Kaaa6;this.Kkkk8.Kyyy8(unit.Kxx4);this.Kkkk8.KWW3(unit.Kyyy6);this.Kkkk8.Kggg4(unit.Kuuu8);};switch(unit.Keee3){case Vee6.ELEMENTS_TRIANGLES:gl.drawElements(gl.TRIANGLES, unit.Kmm3, gl.UNSIGNED_SHORT,unit.KPP4);break;case Vee6.ARRAYS_LINES:gl.drawArrays(gl.LINES, unit.KPP4, unit.Kmm3);break;case Vee6.ARRAYS_LINE_STRIP:gl.drawArrays(gl.LINE_STRIP, unit.KPP4, unit.Kmm3);break;case Vee6.ARRAYS_POINTS:gl.drawArrays(gl.POINTS, unit.KPP4, unit.Kmm3);break;case Vee6.ELEMENTS_INSTANCED_TRIANGLES:unit.KCC1.Kqqq3();break;default:unit.KCC1.Kzzz1(gl);break;};preUnit = unit;Vii8.drawcallTimes++;}else{if(unit.KBBB2 < 0){m_units.splice(i,1);i--;m_unitsLen --;unit.Kvvv0();Vll8.saveUnit( unit );};};};};this.KOO8 = function(){let i = 0;let unit = null;for(; i < m_unitsLen; ++i){unit = m_units.pop();unit.Kvvv0();Vll8.saveUnit( unit );};m_unitsLen = 0;};};function Vjj0(){this.KBB1 = "Vjj0";this.Kuu3 = 0;this.uid = 0;this.Kzzz4 = null;this.Ksss7 = null;let m_nodes = [];let m_nodesTotal = 0;let m_claspTotal = 0;let m_claspBegin = null;let m_claspEnd = null;let m_roiBuilder = Vmm8.clasp;this.Kkkk8 = null;let m_nodeUList = null;let m_sceneSpace = null;let m_currCamera = null;let m_cameraChanged = false;this.KLL3 = function(gl,camera,ro){if(m_currCamera == null){m_currCamera = camera;}else{camera = m_currCamera;};if(m_nodeUList == null){m_nodeUList = [];for(let nk = 0; nk < 1100; ++nk){m_nodeUList.push(null);};};let material = ro.Kkk6();let mesh = ro.Kpp7();let shdp = material.KYY0();shdp.Kjj6( gl );if(!shdp.dataUniformEnabled){Vee4("Error: "+shdp.Kttt0()+" upload failure !!!!!");};let node = m_nodeUList[shdp.uid];if(node == null){node = new Vhh3();node.Kkkk8 = this.Kkkk8;node.KAAA7 = shdp;node.Kkk5 = shdp.uid;node.Kll0 = m_nodesTotal;node.Khh7 = shdp.Kppp5();m_nodeUList[node.Kkk5] = node;m_nodes.push( node );m_nodesTotal++;};let unit = node.KLL3(material,camera,ro);unit.Kzz0(gl, material );unit.Ktt7(gl, mesh, shdp );unit.Kll1 = ro.Kkk6();let clasp = m_roiBuilder.KII1();let psign = m_roiBuilder.KAAA2(clasp);unit.Kii4 = psign;psign = (this.Kuu3<<24) | (this.uid << 16) | psign;ro.Kpp4(psign);clasp.ro = ro;clasp.Kpp2 = unit;if(m_claspBegin == null){m_claspEnd = m_claspBegin = clasp;}else{if(m_claspEnd.Kqq7 != null){m_claspEnd.Kqq0 = clasp;clasp.Kqq7 = m_claspEnd;m_claspEnd = clasp;}else{m_claspBegin.Kqq0 = clasp;clasp.Kqq7 = m_claspBegin;m_claspEnd = clasp;};};};this.Kiii0 = function(ro){if(m_claspBegin == null){return false;};let i = ro.KFF5();i = i & 0xffff;let nto = m_roiBuilder.Knn7(i);if(nto != null && nto.ro == ro){nto.ro.Kpp4( Vgg2.SCENE_RO_ERASE );nto.Kpp2.KKK3 = false;nto.Kpp2.KBBB2 = -1;nto.Kpp2 = null;if(nto != m_claspBegin){nto.Kqq7.Kqq0 = nto.Kqq0;if(nto.Kqq0 != null){nto.Kqq0.Kqq7 = nto.Kqq7;nto.Kqq0 = null;}else{m_claspEnd = nto.Kqq7;};nto.Kqq7 = null;}else{m_claspBegin = nto.Kqq0;if(m_claspBegin != null){m_claspBegin.Kqq7 = null;}else{m_claspEnd = null;};nto.Kqq0 = null;};m_roiBuilder.KMM0( i );nto.ro = null;return true;};return false;};this.KOO8 = function(){let nro = m_claspBegin;let nextro = nro;let s = 0;while(nextro != null){nto = nextro;nextro = nto.Kqq0;nto.Kqq0 = null;nto.Kqq7 = null;nto.Kpp2.KKK3 = false;nto.Kpp2.KBBB2 = -1;nto.Kpp2 = null;nto.ro.Kpp4( Vgg2.SCENE_RO_ERASE );m_roiBuilder.KMM0( nto.ro.KFF5() & 0xffff );nto.ro = null;};m_claspBegin = m_claspEnd = null;if(m_nodeUList != null){let len = m_nodeUList.length;for(let i = 0; i < len; ++i){if(m_nodeUList[i]  != null){m_nodeUList[i].KOO8();};};};m_claspTotal = 0;};this.Kzzz6 = function(camera,flag){if(m_currCamera != camera){m_currCamera = camera;m_cameraChanged = true;};let next = m_claspBegin;let co = null;let ro = null;m_sceneSpace = this.Kzzz4;if(m_sceneSpace == null){m_claspTotal = 0;while(next != null){co = next;next = next.Kqq0;ro = co.ro;++m_claspTotal;if(flag > 0 && ro.KGG0 > 0){ro.Kzzz6();};if(ro.Koo7){if(co.Kpp2.KBBB4){co.Kpp2.KKK3 = camera.Kjj4(ro);};}else{co.Kpp2.KKK3 = ro.Koo7;};};}else{while(next != null){co = next;next = next.Kqq0;ro = co.ro;++m_claspTotal;if(flag > 0 && ro.KGG0 > 0){ro.Kzzz6();};if(ro.Koo7){if(co.Kpp2.KBBB4){co.Kpp2.KKK3 = camera.Kjj4(ro);if(co.Kpp2.KKK3){if(ro.KXX2)m_sceneSpace.Khh3(ro);};};}else{co.Kpp2.KKK3 = ro.Koo7;};};};};this.KSS3 = function(){};this.Klll4 = function(nodeI,material){if(m_nodesTotal > nodeI){m_nodes[nodeI].KPP7 = material;};};this.KPP2 = function(oldMaterial,newMaterial){if(m_nodeUList != null && oldMaterial.KYY0() != null){let node = m_nodeUList[oldMaterial.KYY0().uid];if(node != null){node.KPP7 = newMaterial;};};};this.use = function(gl){let gshd = null;if(this.Ksss7 != null && this.Ksss7.KYY0() != null){gshd = this.Ksss7.KYY0();if(this.Ksss7.Kwww0 == null){this.Ksss7.KYY0().Kjj6( gl );this.Ksss7.Kwww0 = Vii3.buildGlobal(this.Ksss7, m_currCamera, gshd);this.Ksss7.Kwww0.KBB4 = true;};gl.useProgram( gshd.Kppp5() );gshd.useTexLocation();let puniform = this.Ksss7.Kwww0;puniform.use(gl);puniform = puniform.Kqq0;while(puniform != null){puniform.use(gl);puniform = puniform.Kqq0;};};let i = 0;let node = null;if(m_cameraChanged){for(; i < m_nodesTotal; ++i){node = m_nodes[i];node.Kvvv2(m_currCamera);node.use(gl,gshd,m_currCamera);};}else{for(; i < m_nodesTotal; ++i){node = m_nodes[i];node.use(gl,gshd,m_currCamera);};};this.Ksss7 = null;m_cameraChanged = false;};};function Vdd6(){this.Kggg5 = function(renderer){};this.Kgg6 = function(renderer){};};function Vjj6(renderCtrl){this.Kqq2 = null;this.KKK3 = true;this.Koo7 = true;this.Kqq0 = null;this.KGG3 = -1;let m_block = new ___RenderSortBlock();let m_roscFilter = new Vii5();let m_renderer = null;let m_renderCtrl = null;if(renderCtrl != undefined){m_renderCtrl = renderCtrl;};this.Kzz1 = false;this.Knn0 = null;this.Kzzz4 = null;this.KOO8 = function(){};this.Kxx3 = function(renderer){m_renderer = renderer;m_block.Kzzz4 = this.Kzzz4;m_roscFilter.Kuu3 = this.KGG3;m_solidBlock.Kuu3 = this.KGG3;m_block.Kkkk8 = m_renderer.KKK1();};this.KVV8 = function(blockIndex, material){m_block.Ksss7 = material;};this.Klll4 = function(blockIndex,nodeI,material){m_block.Klll4(nodeI,material);};this.KPP2 = function(oldMaterial,newMaterial){m_block.KPP2(oldMaterial,newMaterial);};this.Kkk7 = function(disp){if(disp != null && disp != undefined){if(disp.KFF5() < 0){if(!this.Kzz1)m_roscFilter.KLL3(disp);};};};this.Kccc0 = function(ro){m_block.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);};this.Kzzz6 = function(camera,flag){if(this.KKK3){if(!this.Kzz1){m_roscFilter.Ktt6(this);m_block.Kzzz6(camera,flag);};};};let m_beginFlag = 0;this.Kggg5 = function(forceBoo){if(forceBoo == undefined) forceBoo = false;if(m_beginFlag == 0 || forceBoo){m_beginFlag = 1;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kggg5 != null){this.Knn0.Kggg5(m_renderer,);m_renderer.KSS4(this.Knn0.Kqq6(), this.Knn0.Knn6(), this.Knn0.Kaaa2());};};};};};this.Kgg6 = function(){if(m_beginFlag == 1){m_beginFlag = 0;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kgg6 != null) this.Knn0.Kgg6(m_renderer);};};};};this.use = function(gl){if(this.KKK3 && this.Koo7){if(m_renderCtrl != null){m_renderCtrl.Kggg5(m_renderer);};m_block.use(gl);if(m_renderCtrl != null){m_renderCtrl.Kgg6(m_renderer);};};};this.Kiii0 = function(disp){let s = disp.KFF5();if(s != Vgg2.SCENE_RO_FILTER_FINISH){let boo = m_blendBlock.Kiii0(disp);if(boo){return true;}else{return m_solidBlock.Kiii0(disp);};}else{return m_roscFilter.Kiii0(disp);};};};function Vbb5(renderCtrl){this.KKK3 = true;this.Koo7 = true;this.Kqq0 = null;this.Kqq2 = null;this.KGG3 = -1;let m_solidBlock = new Vjj0();let m_blendBlock = new Vjj0();let m_blocks = [];let m_roscFilter = new Vii5();let m_renderer = null;let m_renderCtrl = null;if(renderCtrl != undefined){m_renderCtrl = renderCtrl;};this.Kzz1 = false;this.Knn0 = null;this.Kzzz4 = null;this.KOO8 = function(blockIndex){m_solidBlock.KOO8();m_blendBlock.KOO8();};this.Kxx3 = function(renderer){m_renderer = renderer;m_solidBlock.uid = 1;m_blendBlock.uid = 2;m_blocks.push(null);m_blocks.push(m_solidBlock);m_blocks.push(m_blendBlock);;m_solidBlock.KBB1 += "_Solid";;m_blendBlock.KBB1 += "_Blend";m_solidBlock.Kzzz4 = this.Kzzz4;m_blendBlock.Kzzz4 = this.Kzzz4;m_roscFilter.Kuu3 = this.KGG3;m_solidBlock.Kuu3 = this.KGG3;m_blendBlock.Kuu3 = this.KGG3;m_solidBlock.Kkkk8 = m_renderer.KKK1();m_blendBlock.Kkkk8 = m_renderer.KKK1();};this.KVV8 = function(blockIndex, material){if(blockIndex < 1){m_solidBlock.Ksss7 = material;}else{m_blendBlock.Ksss7 = material;};};this.Klll4 = function(blockIndex,nodeI,material){if(blockIndex < 1){m_solidBlock.Klll4(nodeI,material);}else{m_blendBlock.Klll4(nodeI,material);};};this.KPP2 = function(blockIndex,oldMaterial,newMaterial){if(blockIndex < 1){m_solidBlock.KPP2(oldMaterial,newMaterial);}else{m_blendBlock.KPP2(oldMaterial,newMaterial);};};this.Kkk7 = function(disp){if(disp != null && disp != undefined){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){if(!this.Kzz1){m_roscFilter.KLL3(disp);};};};};this.Kccc0 = function(ro){let s = ro.KFF5();if(s == Vgg2.SCENE_RO_FILTER_FINISH){switch(ro.Kuuu8){case Vcc1.RENDER_BLEND:case Vcc1.RENDER_BLEND_SORT:case Vcc1.RENDER_TRANSPARENT_SORT:case Vcc1.RENDER_SKY:case Vcc1.RENDER_NEXT_LAYER:m_blendBlock.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);break;default:m_solidBlock.KLL3(m_renderer.gl, m_renderer.Kqq2, ro);};};};this.Kzzz6 = function(camera,flag){if(this.KKK3){if(!this.Kzz1){m_roscFilter.Ktt6(this);m_solidBlock.Kzzz6(camera,flag);m_blendBlock.Kzzz6(camera,flag);};};};let m_beginFlag = 0;this.Kggg5 = function(forceBoo){if(forceBoo == undefined) forceBoo = false;if(m_beginFlag == 0 || forceBoo){m_beginFlag = 1;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kggg5 != null){this.Knn0.Kggg5(m_renderer);m_renderer.KSS4(this.Knn0.Kqq6(), this.Knn0.Knn6(), this.Knn0.Kaaa2());};};};};};this.Kgg6 = function(){if(m_beginFlag == 1){m_beginFlag = 0;if(this.KKK3 && this.Koo7){if(this.Kzz1){if(this.Knn0.Kgg6 != null){this.Knn0.Kgg6(m_renderer);};};};};};this.use = function(gl){if(this.KKK3 && this.Koo7){if(this.Kzz1){}else{if(m_renderCtrl != null){m_renderCtrl.Kggg5(m_renderer);};m_solidBlock.use(gl);m_blendBlock.use(gl);if(m_renderCtrl != null){m_renderCtrl.Kgg6(m_renderer);};};};};this.Kiii0 = function(disp){let s = disp.KFF5();if(s != Vgg2.SCENE_RO_FILTER_FINISH){if((s&Vgg2.SCENE_RO_FILTER_BEGIN) != Vgg2.SCENE_RO_FILTER_BEGIN){s = 0xf & (s >> 16);let boo = m_blocks[s].Kiii0(disp);return boo;}else{return m_roscFilter.Kiii0(disp);};}else{return m_roscFilter.Kiii0(disp);};};};function Vii5(){let m_waitList = [];let m_waitTotal = 0;this.Kuu3 = -1;this.KLL3 = function(ro){let sign = Vgg2.SCENE_RO_FILTER_BEGIN | (this.Kuu3 << 24);ro.Kpp4( sign );m_waitList.push( ro );m_waitTotal ++;};this.Kiii0 = function(ro){ro.Kpp4(Vgg2.SCENE_RO_ERASE);return true;};let m_ro = null;let m_material = null;this.Ktt6 = function(sc){let tex = null;let shdp = null;for(let i = 0; i < m_waitTotal; ++i){m_ro = m_waitList[i];if(m_ro.KFF5() > Vgg2.SCENE_RO_ERASE){m_material = m_ro.Kkk6();if(m_material != null && m_ro.Kpp7() != null){shdp = m_material.KYY0();if(shdp != null){if(shdp.haveTexture()){if(m_material.Kww5()){m_waitList.splice(i,1);--m_waitTotal;--i;m_ro.Kpp4( Vgg2.SCENE_RO_FILTER_FINISH );sc.Kccc0(m_ro);};}else{m_waitList.splice(i,1);--m_waitTotal;--i;m_ro.Kpp4( Vgg2.SCENE_RO_FILTER_FINISH );sc.Kccc0(m_ro);};};};}else{m_waitList.splice(i,1);m_waitTotal --;--i;m_ro.Kpp4( Vgg2.SCENE_RO_ERASE );};};};};function Vmm6(pickEnabled){let m_renderer = new Vgg6();this.KDD5 = null;this.gl = null;this.Kaaa5 = true;this.KFF0 = false;this.Kqq2 = null;this.Kccc7 = 0.1;this.Kzzz2 = 2000.0;this.KAA6 = 45.0;this.KAAA5 = true;this.Kyyy5 = true;this.KAA2 = false;this.Kzzz4 = null;if(pickEnabled == undefined){pickEnabled = true;};if(pickEnabled){this.Kzzz4 = new Vdd5();};let m_viewX = 0;let m_viewY = 0;let m_viewWidth = 512;let m_viewHeight = 512;let m_viewSizeEnabled = false;this.Klll5 = function(px,py,pw,ph){m_viewX = px;m_viewY = py;m_viewWidth = pw;m_viewHeight = ph;m_viewSizeEnabled = true;};this.KFF1 = function(glCanvasNS,posV3, lookAtPosV3, upV3){if (!m_renderer){Vee4("webgl create error");abort();};if(posV3 == undefined){posV3 = new Vqq0(500.0, 600.0, 500.0);};if(lookAtPosV3 == undefined){lookAtPosV3 = new Vqq0(0.0, 0.0, 0.0);};if(upV3 == undefined){upV3 = new Vqq0(0.0, 1.0, 0.0);};m_renderer.KAAA5 = this.KAAA5;m_renderer.Kyyy5 = this.Kyyy5;m_renderer.KAA2 = this.KAA2;m_renderer.KFF1(document,glCanvasNS);this.KDD5 = m_renderer.KDD5;this.gl = m_renderer.gl;m_renderer.Kqq2.Koo6 = true;if(m_viewSizeEnabled){if(this.Kaaa5){if(this.KFF0){m_renderer.Kqq2.Kff2(Vjj2.degreeToRadian(this.KAA6), m_viewWidth, m_viewHeight, this.Kccc7, this.Kzzz2);}else{m_renderer.Kqq2.Kff1(Vjj2.degreeToRadian(this.KAA6), m_viewWidth/m_viewHeight, this.Kccc7, this.Kzzz2);};}else{m_renderer.Kqq2.Kff3(this.Kccc7, this.Kzzz2, -0.5 * m_viewHeight, 0.5 * m_viewHeight, -0.5 * m_viewWidth, 0.5 * m_viewWidth);};}else{m_viewWidth = Stage.Kvv6;m_viewHeight = Stage.KMM1;if(this.Kaaa5){if(this.KFF0){m_renderer.Kqq2.Kff2(Vjj2.degreeToRadian(this.KAA6), m_viewWidth, m_viewHeight, this.Kccc7, this.Kzzz2);}else{m_renderer.Kqq2.Kff1(Vjj2.degreeToRadian(this.KAA6), m_viewWidth/m_viewHeight, this.Kccc7, this.Kzzz2);};}else{m_renderer.Kqq2.Kff3(this.Kccc7, this.Kzzz2, -0.5 * m_viewHeight, 0.5 * m_viewHeight, -0.5 * m_viewWidth, 0.5 * m_viewWidth);};};m_renderer.Kqq2.Kff6(posV3, lookAtPosV3, upV3);m_renderer.Kqq2.Kzzz6();this.Kqq2 = m_renderer.Kqq2;if(this.Kzzz4 != null){this.Kzzz4.Kggg3(m_renderer.Kqq2);};m_renderer.KLL2 = false;m_renderer.Kmmm8.Kxxx6(0.0,0.0,0.0);};this.Kfff8 = function(){return m_renderer;};let m_scPageHead = null;let m_scPageTail = null;let m_scPagesArr = [];this.KGG6 = function(sortObj){let scPage = new Vjj6();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};return scPage.KGG3;};this.Ksss0 = function(){Vii8.reset();m_renderer.Kzzz6();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();};let m_separateIndex = 32;this.KYY6 = function(){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_separateIndex;scPage.Kxx3( m_renderer );scPage.Kqq2 = this.Kqq2;++m_separateIndex;return scPage;};this.Kii2 = function(page,pcamera,flag){if(flag == undefined){flag = 1;};if(pcamera == undefined){page.Kzzz6( page.Kqq2,flag );}else{page.Kzzz6( pcamera,flag );};page.use( this.gl );};this.Kfff6 = function(page,disp){if(disp != null && disp != undefined){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){page.Kkk7(disp);return 0;};};return -1;};this.Kccc6 = function(page, disp){if(disp != null){let s = disp.KFF5();s = s>>24;if(s == page.KGG3 && disp.KFF5() > Vgg2.SCENE_RO_ERASE){page.Kiii0( disp );};};};this.Kqqq0 = function(){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};return scPage.KGG3;};this.Kkk7 = function(disp, sc_index){if(disp != null){if(disp.KFF5() == Vgg2.SCENE_RO_ERASE){if(sc_index == undefined){;sc_index = -1;};let scPage = null;if(sc_index < 0){scPage = m_scPageTail;}else{if(sc_index>=0 && sc_index < m_scPagesArr.length){scPage = m_scPagesArr[sc_index];};};if(scPage != null && !scPage.Kzz1){scPage.Kkk7(disp);return scPage.KGG3;}else{scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kqq2 = this.Kqq2;scPage.Kxx3( m_renderer );if(m_scPageHead == null) {m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};scPage.Kkk7(disp);return scPage.KGG3;};};};return -1;};this.KYY4 = function(disp){if(disp != null && disp != undefined){let s = disp.KFF5();if(s > Vgg2.SCENE_RO_ERASE){s = (s>>24);let page = m_scPagesArr[s];page.Kiii0( disp );};};};this.Kqqq6 = function(rttdisp){return this.Kwww2(rttdisp);};this.Kwww2 = function(rttdisp){if(rttdisp != null && rttdisp != undefined){if(rttdisp.KFF5() == Vgg2.SCENE_RO_ERASE){let scPage = new Vbb5();scPage.Kzzz4 = this.Kzzz4;scPage.KGG3 = m_scPagesArr.length;m_scPagesArr.push(scPage);scPage.Kzz1 = true;scPage.Kxx3( m_renderer );if(m_scPageHead == null){m_scPageTail = m_scPageHead = scPage;}else{m_scPageTail.Kqq0 = scPage;m_scPageTail = scPage;};scPage.Knn0 = rttdisp;scPage.Kkk7(rttdisp);return scPage.KGG3;};};return -1;};this.Keee0 = function(disp,texList){let runit = Vmm8.clasp.Kuuu3(disp);if(runit != null){disp.Kkk6().Kwww7( texList );runit.Kzz0(m_renderer.gl, disp.Kkk6());};};let m_runBegin = true;let m_runEnd = true;this.KDD1 = function(){m_renderer.KSS8();Vii8.roState = -1;};this.KOO3 = function(){if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.Kkkk4();};};Vii8.reset();m_runBegin = false;m_renderer.Kzzz6();m_renderer.Kmm2();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();};this.Kkk0 = function(index,pcamera){let page = m_scPagesArr[index];page.Kqq2 = pcamera;};this.Kss8 = function(index){let page = m_scPagesArr[index];return page.Kqq2;};this.KVV4 = function(i,updateBoo,cleanFBOBoo,flag,prttEnabled){let page = m_scPagesArr[i];let nextPage = page.Kqq0;if(prttEnabled == undefined){prttEnabled = true;};if(page.KKK3){if(page.Kzz1){page.Kgg6();};};if(prttEnabled && nextPage != null){if(nextPage.Kzz1){if(cleanFBOBoo){nextPage.Kggg5(true);}else{m_renderer.Krrr6();m_renderer.Kggg5();};};};if(flag == undefined){flag = 1;};if(!page.Kzz1){if(updateBoo == undefined || updateBoo){page.Kzzz6( page.Kqq2,flag );};Vii8.roState = -1;page.use( this.gl );};};this.KHH0 = function(i,material,blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[i];page.KVV8(blockIndex,material);};this.Kooo3 = function(pageI,nodeI,material, blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[pageI];page.Klll4(blockIndex,nodeI,material);};this.KPP2 = function(pageI,oldMaterial,newMaterial, blockIndex){if(blockIndex == undefined){blockIndex = 0;};let page = m_scPagesArr[pageI];page.KPP2(blockIndex, oldMaterial, newMaterial);};this.Krr6 = function(pageIndex, rttEnabled, flag){if (pageIndex > -1 && pageIndex < m_scPagesArr.length){if(rttEnabled == undefined){rttEnabled = true;};if(flag == undefined){flag = 1;};let page = m_scPagesArr[pageIndex];let nextPageI = pageIndex + 1;if (nextPageI < m_scPagesArr.length){if (rttEnabled){if (page.KKK3){if (page.Kzz1){page.Kgg6();};};let nextPage = null;while (nextPageI < m_scPagesArr.length){nextPage = m_scPagesArr[nextPageI];if (nextPage.Kzz1){if (nextPage.KKK3){nextPage.Kggg5();};break;}else{++nextPageI;};};};};if (page.KKK3){if (!page.Kzz1){page.Kzzz6(page.Kqq2,flag);page.use(this.gl);};};};};this.Kuuu4 = function(){if(m_runEnd){if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.end();};};m_renderer.Kgg6();};m_runEnd = true;m_runBegin = true;};this.Kfff1 = function(i, boo){if(boo == undefined) boo = true;let page = m_scPagesArr[i];page.KKK3 = boo;};this.Kyy5 = function(i, boo){if(boo == undefined) boo = true;let page = m_scPagesArr[i];page.Koo7 = boo;};this.KAAA3 = function(i){let page = m_scPagesArr[i];return page;};this.KAA1 = function(i){let page = m_scPagesArr[i];page.KOO8();};this.Klll3 = function(){return m_scPagesArr.length;};this.KGG7 = function(vw,vh){m_renderer.KGG7(vw,vh);};this.run = function(){if(m_runBegin){if(this.Kzzz4.Khhh8()){this.Kzzz4.Kkkk4();};Vii8.reset();m_renderer.Kzzz6();m_renderer.Kmm2();m_renderer.KSS8();Vii8.roState = -1;m_renderer.Kggg5();RenderSYS_DRAWTIMES = 0;};m_runBegin = true;let nextPage = m_scPageHead;let rttPage = null;let page = null;let pageI = 0;while(nextPage != null){page = nextPage;nextPage = page.Kqq0;if(page.KKK3){if(page.Kzz1){page.Kgg6();};};rttPage = nextPage;while(rttPage != null){if(rttPage.Kzz1){rttPage.Kggg5();break;}else{rttPage = rttPage.Kqq0;};};if(page.KKK3){if(!page.Kzz1){page.Kzzz6( page.Kqq2,1 );Vii8.roState = -1;page.use( this.gl );};};pageI ++;};if(this.Kzzz4 != null){if(this.Kzzz4.Khhh8()){this.Kzzz4.end();};};m_renderer.Kgg6();m_runEnd = false;};this.Kttt2 = function(){if(this.Kzzz4 != null){this.Kzzz4.KPP1 = EventConst.MOUSE_DOWN;};};this.KBBB0 = function(){if(this.Kzzz4 != null){this.Kzzz4.KPP1 = EventConst.MOUSE_UP;};};};function Vcc2(){this.Klll7 = new Vii0();this.KDD7 = new Vii0();this.Koo6 = false;let m_tempV = new Vqq0();let m_tempV1 = new Vqq0();let m_initRV = new Vqq0();let m_initUP = new Vqq0();let  m_lookRHEnabled = true;let m_matrix = new Vbb1();let m_viewMat = new Vbb1();let m_viewInvertMat = new Vbb1();let m_tempMat = new Vbb1();let m_eye = new Vqq0();let m_pos = new Vqq0();let m_up = new Vqq0();let m_lookDirectNV = new Vqq0();let m_lookAtDirec = new Vqq0();let m_nearPlaneWidth = 1.0;let m_nearPlaneHeight = 1.0;let m_stageW = 800, m_stageH = 600;let m_fovy = 0.0,m_aspect = 1.0, m_zNear = 0.1, m_zFar = 1000.0;let m_b = 0.0,m_t = 0.0,m_l = 0.0,m_r = 0.0;let m_projMat = new Vbb1();let m_perspectiveEnabled = false;let m_project2Enabled = false;let m_rightHandEnabled = true;let m_rotateX = 0.0;let m_rotateY = 0.0;let m_rotateZ = 0.0;let m_viewFieldZoom = 1.0;let m_changed = true;this.KBB1 = "Camera";this.KWW7 = function(){};this.Kff7 = function(eye, pos, up){m_eye.Kbb8(eye);m_pos.Kbb8(pos);m_up.Kbb8(up);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = false;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();m_initUP.Kbb8(up);m_initUP.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.Kff6 = function(eye, pos, up){m_eye.Kbb8(eye);m_pos.Kbb8(pos);m_up.Kbb8(up);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();m_initUP.Kbb8(up);m_initUP.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.Kooo4 = function(eye, pos, up, outViewMat){outViewMat.Kff7(eye, pos, up);};this.KDD2 = function(eye, pos, up, outViewMat){outViewMat.Kff6(eye, pos, up);};this.Kff4 = function(fovy, aspect, zNear, zFar){m_project2Enabled = false;m_aspect = aspect;m_fovy = fovy;m_zNear = zNear;m_zFar = zFar;m_projMat.Kff4(fovy, aspect, zNear, zFar);m_viewFieldZoom = Math.tan(fovy * 0.5);m_perspectiveEnabled = true;m_rightHandEnabled = false;m_changed = true;};this.Kff1 = function(fovy, aspect, zNear, zFar){m_aspect = aspect;m_fovy = fovy;m_zNear = zNear;m_zFar = zFar;m_projMat.Kff1(fovy, aspect, zNear, zFar);m_viewFieldZoom = Math.tan(fovy * 0.5);m_project2Enabled = false;m_perspectiveEnabled = true;m_rightHandEnabled = true;m_changed = true;};this.Kff2 = function(fovy, pw,ph, zNear, zFar){m_aspect = pw/ph;m_fovy = fovy;m_zNear = zNear;m_zFar = zFar;m_projMat.Kff2(fovy, pw,ph, zNear, zFar);m_viewFieldZoom = Math.tan(fovy * 0.5);m_perspectiveEnabled = true;m_project2Enabled = true;m_rightHandEnabled = true;m_changed = true;};this.Kuuu7 = function(){return m_viewFieldZoom;};this.Kff3 = function(zNear, zFar, b, t, l, r){m_zNear = zNear;m_zFar = zFar;m_b = b;m_t = t;m_l = l;m_r = r;m_projMat.Kff3(b, t, l, r, zNear, zFar);m_perspectiveEnabled = false;m_rightHandEnabled = true;m_changed = true;};this.Kff5 = function(zNear, zFar, b, t, l, r){m_zNear = zNear;m_zFar = zFar;m_b = b;m_t = t;m_l = l;m_r = r;m_projMat.Kff5(b, t, l, r, zNear, zFar);m_perspectiveEnabled = false;m_rightHandEnabled = false;m_changed = true;};this.Kaaa5 = function(){return m_perspectiveEnabled;};this.KNN0 = function(){return m_rightHandEnabled;};let m_viewX = 0.0;let m_viewY = 0.0;this.Kxxx1 = function(px,py){m_viewX = px;m_viewY = py;};this.Kss6 = function(pw,ph){if(m_perspectiveEnabled){if(m_project2Enabled){if(m_rightHandEnabled)this.Kff2(m_fovy, pw/ph, m_zNear, m_zFar);else this.perspectiveLH2(m_fovy, pw/ph, m_zNear, m_zFar);}else{if(m_rightHandEnabled)this.Kff1(m_fovy, pw/ph, m_zNear, m_zFar);else this.Kff4(m_fovy, pw/ph, m_zNear, m_zFar);};};};this.KJJ4 = function(v3){m_eye.Kbb8(v3);m_pos.x = v3.x + m_lookAtDirec.x;m_pos.y = v3.y + m_lookAtDirec.y;m_pos.z = v3.z + m_lookAtDirec.z;m_changed = true;};this.Kddd3 = function(px, py, pz){m_eye.Kkkk3(px,py,pz);m_pos.x = px + m_lookAtDirec.x;m_pos.y = py + m_lookAtDirec.y;m_pos.z = pz + m_lookAtDirec.z;m_changed = true;};this.Kttt3 = function(dis){;m_eye.x += m_lookDirectNV.x * dis;;m_eye.y += m_lookDirectNV.y * dis;;m_eye.z += m_lookDirectNV.z * dis;m_pos.x = m_eye.x + m_lookAtDirec.x;m_pos.y = m_eye.y + m_lookAtDirec.y;m_pos.z = m_eye.z + m_lookAtDirec.z;m_changed = true;};this.KXX3 = function(rad){m_tempMat.Kaa1();m_tempMat.Kaa6(rad,m_up);m_lookAtDirec.x = m_eye.x - m_pos.x;m_lookAtDirec.y = m_eye.y - m_pos.y;m_lookAtDirec.z = m_eye.z - m_pos.z;m_tempMat.transformVectorSelf(m_lookAtDirec);m_eye.x = m_lookAtDirec.x + m_pos.x;m_eye.y = m_lookAtDirec.y + m_pos.y;m_eye.z = m_lookAtDirec.z + m_pos.z;m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.KAAA1 = function(rad){m_tempMat.Kaa1();m_tempMat.Kaa6(rad,m_initRV);m_lookAtDirec.x = m_eye.x - m_pos.x;m_lookAtDirec.y = m_eye.y - m_pos.y;m_lookAtDirec.z = m_eye.z - m_pos.z;m_tempMat.transformVectorSelf(m_lookAtDirec);m_eye.x = m_lookAtDirec.x + m_pos.x;m_eye.y = m_lookAtDirec.y + m_pos.y;m_eye.z = m_lookAtDirec.z + m_pos.z;m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_initRV,m_lookAtDirec, m_up);m_up.Kww1();m_initUP.Kbb8(m_up);m_changed = true;};this.KFF2 = function(v3){Vqq0.cross(m_lookAtDirec, m_up, m_tempV);var dot = m_tempV.Kfff5(m_initUP);m_tempV1.Kbb8(m_initUP);m_tempV1.Kxxx5(dot);m_tempV.Kuuu1(m_tempV1);m_eye.Kbb8(v3);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_tempV, m_lookAtDirec, m_up);m_up.Kww1();m_changed = true;};this.KEE8 = function(px, py, pz){Vqq0.cross(m_lookAtDirec, m_up, m_tempV);var dot = m_tempV.Kfff5(m_initUP);m_tempV1.Kbb8(m_initUP);m_tempV1.Kxxx5(dot);m_tempV.Kuuu1(m_tempV1);m_eye.Kkkk3(px, py, pz);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_tempV, m_lookAtDirec, m_up);m_up.Kww1();m_changed = true;};this.KCC3 = function(px, py, pz){m_pos.Kkkk3(px,py,pz);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.Kbbb1 = function(px, py, pz){m_eye.Kkkk3(px,py,pz);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.Kvvv7 = function(v3){m_eye.Kbb8(v3);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookRHEnabled = true;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();Vqq0.cross(m_lookAtDirec, m_up, m_initRV);m_initRV.Kww1();m_changed = true;};this.Kbb8 = function(tarCam){let pv = tarCam.Kss7();m_eye.Kbb8(pv);pv = tarCam.Kii8();m_pos.Kbb8(pv);this.KHH1(tarCam.KTT8());this.KQQ3(tarCam.KPP0());this.Kff8( tarCam.Kbbb0());this.KFF7(tarCam.KDD3());this.KSS0( tarCam.Kjjj0() );m_viewInvertMat.Kbb8(tarCam.Kppp8());};this.Kddd0 = function() {return m_lookDirectNV;};this.Kss4 = function() {return m_up;};this.KPP6 = function() {return m_initRV;};this.Kss7 = function() {return m_eye;};this.Ksss8 = function(px, py, pz){m_pos.Kkkk3(px,py,pz);m_lookAtDirec.x = m_pos.x - m_eye.x;m_lookAtDirec.y = m_pos.y - m_eye.y;m_lookAtDirec.z = m_pos.z - m_eye.z;m_lookDirectNV.Kbb8(m_lookAtDirec);m_lookDirectNV.Kww1();m_changed = true;};this.Kjjj0 = function(){return m_perspectiveEnabled;};this.KSS0 = function(boo){m_perspectiveEnabled = boo;};this.Kii8 = function() { return m_pos; };this.Kccc3 = function(degree){m_rotateX = degree;m_changed = true;};this.KCC8 = function() { return m_rotateX; };this.Kccc4 = function(degree){m_rotateY = degree;m_changed = true;};this.KDD0 =function(){ return m_rotateY; };this.Kccc2 = function(degree){m_rotateZ = degree;m_changed = true;};this.KCC7 = function() { return m_rotateZ; };this.Kgg5 = function(rx, ry, rz){m_rotateX = rx;m_rotateY = ry;m_rotateZ = rz;m_changed = true;};this.KOO1 = function(px, py, outV){if (m_perspectiveEnabled) {;px = m_nearPlaneWidth * (px - Stage.Kkkk5) / Stage.Kkkk5;py = m_nearPlaneHeight * (Stage.Kqqq1 - py) / Stage.Kqqq1;}else {};outV.Kkkk3(px,py, -m_zNear);};this.Kyy4 = function(px, py, outV){px -= m_viewX;py -= m_viewY;if (m_perspectiveEnabled) {;px = 0.5 * m_nearPlaneWidth * (px - Stage.Kkkk5) / Stage.Kkkk5;py = 0.5 * m_nearPlaneHeight * (Stage.Kqqq1 - py) / Stage.Kqqq1;}else {};outV.Kkkk3(px, py, -m_zNear);outV.w = 1.0;m_viewInvertMat.transformVectorSelf(outV);};this.KVV2 = function(screenX, screenY, ray_pos, ray_tv){screenX -= m_viewX;screenX -= m_viewY;if (m_perspectiveEnabled) {;screenX = 0.5 * m_nearPlaneWidth * (screenX - Stage.Kkkk5) / Stage.Kkkk5;screenY = 0.5 * m_nearPlaneHeight * (screenY - Stage.Kqqq1) / Stage.Kqqq1;}else{};ray_pos.Kkkk3(screenX, screenY, -m_zNear);ray_pos.w = 1.0;m_viewInvertMat.transformVectorSelf(ray_pos);ray_tv.Kbb8(ray_pos);ray_tv.Kuuu1(m_eye);ray_tv.Kww1();};this.Kvv3 = function(pv3,scPV3){scPV3.Kbb8(pv3);m_vpMat.transformVectorSelf(scPV3);scPV3.x /= scPV3.w;scPV3.y /= scPV3.w;};this.Kpp1 = function(outNV){outNV.Kbb8(m_lookDirectNV);};let m_frustumWAABB = new Voo7();let m_invViewMat = null;let m_newrPlaneHalfW = 0.5;let m_newrPlaneHalfH = 0.5;let m_nearWCV = new Vqq0();let m_farWCV = new Vqq0();let m_wNV = new Vqq0();let m_wFrustumVtxArr = [new Vqq0(),new Vqq0(),new Vqq0(),new Vqq0(),new Vqq0(),new Vqq0(),new Vqq0(),new Vqq0(),null,null,null];let m_wFrustumPlaneArr = [new Vbb7(),new Vbb7(),new Vbb7(),new Vbb7(),new Vbb7(),new Vbb7(),new Vbb7()];this.Knn8 = function(){return m_invViewMat;};this.KTT8 = function(){return m_zNear;};this.KHH1 = function(value){m_zNear = value;};this.KPP0 = function(){return m_zFar;};this.KQQ3 = function(value){m_zFar = value;};this.Kbbb0 = function(){return m_nearPlaneWidth;};this.Kff8 = function(value){m_nearPlaneWidth = value;};this.KDD3 = function(){return m_nearPlaneHeight;};this.KFF7 = function(value){m_nearPlaneHeight = value;};this.KJJ8 = function(){if(m_invViewMat == null) m_invViewMat = new Vbb1();m_invViewMat.Kbb8(m_viewMat);m_invViewMat.Kcc6();let plane = null;let tanv = Math.tan(m_fovy * 0.5);let halfMinH = m_zNear * tanv;let halfMinW = halfMinH * m_aspect;m_newrPlaneHalfW = halfMinW;m_newrPlaneHalfH = halfMinH;let halfMaxH = m_zFar * tanv;let halfMaxW = halfMaxH * m_aspect;m_nearWCV.Kkkk3(0,0,-m_zNear);m_farWCV.Kkkk3(0,0,-m_zFar);m_invViewMat.transformVectorSelf(m_nearWCV);m_invViewMat.transformVectorSelf(m_farWCV);m_wNV.x = m_farWCV.x - m_nearWCV.x;m_wNV.y = m_farWCV.y - m_nearWCV.y;m_wNV.z = m_farWCV.z - m_nearWCV.z;m_wNV.Kww1();plane = m_wFrustumPlaneArr[0];plane.nv.Kbb8(m_wNV);plane.KRR8 = plane.nv.Kfff5(m_farWCV);plane.Kaa0.Kbb8(m_farWCV);plane = m_wFrustumPlaneArr[1];plane.nv.Kbb8(m_wFrustumPlaneArr[0].nv);plane.KRR8 = plane.nv.Kfff5(m_nearWCV);plane.Kaa0.Kbb8(m_nearWCV);m_wFrustumVtxArr[8] = m_nearWCV;m_wFrustumVtxArr[9] = m_farWCV;m_wFrustumVtxArr[11] = m_wNV;m_wFrustumVtxArr[0].Kkkk3(-halfMaxW,-halfMaxH,-m_zFar);m_wFrustumVtxArr[1].Kkkk3(halfMaxW,-halfMaxH,-m_zFar);m_wFrustumVtxArr[2].Kkkk3(halfMaxW,halfMaxH,-m_zFar);m_wFrustumVtxArr[3].Kkkk3(-halfMaxW,halfMaxH,-m_zFar);m_wFrustumVtxArr[4].Kkkk3(-halfMinW,-halfMinH,-m_zNear);m_wFrustumVtxArr[5].Kkkk3(halfMinW,-halfMinH,-m_zNear);m_wFrustumVtxArr[6].Kkkk3(halfMinW,halfMinH,-m_zNear);m_wFrustumVtxArr[7].Kkkk3(-halfMinW,halfMinH,-m_zNear);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[0]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[1]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[2]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[3]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[4]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[5]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[6]);m_invViewMat.transformVectorSelf(m_wFrustumVtxArr[7]);m_frustumWAABB.max.Kkkk3(-9999999,-9999999,-9999999);m_frustumWAABB.min.Kkkk3(9999999,9999999,9999999);for(let i = 0; i < 8; ++i){m_frustumWAABB.KEE3(m_wFrustumVtxArr[i]);};m_frustumWAABB.Kmmm3();let v0 = m_wFrustumVtxArr[0];let v1 = m_wFrustumVtxArr[4];m_tempV.x = v0.x - v1.x;m_tempV.y = v0.y - v1.y;m_tempV.z = v0.z - v1.z;v0 = m_wFrustumVtxArr[1];v1 = m_wFrustumVtxArr[5];m_tempV1.x = v0.x - v1.x;m_tempV1.y = v0.y - v1.y;m_tempV1.z = v0.z - v1.z;plane = m_wFrustumPlaneArr[3];Vqq0.cross(m_tempV1, m_tempV, plane.nv);plane.nv.Kww1();plane.KRR8 = plane.nv.Kfff5(v0);plane.Kaa0.Kbb8(v0);v0 = m_wFrustumVtxArr[3];v1 = m_wFrustumVtxArr[7];m_tempV.x = v0.x - v1.x;m_tempV.y = v0.y - v1.y;m_tempV.z = v0.z - v1.z;v0 = m_wFrustumVtxArr[2];v1 = m_wFrustumVtxArr[6];m_tempV1.x = v0.x - v1.x;m_tempV1.y = v0.y - v1.y;m_tempV1.z = v0.z - v1.z;plane = m_wFrustumPlaneArr[2];Vqq0.cross(m_tempV1, m_tempV, plane.nv);plane.nv.Kww1();plane.KRR8 = plane.nv.Kfff5(v0);plane.Kaa0.Kbb8(v0);v0 = m_wFrustumVtxArr[0];v1 = m_wFrustumVtxArr[4];m_tempV.x = v0.x - v1.x;m_tempV.y = v0.y - v1.y;m_tempV.z = v0.z - v1.z;v0 = m_wFrustumVtxArr[3];v1 = m_wFrustumVtxArr[7];m_tempV1.x = v0.x - v1.x;m_tempV1.y = v0.y - v1.y;m_tempV1.z = v0.z - v1.z;plane = m_wFrustumPlaneArr[4];Vqq0.cross(m_tempV, m_tempV1, plane.nv);plane.nv.Kww1();plane.KRR8 = plane.nv.Kfff5(v0);plane.Kaa0.Kbb8(v0);v0 = m_wFrustumVtxArr[1];v1 = m_wFrustumVtxArr[5];m_tempV.x = v0.x - v1.x;m_tempV.y = v0.y - v1.y;m_tempV.z = v0.z - v1.z;v0 = m_wFrustumVtxArr[2];v1 = m_wFrustumVtxArr[6];m_tempV1.x = v0.x - v1.x;m_tempV1.y = v0.y - v1.y;m_tempV1.z = v0.z - v1.z;plane = m_wFrustumPlaneArr[5];Vqq0.cross(m_tempV, m_tempV1, plane.nv);plane.nv.Kww1();plane.KRR8 = plane.nv.Kfff5(v0);plane.Kaa0.Kbb8(v0);};this.KAA5 = function(){return m_frustumWAABB;};this.KHH7 = function(){return m_frustumWAABB.KJJ0();};this.KXX8 = function(){return m_wFrustumVtxArr;};this.Kkk2 = function(){return m_wFrustumPlaneArr;};this.Kzzz0 = function(w_cv,radius){let boo = m_frustumWAABB.Kmm4(w_cv, radius);if(boo){let pf0 = m_wFrustumPlaneArr[0].Kzz3( w_cv, radius );let pf1 = m_wFrustumPlaneArr[1].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[0].Kmmm4 || m_wFrustumPlaneArr[1].Kmmm4){}else{return false;};};pf0 = m_wFrustumPlaneArr[2].Kzz3( w_cv, radius );pf1 = m_wFrustumPlaneArr[3].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[2].Kmmm4 || m_wFrustumPlaneArr[3].Kmmm4){}else{return false;};};pf0 = m_wFrustumPlaneArr[4].Kzz3( w_cv, radius );pf1 = m_wFrustumPlaneArr[5].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[4].Kmmm4 || m_wFrustumPlaneArr[5].Kmmm4){}else{return false;};};return true;};return false;};this.Kjj4 = function(ro){let w_cv = ro.Kvvv4.KJJ0();let radius = ro.Kvvv4.KDD4();let boo = m_frustumWAABB.Kmm4(w_cv, radius);if(boo){let pf0 = m_wFrustumPlaneArr[0].Kzz3( w_cv, radius );let pf1 = m_wFrustumPlaneArr[1].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[0].Kmmm4 || m_wFrustumPlaneArr[1].Kmmm4){}else{return false;};};pf0 = m_wFrustumPlaneArr[2].Kzz3( w_cv, radius );pf1 = m_wFrustumPlaneArr[3].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[2].Kmmm4 || m_wFrustumPlaneArr[3].Kmmm4){}else{return false;};};pf0 = m_wFrustumPlaneArr[4].Kzz3( w_cv, radius );pf1 = m_wFrustumPlaneArr[5].Kzz3( w_cv, radius );if(pf0 * pf1 >= 0){if(m_wFrustumPlaneArr[4].Kmmm4 || m_wFrustumPlaneArr[5].Kmmm4){}else{return false;};};return true;};return false;};let m_vpMat = new Vbb1();this.Kzzz6 = function(){if(m_changed){m_changed = false;m_matrix.Kaa1();m_matrix.Kbb1(m_rotateX * Vjj2.MATH_PI_OVER_180, m_rotateY * Vjj2.MATH_PI_OVER_180, m_rotateZ * Vjj2.MATH_PI_OVER_180);if (m_lookRHEnabled){m_viewMat.Kff6(m_eye, m_pos, m_up);}else{m_viewMat.Kff7(m_eye, m_pos, m_up);};if(m_project2Enabled){m_nearPlaneWidth = m_zNear * Math.tan(m_fovy * 0.5) * 2.0;m_nearPlaneHeight = m_nearPlaneWidth / m_aspect;}else{m_nearPlaneHeight = m_zNear * Math.tan(m_fovy * 0.5) * 2.0;m_nearPlaneWidth = m_aspect * m_nearPlaneHeight;};m_viewMat.Kaa3(m_matrix);m_viewInvertMat.Kbb8(m_viewMat);m_viewInvertMat.Kcc6();m_vpMat.Kaa1();m_vpMat.Kbb8(m_viewMat);m_vpMat.Kaa3(m_projMat);this.KJJ8();if(this.Koo6){if(this.Klll7.rst < 0){this.Klll7.rst = 1;this.Klll7.Knnn6 = GlobalUniformSlot.Kll0;this.Klll7.Klll0 = 2;GlobalUniformSlot.Krrr4[this.Klll7.Knnn6] = m_viewMat;GlobalUniformSlot.Krrr4[this.Klll7.Knnn6+1] = m_projMat;;GlobalUniformSlot.Kll0 += this.Klll7.Klll0;this.Klll7.Kttt1 = [Vjj5.SHADER_MAT4, Vjj5.SHADER_MAT4];this.Klll7.Kmm5 = [1,1];};if(this.Klll7.rst > 0xffffff){this.Klll7.rst = Math.round(Math.random() * 1000) + 100;};this.Klll7.rst++;GlobalUniformSlot.KJJ1[this.Klll7.Knnn6] = this.Klll7.rst;GlobalUniformSlot.KJJ1[this.Klll7.Knnn6+1] = this.Klll7.rst;if(this.KDD7.rst < 0){this.KDD7.rst = 1;this.KDD7.Knnn6 = GlobalUniformSlot.Kll0;this.KDD7.Klll0 = 1;GlobalUniformSlot.Krrr4[this.KDD7.Knnn6] = [m_zNear,m_zFar,m_newrPlaneHalfW,m_newrPlaneHalfH];;GlobalUniformSlot.Kll0 += this.KDD7.Klll0;this.KDD7.Kttt1 = [Vjj5.SHADER_VEC4];this.KDD7.Kmm5 = [1];};if(this.KDD7.rst > 0xffffff){this.KDD7.rst = Math.round(Math.random() * 1000) + 100;};this.KDD7.rst++;GlobalUniformSlot.KJJ1[this.KDD7.Knnn6] = this.KDD7.rst;};};};this.KNN3 = function(){};this.KTT1 = function(){return m_lookRHEnabled;};this.Kfff7 = function(){return !m_lookRHEnabled;};this.Kll2 = function(){return m_vpMat;};this.KQQ0 = function(){return m_viewMat;};this.Ktt1 = function(){return m_viewMat;};this.Kppp8 = function(){return m_viewInvertMat;};this.Kxx6 = function(){return m_projMat;};};function Voo4(){var m_matrix = new Vbb1();var m_position = new Vqq0();var m_direction = new Vqq0();var m_angle = 0.0;var m_updateEnabled = false;var m_camera = null;this.KNN3 = function(){m_camera = null;};this.Kgg0 = function(cam){m_camera = cam;if (cam!= null){m_direction.Kbb8(m_camera.Kss7());m_direction.Kuuu1(m_camera.Kii8());};};this.Kzzz6 = function(){if (m_camera != null && m_updateEnabled){m_updateEnabled = false;};};this.KBBB5 = function(float_degrees){m_angle = float_degrees;m_updateEnabled = true;m_direction.Kbb8(m_camera.Kss7());m_direction.Kuuu1(m_camera.Kii8());m_matrix.Kaa1();m_matrix.Kaa8(m_angle * Vjj2.MATH_PI_OVER_180);m_position.Kbb8(m_direction);m_matrix.transformVectorSelf(m_position);m_position.Kxxx3(m_camera.Kii8());m_camera.KFF2(m_position);};this.Kccc8 = function(float_degrees){m_angle = float_degrees;m_updateEnabled = true;m_direction.Kbb8(m_camera.Kss7());m_direction.Kuuu1(m_camera.Kii8());m_matrix.Kaa1();m_matrix.Kaa7(m_angle * Vjj2.MATH_PI_OVER_180);m_position.Kbb8(m_direction);m_matrix.transformVectorSelf(m_position);m_position.Kxxx3(m_camera.Kii8());m_camera.KFF2(m_position);};this.Kddd1 = function(float_degrees){m_angle = float_degrees;m_updateEnabled = true;m_direction.Kbb8(m_camera.Kss7());m_direction.Kuuu1(m_camera.Kii8());m_matrix.Kaa1();m_matrix.Kbb0(m_angle * Vjj2.MATH_PI_OVER_180);m_position.Kbb8(m_direction);m_matrix.transformVectorSelf(m_position);m_position.Kxxx3(m_camera.Kii8());m_camera.KFF2(m_position);};};function Vkk6(){};Vkk6.s_id = 0;function Vff5(){this.id = 0;this.KYY3 = new Vkk4();this.Khhh6 = new Vqq0();this.Kmmm2 = new Vqq0();this.KGG5 = new Vqq0();this.KUU3 = 0.0;this.KUU1 = 1.0;this.Koo7 = false;this.Kqq3 = new Vjj8(0,0,0,0);let m_spd = 2.0;let m_spdV = new Vqq0(Math.random() * m_spd - 0.5 * m_spd, Math.random() * m_spd - 0.5 * m_spd, Math.random() * m_spd - 0.5 * m_spd);let m_moveMinV = new Vqq0();let m_moveMaxV = new Vqq0();let m_tpV = new Vqq0();let m_id = Vkk6.s_id++;this.KLL7 = function(minV, maxV){m_moveMinV.Kbb8(minV);m_moveMaxV.Kbb8(maxV);};this.Ktt4 = function(spd){m_spd = spd;m_spdV.Kkkk3(Math.random() * m_spd - 0.5 * m_spd, Math.random() * m_spd - 0.5 * m_spd, Math.random() * m_spd - 0.5 * m_spd);};this.run = function(){let pv = m_tpV;pv.Kbb8(this.Khhh6);pv.Kxxx3(m_spdV);if(pv.x > m_moveMaxV.x || pv.x < m_moveMinV.x){m_spdV.x *= -1.0;}else{this.Khhh6.x = pv.x;};if(pv.y > m_moveMaxV.y || pv.y < m_moveMinV.y){m_spdV.y *= -1.0;}else{this.Khhh6.y = pv.y;};if(pv.z > m_moveMaxV.z || pv.z < m_moveMinV.z){m_spdV.z *= -1.0;}else{this.Khhh6.z = pv.z;};};this.Khh2 = function(viewMat, projMat){viewMat.transformOutVector(this.Khhh6, this.Kmmm2);Vff5.s_XPos.Kbb8(this.Kmmm2);Vff5.s_YPos.Kbb8(this.Kmmm2);if (Vff5.s_XPos.x > 0.0){;Vff5.s_XPos.x += this.KUU3;}else{Vff5.s_XPos.x -= this.KUU3;};if (Vff5.s_YPos.y > 0.0){;Vff5.s_YPos.y += this.KUU3;}else{Vff5.s_YPos.y -= this.KUU3;};projMat.transformOutVector(this.Kmmm2, this.KGG5);projMat.transformVectorSelf(Vff5.s_XPos);projMat.transformVectorSelf(Vff5.s_YPos);this.KGG5.x /= this.KGG5.w;this.KGG5.y /= this.KGG5.w;Vff5.s_XPos.x /= Vff5.s_XPos.w;Vff5.s_YPos.y /= Vff5.s_YPos.w;let sph_pw = Math.abs(Vff5.s_XPos.x - this.KGG5.x) * 2.2;let sph_ph = Math.abs(Vff5.s_YPos.y - this.KGG5.y) * 2.2;this.Kqq3.KWW1(this.KGG5.x - sph_pw * 0.5, this.KGG5.y - 0.5 * sph_ph, sph_pw, sph_ph);};};Vff5.s_XPos = new Vqq0();Vff5.s_YPos = new Vqq0();Vff5.s_id = 0;function Vff4(){this.id = 0;this.Kqq3 = new Vjj8(0,0,0,0);this.Kll1 = null;this.KNN7 = new Int16Array(512);this.Kooo5 = new Int16Array(512);let m_idBegin = -1;let m_idTotal = -1;let m_minId = 0;let m_maxId = 512;let m_preId = 512;this.Kvvv0 = function(){m_idBegin = -1;m_idTotal = 0;if (m_minId < 512){this.KNN7.fill(-1, m_minId);};m_maxId = 0;m_minId = 512;m_preId = 512;};this.Kiii1 = function(index, tarea){if (this.Kqq3.Kwww4(tarea)){this.KNN7[index] = index;if (m_preId < 512){this.Kooo5[m_preId] = index - m_preId;m_preId = index;}else{m_preId = index;};if (m_maxId < index){m_maxId = index;};if (m_minId > index){m_minId = index;};++m_idTotal;};};this.KQQ2 = function(lights){};this.KBB2 = function(startI){if (m_idTotal > 0 && material != null){m_idBegin = startI;this.Kooo5[m_preId] = 0;let i = m_minId;for (;;){this.Kll1.setLightIdAt(startI, this.KNN7[i]);++startI;if (i >= m_maxId){break;};;i += this.Kooo5[i];};this.Kll1.Kyy2(id, m_idBegin, m_idTotal);};};};function Vmm3(){this.id = 0;this.Kddd2 = 490;this.Kqq3 = new Vjj8(0,0,0,0);this.Kll1 = null;this.KNN7 = new Int16Array(512);this.Krrr8 = 0.0;this.Kooo2 = 0.0;this.KBB0 = 0.0;this.KCC0 = 0.0;let m_idTotal = -1;let m_index = 0;this.Kvvv0 = function(){m_idTotal = 0;m_index = 0;};this.Kiii1 = function(index, tarea){if (m_idTotal < this.Kddd2 && this.Kqq3.Kwww4(tarea)){this.KNN7[m_index] = index;++m_index;++m_idTotal;};};this.KQQ2 = function(lights){};this.KBB2 = function(startI, group){if (m_idTotal > 0 && this.Kll1 != null){if (m_idTotal < this.Kddd2){let fds = this.Kll1.KWW6();let lights = group.Kll7;let i = 0;let k = 0;for (; i < m_idTotal; ++i){k = i * 8;let light = lights[this.KNN7[i]];let vPos = light.Kmmm2;let color = light.KYY3;fds[k] = vPos.x; fds[k + 1] = vPos.y; fds[k + 2] = vPos.z; fds[k + 3] = 0.0;fds[k + 4] = color.r; fds[k + 5] = color.g; fds[k + 6] = color.b; fds[k + 7] = light.KUU3;};this.Kll1.Kyy2(0, 0, m_idTotal);}else{};};};};function Vqq3(){this.id = 0;this.Kll7 = [];let m_lightsTotal = 0;this.Kvvv0 = function(){};this.Kbbb2 = function(total){if (m_lightsTotal < 1){m_lightsTotal = total;let i = 0;let light = null;for (; i < total; ++i){light = new Vff5();light.Khhh6.Kkkk3(Math.random() * 1000.0 - 500.0, Math.random() * 200.0 - 200.0, Math.random() * 1000.0 - 500.0);light.KYY3.Koo8();light.KYY3.KBBB3();light.KUU3 = Math.random() * 50.0 + 30.0;this.Kll7.push(light);};};};this.KOO4 = function(viewMat, projMat){};this.KSS2 = function(){return m_lightsTotal;};};function Vkk2(){this.id = 0;this.Kjj8 = [];this.Kyy8 = new Vqq3();this.Kzz7 = [];this.KVV3 = [];let m_lightsTotal = 0;let m_areasTotal = 0;let m_areadw = 1.0;let m_areadh = 1.0;let m_subAreaRN = 2;let m_subAreaCN = 2;this.Kvvv0 = function(){};this.KFF1 = function(total, tileRN, texList, areaTotLights){if (total > 0 && m_lightsTotal < 1){if(areaTotLights == undefined){areaTotLights = 490;};if (tileRN < 2){tileRN = 2;};m_subAreaCN = m_subAreaRN = tileRN;let material = null;m_lightsTotal = total;this.Kyy8.Kbbb2(total);m_areasTotal = m_subAreaRN * m_subAreaCN;m_areadh = 2.0 / m_subAreaRN;m_areadw = 2.0 / m_subAreaCN;let usScale = 1.0 / m_subAreaRN;let start_cf = -1.0;let start_rf = -1.0;let area = null;let tile_plane = null;let i = 0;let j = 0;let k = 0;for (; i < m_areasTotal; ++i){this.KVV3.push(null);this.Kjj8.push(null);};for (i = 0; i < m_subAreaRN; ++i){for ( j = 0; j < m_subAreaCN; ++j){k = i * m_subAreaCN + j;area = new Vmm3();area.Kddd2 = areaTotLights;this.Kzz7.push( area );area.Kqq3.KWW1(start_cf + m_areadw * j, start_rf + m_areadh * i, m_areadw, m_areadh);area.id = k;material = new Voo6(0);material.Kttt8 = "material_"+k+"_"+this.id;material.id = k;this.KVV3[k] = material;area.Kll1 = material;area.Kll1.Kddd6(areaTotLights, m_subAreaRN, m_subAreaCN);let prect = area.Kqq3;tile_plane = new Vbb8();tile_plane.id = k;tile_plane.Kll3(material);tile_plane.Kgg2 = j * usScale;tile_plane.KUU6 = i * usScale;tile_plane.Kppp6 = usScale;tile_plane.KJJ5 = usScale;tile_plane.Kddd5 = true;tile_plane.KFF1(prect.x, prect.y, prect.width, prect.height, texList);tile_plane.Kyyy6 = Vnn8.DISABLE;tile_plane.Kuuu8 = Vcc1.RENDER_ALWAYS;this.Kjj8[k] = tile_plane;};};this.Kmmm0();};};this.Kmmm0 = function(){if (m_lightsTotal > 0){};};this.KOO4 = function(camera){if (m_areasTotal > 0){let viewMat = camera.Ktt1();let projMat = camera.Kxx6();let i = 0;let j = 0;let tareas = this.Kzz7;for (; j < m_areasTotal; ++j){tareas[j].Kvvv0();};let boo = true;for (; i < m_lightsTotal; ++i){let light = this.Kyy8.Kll7[i];if (light.Koo7){boo = camera.Kzzz0(light.Khhh6, (light.KUU3 + 10.0));if (boo){light.Khh2(viewMat, projMat);for (j = 0; j < m_areasTotal; ++j){tareas[j].Kiii1(i, light.Kqq3);};};};};};};this.KSS2 = function(){return m_lightsTotal;};this.KBB2 = function(){let startI = 0;let j = 0;for (; j < m_areasTotal; ++j){this.Kzz7[j].KBB2(startI, this.Kyy8);};};this.Kww0 = function(context){let j = 0;let area = null;let pw = context.KGG8();let ph = context.Ksss2();for (; j < m_areasTotal; ++j){area = this.Kzz7[j];area.Krrr8 = Math.round((area.Kqq3.x + 1.0) * 0.5 * pw) - 1;area.Kooo2 = Math.round((area.Kqq3.y + 1.0) * 0.5 * ph) - 1;area.KBB0 = Math.round(area.Kqq3.width * 0.5 * pw) + 1;area.KCC0 = Math.round(area.Kqq3.height * 0.5 * ph) + 1;};};};function Vll1(){Vee7.call(this);this.Kll0 = 0;this.Kmm8 = 1;this.Kvv8 = function(){return 1;};this.KFF4 = function(tp){this.KLL8("vec4","OutputColor0");this.KLL8("vec4","OutputColor1");this.KLL8("vec4","OutputColor2");this.Kbbb8("vec2","v_texUV");this.Kbbb8("vec3","v_pnvs");this.Kbbb8("vec3","v_pos");this.Kqqq5(0);let codeStr = "\
vec4 color0 = texture(u_sampler0,v_texUV.xy);\n\
vec3 color = color0.rgb;\n\
OutputColor0 = vec4(color, 1.0);\n\
OutputColor1 = vec4(v_pnvs, 1.0);\n\
OutputColor2 = vec4(v_pos, 1.0);\n\
";
this.Keee8("\n" + codeStr);};this.Kff0 = function(){return "[Vll1()]";};};function Vff8(){Vii2.call(this);this.Kvv8 = function(){return 0;};this.KFF4 = function(tp){this.Ktt5("mat4","u_objMat");this.Ktt5("mat4","u_viewMat");this.Ktt5("mat4","u_projMat");this.Khhh1("vec3","a_vs");this.Khhh1("vec2","a_uvs");this.Khhh1("vec3","a_nvs");let codeStr = "\
mat4 viewMat4 = u_viewMat * u_objMat;\n\
vec4 viewPos = viewMat4 * vec4(a_vs, 1.0f);\n\
gl_Position = u_projMat * viewPos;\n\
mat3 viewMat3 = inverse(mat3(viewMat4));\n\
v_pnvs = normalize(a_nvs * viewMat3);\n\
v_texUV = a_uvs;\n\
v_pos = viewPos.xyz;\n\
";
this.Keee8("\n"+codeStr);};this.Kff0 = function(){return "[Vff8()]";};};function Vii6(){let m_uniqueName = "";let m_vshdIDNS = "";let m_fshdIDNS = "";let m_texEnabled = false;this.KFF1 = function(texEnabled){m_texEnabled = true;m_uniqueName = "Vcc4";m_vshdIDNS = "";m_fshdIDNS = "";};let m_fragCode = "";let m_vtxCode = "";this.Knnn1 = function(){let fragBlock = new Vll1();fragBlock.Kll0 = this.Kll0;fragBlock.Kmm8 = this.Kmm8;let fragShaderBody = new Vff3();fragShaderBody.KVV6( fragBlock );fragShaderBody.KNN2(m_texEnabled);let vtxBlock = new Vff8();let vtxShaderBody = new Vee1();vtxShaderBody.KVV6( vtxBlock );vtxShaderBody.KQQ1( fragShaderBody );vtxShaderBody.KNN2(m_texEnabled);m_fragCode = fragShaderBody.Kkk8();m_vtxCode = vtxShaderBody.Kkk8();};this.Krr8 = function(){return m_fragCode;};this.KQQ8 = function(){return m_vtxCode;};this.Kttt0 = function(){return m_uniqueName + m_vshdIDNS + m_fshdIDNS;};this.Kff0 = function(){return "[Vii6()]";};};Vii6.___s_instance = new Vii6();Vii6.getInstance = function(){return Vii6.___s_instance;};function Vcc4(){Vcc7.call(this);this.Kpp0 = new Float32Array([1.0,1.0,1.0,1.0]);this.KUU0 = function(){let buf = Vii6.getInstance();return buf;};this.Kvvv2 = function(camera){var cuniform = new Vhh0();cuniform.KLL5 = [this.KQQ5("u_viewMat"),this.KQQ5("u_projMat")];cuniform.Kaaa7(camera.Klll7);return cuniform;};this.KEE6 = function(ro){var oum = new Voo0();oum.Kjj2 = ["u_objMat"];oum.Krrr4 = [ro.KQQ0()];return oum;};};function Vnn0(){Vee7.call(this);this.KWW0 = 0;this.Kll0 = 0;this.Kmm8 = 1;this.Kvv8 = function(){return 1;};this.KFF4 = function(tp){this.KLL8("vec4","OutputColor0");this.Ktt5("ivec4","u_areas", 2);this.Ktt5("vec4","u_lights", this.KWW0 * 2);this.Kbbb8("vec2","v_texUV");this.Kqqq5(0);this.Kqqq5(1);let codeStr = "\
vec2 puv = v_texUV;\n\
vec4 color0 = texture(u_sampler0,puv.xy);\n\
vec4 fPos = texture(u_sampler1,puv.xy);\n\
ivec4 area = u_areas[0];\n\
vec3 lightColor = vec3(0.0);\n\
int k = 0;\n\
float dis;\n\
vec4 lpColor;\n\
for(int i = 0; i < area.x; ++i)\n\
{\n\
k = i * 2;\n\
lpColor = u_lights[k + 1];\n\
dis = 1.0 - length(u_lights[k].xyz - fPos.xyz) / lpColor.a;\n\
dis = max(dis, 0.0);\n\
dis *= dis;\n\
lightColor += lpColor.rgb * dis;\n\
}\n\
OutputColor0 = vec4(lightColor + 0.01 * color0.rgb,1.0);\n\
";
this.Keee8("\n" + codeStr);};this.Kff0 = function(){return "[Vnn0()]";};};function Vmm4(){Vii2.call(this);this.Kvv8 = function(){return 0;};this.KFF4 = function(tp){this.Khhh1("vec3","a_vs");this.Khhh1("vec2","a_uvs");let codeStr = "\
gl_Position = vec4(a_vs, 1.0f);\n\
v_texUV = a_uvs;\n\
";
this.Keee8("\n"+codeStr);};this.Kff0 = function(){return "[Vmm4()]";};};function Vhh1(){this.rn = 2;this.cn = 2;this.KWW0 = 16;this.Kqq8 = 0;let m_uniqueName = "";let m_vshdIDNS = "";let m_fshdIDNS = "";let m_texEnabled = false;this.KFF1 = function(texEnabled){m_texEnabled = true;m_uniqueName = "Voo6";m_vshdIDNS = "";m_fshdIDNS = "";};let m_fragCode = "";let m_vtxCode = "";this.Knnn1 = function(){let fragBlock = new Vnn0();fragBlock.Kll0 = this.Kll0;fragBlock.Kmm8 = this.Kmm8;fragBlock.KWW0 = this.KWW0;let fragShaderBody = new Vff3();fragShaderBody.KVV6( fragBlock );fragShaderBody.KNN2(m_texEnabled);let vtxBlock = new Vmm4();let vtxShaderBody = new Vee1();vtxShaderBody.KVV6( vtxBlock );vtxShaderBody.KQQ1( fragShaderBody );vtxShaderBody.KNN2(m_texEnabled);m_fragCode = fragShaderBody.Kkk8();m_vtxCode = vtxShaderBody.Kkk8();};this.Krr8 = function(){return m_fragCode;};this.KQQ8 = function(){return m_vtxCode;};this.Kttt0 = function(){return m_uniqueName + m_vshdIDNS + m_fshdIDNS;};this.Kff0 = function(){return "[Vhh1()]";};};Vhh1.___s_instance = new Vhh1();Vhh1.getInstance = function(){return Vhh1.___s_instance;};function Voo6(ptype){Vcc7.call(this);this.Kttt8 = "";let m_lightsTotal = 16;let m_rn = 2;let m_cn = 2;let m_type = ptype;let m_lightFDS = null;let m_areaParam = null;this.Kpp0 = new Float32Array([1.0,1.0,1.0,1.0]);this.KUU0 = function(){let buf = Vhh1.getInstance();buf.rn = m_rn;buf.cn = m_cn;buf.Kqq8 = m_type;buf.KWW0 = m_lightsTotal;return buf;};this.Kddd6 = function(lightsTotal, prn, pcn){m_lightsTotal = lightsTotal;m_rn = prn;m_cn = pcn;m_lightFDS = new Float32Array(lightsTotal * 8);};this.KWW6 = function(){return m_lightFDS;};this.Kyy2 = function(index, begin, total){if (m_areaParam == null){let tot = 2;m_areaParam = new Float32Array(tot * 4);let k = 0;let fds = m_areaParam;for (let j = 0; j < tot; ++j){k = j * 4;fds[k] = 0;fds[k + 1] = 0;fds[k + 2] = 0;fds[k + 3] = 0;};fds[index] = total;}else{m_areaParam[index] = total;};};this.Kvvv2 = function(camera){return null;};this.KEE6 = function(ro){if(m_areaParam == null){this.Kyy2(0,0,0);};var oum = new Voo0();oum.Kmm5 = [2,m_lightsTotal * 2];oum.Kjj2 = ["u_areas", "u_lights"];oum.Krrr4 = [m_areaParam, m_lightFDS];return oum;};};function Vaa7(){Vhh4.call( this );let m_texProxy = null;let m_texList = [null, null, null];this.Kjjj6 = function(){if(m_texProxy == null){m_texProxy = new Vhh6(Stage.Kvv6, Stage.KMM1);m_texProxy.KBB1 = "m_texProxy0";};return m_texProxy;};this.KCC6 = function(i, pw, ph){if (m_texList[i] != null){return m_texList[i];};let m_tex = new Vhh6(pw, ph);m_texList[i] = m_tex;if (i >= 1){m_tex.Kvvv8 = Vnn2.RGBA16F;m_tex.Kvvv5 = Vnn2.RGBA;m_tex.Kuuu0 = Vaa0.FLOAT;};return m_tex;};this.Kggg5 = function(renderer){renderer.Kzz5(0);renderer.Kmmm8.Kxxx6(0.0, 0.0, 0.0);renderer.KEE2(this.KCC6(0, renderer.KGG8(), renderer.Ksss2()), true, false, 0);renderer.KEE2(this.KCC6(1, renderer.KGG8(), renderer.Ksss2()), true, false, 1);renderer.KEE2(this.KCC6(2, renderer.KGG8(), renderer.Ksss2()), true, false, 2);};this.Kgg6 = function(renderer){renderer.Kmmm8.Kxxx6(0.0, 0.0, 0.0);renderer.Kkkk6();};this.Kqq6 = function(){return true;};this.Knn6 = function(){return true;};this.Kaaa2 = function(){return true;};};function Vpp1(){Vhh4.call( this );let m_tex = null;this.Kjjj6 = function(pw, ph){if (m_tex != null){return m_tex;};m_tex = new Vhh6(pw, ph);return m_tex;};this.Kggg5 = function(renderer){renderer.Kzz5(1);renderer.Kmmm8.Kxxx6(0.0, 0.0, 0.0);renderer.KEE2(getTexture(renderer.KGG8(), renderer.Ksss2()), false, false, 0);return 1;};this.Kgg6 = function(renderer){renderer.KTT3(false);renderer.Kmmm8.Kxxx6(0.2, 0.3, 0.1);renderer.Kkkk6();};this.Kqq6 = function(){return true;};this.Knn6 = function(){return true;};this.Kaaa2 = function(){return true;};};function Vpp2(){let m_scene = null;this.KBB6 = new Vaa7();let m_layer0ID = -1;let m_layer1ID = -1;let m_layer2ID = -1;this.KFF1 = function(sc){m_scene = sc;m_layer0ID = m_scene.Kqqq0();m_layer1ID = m_scene.Kqqq6(this.KBB6);m_layer2ID = m_scene.Kqqq0();};this.Kbbb6 = function(rvo){m_scene.Kkk7(rvo,m_layer0ID);};this.Krr7 = function(rvo){m_scene.Kkk7(rvo,m_layer1ID);};this.Kxxx0 = function(rvo){m_scene.Kkk7(rvo,m_layer2ID);};};function Vcc8(){let m_rsc = new Vmm6();let m_cameraTrack = new Voo4();let m_self = this;let m_scMana = new Vpp2();let m_scCamera = null;this.KFF1 = function(glCanvasNS){Vdd4();m_rsc.Kzzz2 = 3000;m_rsc.KFF1(glCanvasNS,new Vqq0(900,900,900));m_rsc.Kfff8().KLL2 = true;m_rsc.Kfff8().Kmmm8.Kgg8(0.0,0.0,0.0,0.0);m_scCamera = m_rsc.Kfff8().Kqq2;m_cameraTrack.Kgg0( m_scCamera );m_scMana.KFF1(m_rsc);this.Kuu4();};this.Krrr3 = function(disp){var m = new DefaultLightMaterial();disp.Kll3(m);};let m_managerIdns = [];let m_rangeMinV = new Vqq0();let m_rangeMaxV = new Vqq0();this.Kuu4 = function(){let purl = "";purl = "static/voxgl/assets/ceil_01.jpg";let currTex = Vdd3.getTexAndLoadImg(purl);let size = 50;let minV = new Vqq0(-size,-size,-size);let maxV = new Vqq0(size,size,size);let cube = null;let plane = null;let action = null;cube = new Vpp7();cube.Kll3(new Vcc4());cube.KFF1(minV, maxV, [currTex]);cube.Kiii7(0,0,0);m_scMana.Kbbb6(cube);action = new Vee3();action.KRR4(Math.random() - 0.5,Math.random() - 0.5,Math.random() - 0.5);cube.Kss3(action);let subCube = null;let i = 0;for(i = 0; i < 30; ++i){subCube = new Vpp7();subCube.Kll3(new Vcc4());subCube.Kqq1(cube.Kpp7());subCube.KFF1(minV, maxV, [currTex]);subCube.Kiii7(Math.random() * 1000.0 - 500.0,Math.random() * 1000.0 - 500.0,Math.random() * 1000.0 - 500.0);subCube.Kgg5(Math.random() * 100,Math.random() * 100,Math.random() * 100);subCube.KHH5(Math.random() + 0.2,Math.random() + 0.2,Math.random() + 0.2);m_scMana.Kbbb6(subCube);action = new Vee3();action.KRR4(Math.random() - 0.5,Math.random() - 0.5,Math.random() - 0.5);subCube.Kss3(action);};let sphere = new Vaa2();sphere.Kll3(new Vcc4());sphere.Kxxx8 = true;sphere.KFF1(30,20,20,[currTex]);let subSphere = null;for(i = 0; i < 30; ++i){subSphere = new Vaa2();subSphere.Kll3(new Vcc4());subSphere.Kqq1(sphere.Kpp7());subSphere.KFF1(60,20,20,[currTex]);subSphere.Kiii7(Math.random() * 1000.0 - 500.0,Math.random() * 1000.0 - 500.0,Math.random() * 1000.0 - 500.0);subSphere.Kgg5(Math.random() * 100,Math.random() * 100,Math.random() * 100);subSphere.KHH5(Math.random() + 0.2,Math.random() + 0.2,Math.random() + 0.2);m_scMana.Kbbb6(subSphere);action = new Vee3();action.KRR4(Math.random() - 0.5,Math.random() - 0.5,Math.random() - 0.5);subSphere.Kss3(action);};size = 500;minV = new Vqq0(-size,-size,-size);maxV = new Vqq0(size,size,size);m_rangeMinV.Kbb8( minV );m_rangeMaxV.Kbb8( maxV );cube = new Vpp7();cube.Kkk3 = -1.0;cube.Kll3(new Vcc4());cube.KFF1(minV, maxV, [currTex]);cube.Kiii7(0,0,0);cube.Kxx4 = Vkk7.FRONT;m_scMana.Kbbb6(cube);let indLightsMaterial = new Voo6(0);let texList = [m_scMana.KBB6.KCC6(0, Stage.Kvv6, Stage.KMM1),m_scMana.KBB6.KCC6(2, Stage.Kvv6, Stage.KMM1)];let total = 4;let k = 0;let lightManaInd = null;for(k = 0; k < total; ++k){lightManaInd = new Vkk2();lightManaInd.id = 0;lightManaInd.KFF1(660, 3, texList, 470);m_managerIdns.push(lightManaInd);};for(k = 0; k < total; ++k){lightManaInd = m_managerIdns[k];lightManaInd.Kww0( m_rsc.Kfff8() );this.KMM3(lightManaInd);let planes = lightManaInd.Kjj8;let len = planes.length;let i = 0;for(; i < len; ++i){if(k > 0){planes[i].Kyyy6 = Vnn8.ADD;}else{};m_scMana.Kxxx0( planes[i] );};};};this.KMM3 = function(mana){let i = 0;let light = null;let lights = mana.Kyy8.Kll7;for (i = 0; i < lights.length; ++i){light = lights[i];light.Koo7 = true;light.KLL7(m_rangeMinV, m_rangeMaxV);light.Ktt4(Math.random() * 4.0 + 2.0);light.Khhh6.Kkkk3(Math.random() * 1000.0 - 500.0, Math.random() * 780.0 - 480.0, Math.random() * 1000.0 - 500.0);light.KUU3 = Math.random() * 50.0 + 100.0;};};let m_doInsBoo = true;this.KXX1 = function(){let i = 0;let j = 0;let manaIndTotal = m_managerIdns.length;for (; i < manaIndTotal; ++i){let manaIdn = m_managerIdns[i];let lights = manaIdn.Kyy8.Kll7;let lightTot = lights.length;for (j = 0; j < lightTot; ++j){light = lights[j];light.run();};manaIdn.KOO4(m_scCamera);manaIdn.KBB2();};};this.run = function(){m_cameraTrack.KBBB5(-0.2);m_rsc.run();if(m_doInsBoo){this.KXX1();};};};function main(){console.log("--------------------------------Main--- init ------------------------------------");var sc = new Vcc8();sc.KFF1("glcanvas");function Vgg1(now){if(SYS_NO_ERROR){sc.run();requestAnimationFrame(Vgg1);}else{};};requestAnimationFrame(Vgg1);console.log("--------------------------------Main--- end -------------------------------------");};main();